{"version":2,"kind":"Notebook","sha256":"a42ea1bf513e98c03a99ce9aa042afe10695d2c9bffbd90bc8cf84f720551c9a","slug":"hda-rest-quick-start","location":"/production/HDA/REST/HDA-REST-quick-start.ipynb","dependencies":[],"frontmatter":{"title":"HDA Tutorial - Quick start","subtitle":"This notebook demonstrates how to use the HDA (Harmonized Data Access) API by sending a few HTTP requests to the API, using Python code.","tags":["HDA","STAC","HTTP requests"],"copyright":"Â© 2025 EUMETSAT","authors":[{"id":"Serena Avolio (EUMETSAT/Starion)","name":"Serena Avolio (EUMETSAT/Starion)"}],"license":{"content":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"thumbnail":"../../img/hda.png","kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"HDA-REST-quick-start.ipynb","url":"/HDA-REST-quick-start-0aa7ac54197860bb409cbba19ff63c91.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"margin":"6px 0"},"children":[{"type":"link","style":{"textDecoration":"none"},"url":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/REST/HDA-REST-quick-start.ipynb","children":[{"type":"span","class":"launch","children":[{"type":"text","value":"ðŸš€ Launch in JupyterHub","key":"G23GstiPAs"}],"key":"HpRm3oIo8w"}],"urlSource":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/REST/HDA-REST-quick-start.ipynb","key":"ZivHOEUZwB"}],"key":"Xay5rxkELB"}],"key":"pMOZNsZmMm"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"div","class":"alert alert-block alert-warning","children":[{"type":"strong","children":[{"type":"text","value":"Prerequisites:","key":"UZUbP0Eoiy"}],"key":"gOwtmZeokm"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To search and access DEDL data a ","key":"dchEvHjqBC"},{"type":"link","url":"https://platform.destine.eu/","children":[{"type":"text","value":"DestinE user account","key":"SJQfq9Kgop"}],"urlSource":"https://platform.destine.eu/","key":"wBOqyNTvKB"},{"type":"text","value":" is needed","key":"qe66fLATR1"}],"key":"lvA4mLkUuo"}],"key":"t3X8jlro4D"},{"type":"strong","children":[{"type":"text","value":"References:","key":"VCCSJcwU5u"}],"key":"YdUlyVNujh"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","url":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-discovery-and-data-access/Use-of-Harmonized-Data-Access/Use-of-Harmonized-Data-Access.html","children":[{"type":"text","value":"DestinE Data Lake (DEDL) Harmonized Data Access (HDA) documentation","key":"zxASTnfvau"}],"urlSource":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-discovery-and-data-access/Use-of-Harmonized-Data-Access/Use-of-Harmonized-Data-Access.html","key":"XzVXc1FlP3"}],"key":"mLP61mL86c"}],"key":"WFYsxJRD3p"}],"key":"FSIiTxcFrq"}],"visibility":"show","key":"LI0r627JsW"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook demonstrates how to use the HDA (Harmonized Data Access) API by sending a few HTTP requests to the API, using Python code.\nThe tutorial shows the first steps in using Harmonised Data to discover and access the data offered by the DestinE Data Portfolio","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Hs0F9lNwd2"}],"key":"yWrDpU6qzo"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"hroughout this quickstart notebook, you will learn:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"J5ky6LASvz"}],"key":"KPz0JOTZxB"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Discover","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cyHLeOGGPl"}],"identifier":"hda-rest-quick-start.ipynb-discover","label":"HDA-REST-quick-start.ipynb-Discover","kind":"heading","template":"{name}","resolved":true,"html_id":"hda-rest-quick-start-ipynb-discover","key":"QbKvmIb30t"},{"type":"text","value":": How to discover ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lveoU4Sc7T"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"DEDL","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"M2sp1Yg762"}],"key":"kGWwtQuETW"},{"type":"text","value":" collections and services through HDA.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ns0giSyKIM"}],"key":"ar0JJPQlJn"}],"key":"HBukWYey8B"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Authenticate","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zMjETBuQaa"}],"identifier":"hda-rest-quick-start.ipynb-authenticate","label":"HDA-REST-quick-start.ipynb-Authenticate","kind":"heading","template":"{name}","resolved":true,"html_id":"hda-rest-quick-start-ipynb-authenticate","key":"kRvNyVi2oU"},{"type":"text","value":": How to authenticate for searching and access ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fyRAQoOjms"},{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"DEDL","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UFloOVZJd6"}],"key":"uzoGAmGG7c"},{"type":"text","value":" collections.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RtCvCW1kF7"}],"key":"b1XPNBs8xV"}],"key":"nUSBaWNVxH"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Search data","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Y7TaQfnAuZ"}],"identifier":"hda-rest-quick-start.ipynb-search","label":"HDA-REST-quick-start.ipynb-Search","kind":"heading","template":"{name}","resolved":true,"html_id":"hda-rest-quick-start-ipynb-search","key":"k5v8OwovWP"},{"type":"text","value":":  How to search ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"CUS4penb6k"},{"type":"emphasis","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"DEDL","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"V9rmw9ZzUQ"}],"key":"gl0qyF8bq5"},{"type":"text","value":" data through HDA.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"pHIXEApR9S"}],"key":"NL0SiSzlfQ"}],"key":"bRTZtBbJUf"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Download data","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"cBVCbyx4dV"}],"identifier":"hda-rest-quick-start.ipynb-download","label":"HDA-REST-quick-start.ipynb-Download","kind":"heading","template":"{name}","resolved":true,"html_id":"hda-rest-quick-start-ipynb-download","key":"vmgr6MyXxx"},{"type":"text","value":": How to download ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XsYEp0JSOQ"},{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"DEDL","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mkJcTXGLlX"}],"key":"A8iILriA8I"},{"type":"text","value":" data through HDA.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LJmRDFQ0IL"}],"key":"nTWj5cnlsN"}],"key":"V999Hqs2mx"}],"key":"PIQ1PMWnGB"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"The detailed API and definition of each endpoint and parameters is available in the HDA Swagger UI at:\n","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hjHRQioe6U"},{"type":"link","url":"https://hda.data.destination-earth.eu/docs/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"https://â€‹hdaâ€‹.dataâ€‹.destinationâ€‹-earthâ€‹.euâ€‹/docs/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"iJoGLTGKpQ"}],"urlSource":"https://hda.data.destination-earth.eu/docs/","key":"FX4ECnP4t3"}],"key":"KvvLF5Miks"}],"key":"q5yCyMjprc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Discover","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cIikyosnzl"}],"label":"HDA-REST-quick-start.ipynb-Discover","identifier":"hda-rest-quick-start.ipynb-discover","html_id":"hda-rest-quick-start-ipynb-discover","key":"WbaVeGTkj4"}],"key":"yKBSEFPIUM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Import the relevant modules","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"o9igWJTCzN"}],"identifier":"import-the-relevant-modules","label":"Import the relevant modules","html_id":"import-the-relevant-modules","implicit":true,"key":"QGZUyzEbVy"}],"key":"EnbIrCr9hH"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nimport json\nfrom getpass import getpass\nfrom tqdm import tqdm\nimport time\nimport re\n\nimport destinelab as deauth\n\nfrom IPython.display import JSON","visibility":"show","key":"FwSXdOPW5q"},{"type":"output","id":"DiUp1RCcWR5Tvr8hsQMdQ","data":[],"visibility":"show","key":"WE8rSNE3oe"}],"visibility":"show","key":"HLXgAqYKj0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define some constants for the API URL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Pn5Ox2NCEC"}],"identifier":"define-some-constants-for-the-api-url","label":"Define some constants for the API URL","html_id":"define-some-constants-for-the-api-url","implicit":true,"key":"XWY17YW2xu"}],"key":"TOOAyEiT6d"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define the collection to be used\nCOLLECTION_ID = \"EO.EUM.DAT.SENTINEL-3.OL_2_WRR___\"\n\n# Core API\nHDA_API_URL = \"https://hda.data.destination-earth.eu\"\n\n# STAC API\n## Core\nSTAC_API_URL = f\"{HDA_API_URL}/stac/v2\"\n\n##Â Collections\nCOLLECTIONS_URL = f\"{STAC_API_URL}/collections\"\nCOLLECTION_BY_ID_URL = f\"{COLLECTIONS_URL}/{COLLECTION_ID}\"\n\n## Items\nCOLLECTION_ITEMS_URL = f\"{COLLECTIONS_URL}/{COLLECTION_ID}/items\"\n\n## Item Search\nSEARCH_URL = f\"{STAC_API_URL}/search\"\n\n## HTTP Success\nHTTP_SUCCESS_CODE = 200","visibility":"show","key":"v0YFsGZEmH"},{"type":"output","id":"PdtvOVb43rAp4QJlKXPMV","data":[],"visibility":"show","key":"amfCQxq5Ad"}],"visibility":"show","key":"S6IdU1LbaJ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Discover data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ElKrJJT7fu"}],"identifier":"discover-data","label":"Discover data","html_id":"discover-data","implicit":true,"key":"tGyoxbvWd6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Below an example for discovering collections concerning Chlorophyll-a Concentration and algal pigment.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WzQL8TzKSA"}],"key":"xUKMVMYJ8o"}],"key":"bpSK4aCDPW"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"response = requests.get(COLLECTIONS_URL,params = {\"q\": \"Chlorophyll-a Concentration,algal pigment\"})\n\nJSON(response.json(), expanded=False)","visibility":"show","key":"Z0SSHM29l4"},{"type":"output","id":"sej99iUeHXwiIOf1-22Ny","data":[{"output_type":"execute_result","execution_count":5,"metadata":{"application/json":{"expanded":false,"root":"root"}},"data":{"application/json":{"content_type":"application/json","hash":"2838aaecfbddd61c0156565a94a33384","path":"/2838aaecfbddd61c0156565a94a33384.json"},"text/plain":{"content":"<IPython.core.display.JSON object>","content_type":"text/plain"}}}],"visibility":"show","key":"Q9aFK44iaR"}],"visibility":"show","key":"PxyWKh14fb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Authenticate","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JmEkDFoD1C"}],"label":"HDA-REST-quick-start.ipynb-Authenticate","identifier":"hda-rest-quick-start.ipynb-authenticate","html_id":"hda-rest-quick-start-ipynb-authenticate","key":"RTfQyaov4a"}],"key":"abrmDrUNYl"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"DESP_USERNAME = input(\"Please input your DESP username or email: \")\nDESP_PASSWORD = getpass(\"Please input your DESP password: \")\n\nauth = deauth.AuthHandler(DESP_USERNAME, DESP_PASSWORD)\naccess_token = auth.get_token()\nif access_token is not None:\n    print(\"DEDL/DESP Access Token Obtained Successfully\")\nelse:\n    print(\"Failed to Obtain DEDL/DESP Access Token\")\n\nauth_headers = {\"Authorization\": f\"Bearer {access_token}\"}","visibility":"show","key":"fjJZgJJr7X"},{"type":"output","id":"Ox2zUYKV3Cwi4Dawa156a","data":[{"name":"stdout","output_type":"stream","text":"Please input your DESP username or email:  eum-dedl-user\nPlease input your DESP password:  Â·Â·Â·Â·Â·Â·Â·Â·\n"},{"name":"stdout","output_type":"stream","text":"Response code: 200\nDEDL/DESP Access Token Obtained Successfully\n"}],"visibility":"show","key":"xozP0IpduT"}],"visibility":"show","key":"I95CVaJIs6"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Search","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"LEyMsltwwb"}],"label":"HDA-REST-quick-start.ipynb-Search","identifier":"hda-rest-quick-start.ipynb-search","html_id":"hda-rest-quick-start-ipynb-search","key":"l0OKwthqlG"}],"visibility":"show","key":"rnWdrUGhVx"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Once selected a collection it is possible to search for items that match the specified input filters and order the results.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U7t6ExEbEi"}],"key":"ehHoPlNwef"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The collection used for this tutorial is ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wYVB5QAeS9"},{"type":"link","url":"https://hda.data.destination-earth.eu/ui/dataset/EO.EUM.DAT.SENTINEL-3.OL_2_WRR___","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"OLCI Level 2 Ocean Colour Reduced Resolution - Sentinel-3","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZTiBHr0wbe"}],"urlSource":"https://hda.data.destination-earth.eu/ui/dataset/EO.EUM.DAT.SENTINEL-3.OL_2_WRR___","key":"b0EWOlGUpz"}],"key":"UvdPT0LXPb"}],"key":"bAl9F23Eiv"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"BODY = {\n    \"collections\": [\n        COLLECTION_ID,\n    ],\n    \"datetime\" : \"2024-09-08T00:00:00Z/2024-09-09T23:59:59Z\",\n    \"bbox\": [-11,35,\n              50,72 ],\n    \"sortby\": [{\"field\": \"datetime\",\"direction\": \"desc\"}\n              ],\n    \"limit\": 3,\n}\n\nr=requests.post(SEARCH_URL, json=BODY, headers=auth_headers)\nif(r.status_code!= 200):\n    (print(r.text))\nr.raise_for_status()\nJSON(r.json(), expanded=False)   ","visibility":"show","key":"zHU7KZLKFF"},{"type":"output","id":"rk-GRM2eJinWwHfv3dUbB","data":[{"output_type":"execute_result","execution_count":7,"metadata":{"application/json":{"expanded":false,"root":"root"}},"data":{"application/json":{"content_type":"application/json","hash":"c193655624537f2b7567e14e11cce445","path":"/c193655624537f2b7567e14e11cce445.json"},"text/plain":{"content":"<IPython.core.display.JSON object>","content_type":"text/plain"}}}],"visibility":"show","key":"gBiUHWBXyD"}],"visibility":"show","key":"MbLTQaWwz9"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Download","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"NJTTpdiD5K"}],"label":"HDA-REST-quick-start.ipynb-Download","identifier":"hda-rest-quick-start.ipynb-download","html_id":"hda-rest-quick-start-ipynb-download","key":"huJMYK2SAz"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Once obtained the search results we can download the returned data.\nThe code below is to download the first data returned by our search.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZrWlD27z78"}],"key":"m7NSSnbUeH"}],"visibility":"show","key":"G743LYrhvU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#select the first item in the result to download\nproduct = r.json()[\"features\"][0]\n\n# DownloadLink is an asset representing the whole product\ndownload_url = product[\"assets\"][\"downloadLink\"][\"href\"]\nITEM_ID = product[\"id\"]\n\nresponse = requests.get(download_url,stream=True,headers=auth_headers)\n\n# If the request was successful, download the file\nif (response.status_code == HTTP_SUCCESS_CODE):\n        print(\"Downloading ...\")\n        filename = ITEM_ID + \".zip\"\n        with open(filename, 'wb') as f:\n            for chunk in response.iter_content(chunk_size=1024): \n                if chunk:\n                    f.write(chunk)\n                    f.flush()\n        print(\"The dataset has been downloaded to: {}\".format(filename))\nelse: print(\"Request Unsuccessful! Error-Code: {}\".format(response.status_code))","visibility":"show","key":"Gwn6ji0IL0"},{"type":"output","id":"rmfhigEEkLINbF-ScOTMS","data":[{"name":"stdout","output_type":"stream","text":"Downloading ...\nThe dataset has been downloaded to: S3A_OL_2_WRR____20240909T130929_20240909T135342_20240910T163350_2653_116_352______MAR_O_NT_003.SEN3.zip\n"}],"visibility":"show","key":"XcbS0z8Jyd"}],"visibility":"show","key":"RxMvuyG9EH"}],"key":"efOEn3Iytn"},"references":{"cite":{"order":[],"data":{}}}}