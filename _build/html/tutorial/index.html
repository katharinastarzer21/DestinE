<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Hook Tutorial - Data Harvest - DEDL Notebook Gallery</title><meta property="og:title" content="Hook Tutorial - Data Harvest - DEDL Notebook Gallery"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png"/><meta property="og:image" content="/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png"/><link rel="stylesheet" href="/build/_assets/app-5WKS5EPQ.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><div class="p-1 mr-3 dark:bg-white dark:rounded"><img src="/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png" class="h-9" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R74op:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">‚åò</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="DEDL Notebook Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">DEDL Notebook Gallery</a><a title="Contribute to the Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/contribute">Contribute to the Gallery</a><a title="HDA Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/hda">HDA Gallery</a><a title="HOOK Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/hook">HOOK Gallery</a><a title="STACK Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/stack">STACK Gallery</a></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer" title="Content License: MIT License (MIT)" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="mx-1 inline-block opacity-60 hover:opacity-100 hover:text-[#599F46]"><path d="M13.2 15.6c1.4-.5 2.1-1.6 2.1-3.3S13.8 8.9 12 8.9c-1.9 0-3.3 1.6-3.3 3.3 0 1.8.8 3 2.2 3.4l-2.3 5.9c-3.1-.8-6.3-4.6-6.3-9.3 0-5.5 4.3-10 9.7-10s9.8 4.5 9.8 10c0 4.7-3.1 8.5-6.3 9.3l-2.3-5.9z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8top:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Hook Tutorial - Data Harvest</h1><p class="mt-2 mb-0 lead text-zinc-600 dark:text-zinc-400">This notebook demonstrates how to use the Hook service.</p><header class="mt-4 not-prose"><div><span class="font-semibold text-sm inline-block"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78top:" data-state="closed">Author: Eumetsat</button></span></div></header></div><div id="skip-to-article"></div><div class="" style="margin:6px 0"><a target="_blank" rel="noreferrer" href="https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/HOOK/Tutorial.ipynb" class=""><span class="launch">üöÄ Launch in JupyterHub</span></a></div><div id="XMUvb57TRZ" class="relative group/block"><p>The detailed API and definition of each endpoint and parameters is available in the <strong>OnDemand Processing API OData v1</strong>  OpenAPI documentation found at:
<a target="_blank" rel="noreferrer" href="https://odp.data.destination-earth.eu/odata/docs" class="">https://<wbr/>odp<wbr/>.data<wbr/>.destination<wbr/>-earth<wbr/>.eu<wbr/>/odata<wbr/>/docs</a></p><p>Further documentation is available at:
<a target="_blank" rel="noreferrer" href="https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-big-data-processing-services/Hook-service/Hook-service.html" class="">https://<wbr/>destine<wbr/>-data<wbr/>-lake<wbr/>-docs<wbr/>.data<wbr/>.destination<wbr/>-earth<wbr/>.eu<wbr/>/en<wbr/>/latest<wbr/>/dedl<wbr/>-big<wbr/>-data<wbr/>-processing<wbr/>-services<wbr/>/Hook<wbr/>-service<wbr/>/Hook<wbr/>-service<wbr/>.html</a></p></div><div id="YBT8PolU2S" class="relative group/block"><h2 id="install-python-package-requirements-and-import-environment-variables" class="relative group"><span class="heading-text">Install python package requirements and import environment variables</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#install-python-package-requirements-and-import-environment-variables" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2></div><div id="yDxlXZ8Xck" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Note: The destinelab python package (which helps with authentication) is available already if you are using Python DEDL kernel
# Otherwise, the destinelab python package can be installed by uncommenting the following line

# For the importing of environment variables using the load_dotenv(...) command 
%pip install python-dotenv
# for example code navigating private S3 compatible storage (PRIVATE bucket storage)
%pip install boto3
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ogtb2Tn50FglbSM_ZgdQ5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="oyjn4wavsz2s" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div id="oyjn4wavsz2s-code" class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import os
import json
import requests
from dotenv import load_dotenv
from getpass import getpass
import destinelab as destinelab

# Load (optional) notebook specific environment variables from .env_tutorial
load_dotenv(&quot;./.env_tutorial&quot;, override=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div id="oyjn4wavsz2s-output" data-mdast-node-id="PBPwt5LCCrCwtG-NLXy3v" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sGD7VArZG4" class="relative group/block"><h2 id="authentification-get-token" class="relative group"><span class="heading-text">Authentification - Get token</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#authentification-get-token" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2></div><div id="vKSy0rgSCm" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># By default users should use their DESP credentials to get an Access_token
# This token is added as an Authorisation Header when interacting with the Hook Service API

# Enter DESP credentials.
DESP_USERNAME = input(&quot;Please input your DESP username or email: &quot;)
DESP_PASSWORD = getpass(&quot;Please input your DESP password: &quot;)
token = destinelab.AuthHandler(DESP_USERNAME, DESP_PASSWORD)

access_token = token.get_token()

# Check the status of the request
if access_token is not None:
    print(&quot;DEDL/DESP Access Token Obtained Successfully&quot;)
    # Save API headers
    api_headers = {&quot;Authorization&quot;: &quot;Bearer &quot; + access_token}
else:
    print(&quot;Failed to Obtain DEDL/DESP Access Token&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="nIYrELcrlaDEN6ql-dCvv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="J4n9IdG6bp" class="relative group/block"><h2 id="setup-static-variables" class="relative group"><span class="heading-text">Setup static variables</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#setup-static-variables" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2></div><div id="FyCX6Zu3BC" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Hook service url (ending with odata/v1/ - e.g. https://odp.data.destination-earth.eu/odata/v1/)
hook_service_root_url = &quot;https://odp.data.destination-earth.eu/odata/v1/&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="KnCJlaOGlQ1sYxRwSvMVw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="olvgrvv3sz2y" class="relative group/block"><h2 id="list-available-workflows" class="relative group"><span class="heading-text">List available workflows</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#list-available-workflows" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2><p>Next we can check what possible workflows are available to us by using method<br/><code>https://odp.data.destination-earth.eu/odata/v1/Workflows</code></p></div><div id="gsxyus-0sz2z" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div id="gsxyus-0sz2z-code" class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Send request and return json object listing all provided workfows, ordered by Id
result = requests.get(
    f&quot;{hook_service_root_url}Workflows?$orderby=Id asc&quot;, headers=api_headers   
).json()

print(&quot;List of available DEDL provided Hooks&quot;)
for i in range(len(result[&quot;value&quot;])):
    print(
        f&quot;Name:{str(result[&#x27;value&#x27;][i][&#x27;Name&#x27;]).ljust(20, &#x27; &#x27;)}DisplayName:{str(result[&#x27;value&#x27;][i][&#x27;DisplayName&#x27;])}&quot;
    )  # print JSON string</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div id="gsxyus_0sz2z-output" data-mdast-node-id="0vS6lufM-uAakvrcWRPF_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="MxB23Hh2cR" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Print result JSON object: containing provided workflow list
workflow_details = json.dumps(result, indent=4)
print(workflow_details)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="yEB1CXIfSJpS3KQ4Erqgv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RvXhAbdDGC" class="relative group/block"><h2 id="select-a-workflow-and-see-parameters" class="relative group"><span class="heading-text">Select a workflow and see parameters</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#select-a-workflow-and-see-parameters" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2></div><div id="jnsqmurcsz2z" class="relative group/block"><p>If we want to see the details of a specific workflow, showing us the parameters that can be set for that workflow, we can add a filter to the query as follows:</p><p><code>https://odp.data.destination-earth.eu/odata/v1/Workflows?$expand=WorkflowOptions&amp;$filter=(Name eq data-harvest)</code></p><p><strong>\<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi>W</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>f</mi><mi>l</mi><mi>o</mi><mi>w</mi><mi>O</mi><mi>p</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mo>‚àó</mo><mo>‚àó</mo><mi>s</mi><mi>h</mi><mi>o</mi><mi>w</mi><mi>s</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>a</mi><mi>c</mi><mi>c</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>b</mi><mi>y</mi><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>f</mi><mi>l</mi><mi>o</mi><mi>w</mi><mo>‚àó</mo><mo>‚àó</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">expand=WorkflowOptions** shows all parameters accepted by workflow   
**\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">p</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal">wOpt</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">‚àó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">‚àó</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal">llp</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">am</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ers</span><span class="mord mathnormal">a</span><span class="mord mathnormal">cce</span><span class="mord mathnormal">pt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">‚àó</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord">‚àó</span></span><span class="mspace newline"></span></span></span></span>filter=(Name eq data-harvest)</strong> narrows the result to workflow called ‚Äúdata-harvest‚Äù</p></div><div id="uevkzpclsz2b" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div id="uevkzpclsz2b-code" class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select workflow : defaults to data-harvest
workflow = os.getenv(&quot;HOOK_WORKFLOW&quot;, &quot;data-harvest&quot;)
print(f&quot;workflow: {workflow}&quot;)

# Send request
result = requests.get(
    f&quot;{hook_service_root_url}Workflows?$expand=WorkflowOptions&amp;$filter=(Name eq &#x27;{workflow}&#x27;)&quot;,
    headers=api_headers,
).json()
workflow_details = json.dumps(result, indent=4)
print(workflow_details)  # print formatted workflow_details, a JSON string</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div id="uevkzpclsz2b-output" data-mdast-node-id="cU51G5aMst_5OChb69upW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="pZQPtav5yn" class="relative group/block"><h2 id="order-selected-workflow" class="relative group"><span class="heading-text">Order selected workflow</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#order-selected-workflow" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2></div><div id="xXqVzfnvI9" class="relative group/block"><p>The order selected above will now be configured and executed.</p><p>e.g. workflow = ‚Äúdata-harvest‚Äù.</p><ul><li><p>Make an order to ‚Äòharvest data‚Äô using Harmonised Data Access API.</p></li><li><p>i.e. data from an input source can be transferred to a Private bucket or a Temporary storage bucket.</p></li></ul></div><div id="yZMujrTJBe" class="relative group/block"><h3 id="name-your-order" class="relative group"><span class="heading-text">Name your order</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#name-your-order" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3></div><div id="tPhuGL1dXz" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Here we set the variable order_name, this will allow us to:
# Easily identify the running process (e.g. when checking the status)
# order_name is added as a suffix to the order &#x27;Name&#x27;
order_name = os.getenv(&quot;HOOK_ORDER_NAME&quot;) or input(&quot;Name your order: &quot;)
print(f&quot;order_name:{order_name}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="SBDQX4hUwb3JSfmW-Pu4t" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="KdfqkLjx1W" class="relative group/block"><h3 id="define-output-storage" class="relative group"><span class="heading-text">Define output storage</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-output-storage" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3></div><div id="bFMsMfa9uM" class="relative group/block"><p>In workflow parameters, among others values, storage to retreive the result has to be provided.<br/><strong>Two possibilites:</strong></p><ol start="1"><li><p>Use your user storage</p></li><li><p>Use a temporary storage</p></li></ol></div><div id="mM6VO7adaG" class="relative group/block"><h4 id="id-1-your-user-storage-provided-by-dedl-islet-service" class="relative group"><span class="heading-text">1. - Your user storage (provided by DEDL ISLET service)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-your-user-storage-provided-by-dedl-islet-service" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h4></div><div id="MBkFCTU7Bz" class="relative group/block"><p>Example using a S3 bucket created with ISLET Storage service  - result will be available in this bucket</p><blockquote><p><em>workflow parameter: {‚ÄúName‚Äù: ‚Äúoutput_storage‚Äù, ‚ÄúValue‚Äù: ‚ÄúPRIVATE‚Äù}</em></p></blockquote></div><div id="TTuiFOboB8" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Output storage - Islet service

# Note: If you want the output to go to your own PRIVATE bucket rather than TEMPORARY storage (expires after 2 weeks),
#       i) This Configuration will need to be updated with your output_bucket, output_storage_access_key, output_secret_key, output_prefix
#       ii) You will need to change the output_storage in the order to PRIVATE and add the necessary source_ parameters (see workflow options and commented example)

# URL of the S3 endpoint in the Central Site (or lumi etc.)
output_storage_url = &quot;https://s3.central.data.destination-earth.eu&quot;
# output_storage_url = &quot;https://s3.lumi.data.destination-earth.eu&quot;

# Name of the object storage bucket where the results will be stored.
output_bucket = os.getenv(&quot;HOOK_OUTPUT_BUCKET&quot;, &quot;your-bucket-name&quot;)
print(f&quot;output_bucket            : {output_bucket}&quot;)

# Islet object storage credentials (openstack ec2 credentials)
output_storage_access_key = os.getenv(&quot;HOOK_OUTPUT_STORAGE_ACCESS_KEY&quot;, &quot;your-access-key&quot;)
output_storage_secret_key = os.getenv(&quot;HOOK_OUTPUT_STORAGE_SECRET_KEY&quot;, &quot;your-secret-key&quot;)
print(f&quot;output_storage_access_key: {output_storage_access_key}&quot;)
print(f&quot;output_storage_secret_key: {output_storage_secret_key}&quot;)


# This is the name of the folder in your output_bucket where the output of the hook will be stored.
# Here we concatenate &#x27;dedl&#x27; with the &#x27;workflow&#x27; and &#x27;order_name&#x27;
output_prefix = f&quot;dedl-{workflow}-{order_name}&quot;
print(f&quot;output_prefix            : {output_prefix}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ZZA627X3Na-irT0hpJuyj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="z3aQ5kaER9" class="relative group/block"><h4 id="id-2-use-temporary-storage" class="relative group"><span class="heading-text">2 - Use temporary storage</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-use-temporary-storage" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h4></div><div id="FuRdvWWQIL" class="relative group/block"><p>The result of processing will be stored in shared storage and download link provided in the output product details</p><blockquote><p><em>workflow parameter: {‚ÄúName‚Äù: ‚Äúoutput_storage‚Äù, ‚ÄúValue‚Äù: ‚ÄúTEMPORARY‚Äù}</em></p></blockquote></div><div id="x7R1l9L7qq" class="relative group/block"><h3 id="define-parameters-and-send-order" class="relative group"><span class="heading-text">Define parameters and send order</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-parameters-and-send-order" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3></div><div id="AAG2wngXS7" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># URL of the STAC server where your collection/item can be downloaded
stac_hda_api_url = &quot;https://hda.data.destination-earth.eu/stac&quot;

# Note: The data (collection_id and data_id) will have been previously discovered and searched for

# Set collection where the item can be found : defaults to example for data-harvest
collection_id = os.getenv(&quot;HOOK_COLLECTION_ID&quot;, &quot;EO.ESA.DAT.SENTINEL-2.MSI.L1C&quot;)
print(f&quot;STAC collection url: {stac_hda_api_url}/collections/{collection_id}&quot;)

# Set the Item to Retrieve : defaults to example for data-harvest. If Multiple Values, provide comma separated list
data_id = os.getenv(&quot;HOOK_DATA_ID&quot;, &quot;S2A_MSIL1C_20230910T050701_N0509_R019_T47VLH_20230910T074321.SAFE&quot;)
print(f&quot;data_id: {data_id}&quot;)
identifier_list = [data_id_element.strip() for data_id_element in data_id.split(&#x27;,&#x27;)]

# Get boolean value from String, default (False)
is_private_storage = os.getenv(&quot;HOOK_IS_PRIVATE_STORAGE&quot;, &quot;False&quot;) == &quot;True&quot;
print(f&quot;is_private_storage: {is_private_storage}&quot;)

# we use source_type to add DESP or EXTERNAL specific configuration
source_type = os.getenv(&quot;HOOK_SOURCE_TYPE&quot;, &quot;DESP&quot;)
print(f&quot;source_type: {source_type}&quot;)

if source_type == &quot;EXTERNAL&quot;:
    EXTERNAL_USERNAME = os.getenv(&quot;HOOK_EXTERNAL_USERNAME&quot;, &quot;EXTERNAL_USERNAME&quot;)
    EXTERNAL_PASSWORD = os.getenv(&quot;HOOK_EXTERNAL_PASSWORD&quot;, &quot;EXTERNAL_PASSWORD&quot;)
    EXTERNAL_TOKEN_URL = os.getenv(&quot;HOOK_EXTERNAL_TOKEN_URL&quot;, &quot;EXTERNAL_TOKEN_URL&quot;)
    EXTERNAL_CLIENT_ID = os.getenv(&quot;HOOK_EXTERNAL_CLIENT_ID&quot;, &quot;EXTERNAL_CLIENT_ID&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="xWU32ulZeLNkPOxKmjqd8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ei7VPaNT9J" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">########## BUILD ORDER BODY : CHOOSE PRIVATE or TEMPORARY output_storage ##########

# Initialise the order_body
order_body_custom_bucket = {
    &quot;Name&quot;: &quot;Tutorial &quot; + workflow + &quot; - &quot; + order_name,
    &quot;WorkflowName&quot;: workflow,
    &quot;IdentifierList&quot;: identifier_list,
    &quot;WorkflowOptions&quot;: [],
}


##### Configure PRIVATE OR TEMPORARY STORAGE #####
if is_private_storage:

    print(&quot;##### Preparing Order Body for PRIVATE STORAGE #####&quot;)
    order_body_custom_bucket[&quot;WorkflowOptions&quot;].extend(
        [
            {&quot;Name&quot;: &quot;output_storage&quot;, &quot;Value&quot;: &quot;PRIVATE&quot;},
            {&quot;Name&quot;: &quot;output_s3_access_key&quot;, &quot;Value&quot;: output_storage_access_key},
            {&quot;Name&quot;: &quot;output_s3_secret_key&quot;, &quot;Value&quot;: output_storage_secret_key},
            {&quot;Name&quot;: &quot;output_s3_path&quot;, &quot;Value&quot;: f&quot;s3://{output_bucket}/{output_prefix}&quot;},
            {&quot;Name&quot;: &quot;output_s3_endpoint_url&quot;, &quot;Value&quot;: output_storage_url}
        ]
    )

else:

    print(&quot;##### Preparing Order Body for TEMPORARY STORAGE #####&quot;)
    order_body_custom_bucket[&quot;WorkflowOptions&quot;].extend(
        [
            {&quot;Name&quot;: &quot;output_storage&quot;, &quot;Value&quot;: &quot;TEMPORARY&quot;},
        ]
    )

##### Configure SOURCE_TYPE and associated parameters #####
if source_type == &quot;DESP&quot;:

    # Using DESP credentials is standard way of executing Hooks.
    print(&quot;##### Preparing Order Body for access to DEDL HDA using DESP Credentials #####&quot;)
    order_body_custom_bucket[&quot;WorkflowOptions&quot;].extend(
        [
            {&quot;Name&quot;: &quot;source_type&quot;, &quot;Value&quot;: &quot;DESP&quot;},
            {&quot;Name&quot;: &quot;desp_source_username&quot;, &quot;Value&quot;: DESP_USERNAME},
            {&quot;Name&quot;: &quot;desp_source_password&quot;, &quot;Value&quot;: DESP_PASSWORD},
            {&quot;Name&quot;: &quot;desp_source_collection&quot;, &quot;Value&quot;: collection_id}
        ]
    )

elif source_type == &quot;EXTERNAL&quot;:

    # Build your order body : Example using EXTERNAL source type and source_catalogue_api_type STAC.
    # This would allow you to access products directly from a configured STAC server
    # Here we show an example configuration of a STAC server with OIDC security, that could be adapted to your needs (change urls, etc)
    # This is shown for example purposes only. The standard way of configuring is with DESP source_type seen above.
    print(&quot;##### Preparing Order Body for access to EXTERNAL STAC Server using EXTERNAL Credentials #####&quot;)
    order_body_custom_bucket[&quot;WorkflowOptions&quot;].extend(
        [
            {&quot;Name&quot;: &quot;source_type&quot;, &quot;Value&quot;: &quot;EXTERNAL&quot;},
            {&quot;Name&quot;: &quot;source_catalogue_api_url&quot;, &quot;Value&quot;: stac_hda_api_url},
            {&quot;Name&quot;: &quot;source_catalogue_api_type&quot;, &quot;Value&quot;: &quot;STAC&quot;},
            {&quot;Name&quot;: &quot;source_token_url&quot;, &quot;Value&quot;: EXTERNAL_TOKEN_URL},
            {&quot;Name&quot;: &quot;source_grant_type&quot;, &quot;Value&quot;: &quot;PASSWORD&quot;},
            {&quot;Name&quot;: &quot;source_auth_header_name&quot;, &quot;Value&quot;: &quot;Authorization&quot;},
            {&quot;Name&quot;: &quot;source_username&quot;, &quot;Value&quot;: EXTERNAL_USERNAME},
            {&quot;Name&quot;: &quot;source_password&quot;, &quot;Value&quot;: EXTERNAL_PASSWORD},
            {&quot;Name&quot;: &quot;source_client_id&quot;, &quot;Value&quot;: EXTERNAL_CLIENT_ID},
            {&quot;Name&quot;: &quot;source_client_secret&quot;, &quot;Value&quot;: &quot;&quot;},
            {&quot;Name&quot;: &quot;source_catalogue_collection&quot;, &quot;Value&quot;: collection_id}
        ]
    )

else:

    print(&quot;source_type not equal to DESP or EXTERNAL&quot;)



########## ADDITIONAL OPTIONS ##########

additional_options = []

# Checks environment variables for the form HOOK_ADDITIONAL1=&quot;NAME=12345;VALUE=abcdef&quot;
for env_key, env_value in os.environ.items():
    if env_key.startswith(&#x27;HOOK_ADDITIONAL&#x27;):
        #print(f&quot;{env_key}: {env_value}&quot;)        
        parts = env_value.split(&#x27;;&#x27;)
        # Extract the name and value
        name = parts[0].split(&#x27;=&#x27;)[1]
        value = parts[1].split(&#x27;=&#x27;)[1]
        value_type = parts[2].split(&#x27;=&#x27;)[1]
        additional_options.append({&quot;Name&quot;: name, &quot;Value&quot;: value if value_type == &#x27;str&#x27; else int(value)})

print(f&quot;addditional_options:{additional_options}&quot;)

if additional_options:
    print(&quot;Adding additional_options&quot;)
    order_body_custom_bucket[&quot;WorkflowOptions&quot;].extend(additional_options)

########## BUILD ORDER BODY : END ##########

# Uncomment this to see the final order body
# print(json.dumps(order_body_custom_bucket, indent=4))


# Send order
order_request = requests.post(
    hook_service_root_url + &quot;BatchOrder/OData.CSC.Order&quot;,
    json.dumps(order_body_custom_bucket),
    headers=api_headers,
).json()

# If code = 201, the order has been successfully sent

# Print order_request JSON object: containing order_request details
order_reques_details = json.dumps(order_request, indent=4)
print(order_reques_details)

order_id = order_request[&#x27;value&#x27;][&#x27;Id&#x27;]
print(f&quot;order &#x27;Id&#x27; from order_request: {order_id}&quot;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="3RZ2YTttYowQ6vqMBt-bG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Oyq0C21euD" class="relative group/block"><p>It is possible to order multiple product using endpoint:
<code>https://odp.data.destination-earth.eu/odata/v1/BatchOrder/OData.CSC.Order</code></p></div><div id="VNOom1HtMC" class="relative group/block"><h2 id="check-the-status-of-the-order" class="relative group"><span class="heading-text">Check The status of the order</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#check-the-status-of-the-order" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2><p>Possible status values</p><ul><li><p>queued (i.e. queued for treatment but not started)</p></li><li><p>in_progress (i.e. order being treated)</p></li><li><p>completed (i.e. order is complete and data ready)</p></li></ul></div><div id="pjlMLEobiS" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">
# ProductionOrders endpoint gives status of orders (only with one item attached)
# Otherwise use BatchOrder(XXXX)/Products endpoint to get status of individual items associated with order
if len(identifier_list) == 1:
    order_status_url = f&quot;{hook_service_root_url}ProductionOrders&quot;
    params = {&quot;$filter&quot;: f&quot;id eq {order_id}&quot;}
    order_status_response = requests.get(order_status_url, params=params, headers=api_headers).json()
    print(json.dumps(order_status_response, indent=4))

# Get Status of all items of an order in this way
order_status_response = requests.get(
    f&quot;{hook_service_root_url}BatchOrder({order_id})/Products&quot;,
    headers=api_headers,
).json()
print(json.dumps(order_status_response, indent=4))
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="nre6yODbQZI1yIvDS8m3Z" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="nB0byFhU5Z" class="relative group/block"><h2 id="access-workflow-output" class="relative group"><span class="heading-text">Access workflow output</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#access-workflow-output" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2></div><div id="v1Fom1ku9M" class="relative group/block"><h4 id="private-storage" class="relative group"><span class="heading-text">Private storage</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#private-storage" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h4><p>Let us now check our private storage using this boto3 script.
You can also go and check this in the Islet service using the Horizon user interface</p></div><div id="wlsppmNQrp" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># PRIVATE STORAGE: Prints contents of Private Bucket
import boto3

if is_private_storage:

    s3 = boto3.client(
        &quot;s3&quot;,
        aws_access_key_id=output_storage_access_key,
        aws_secret_access_key=output_storage_secret_key,
        endpoint_url=output_storage_url,
    )

    paginator = s3.get_paginator(&quot;list_objects_v2&quot;)
    pages = paginator.paginate(Bucket=output_bucket, Prefix=output_prefix + &quot;/&quot;)

    for page in pages:
        try:
            for obj in page[&quot;Contents&quot;]:
                print(obj[&quot;Key&quot;])
        except KeyError:
            print(&quot;No files exist&quot;)
            exit(1)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="kR9O8GjEVeV_phhFh7WVl" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NbzfTvzfJf" class="relative group/block"><h3 id="temporary-storage" class="relative group"><span class="heading-text">Temporary storage</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#temporary-storage" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3></div><div id="VAatbdoXj4" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># List order items within a production order
# When the output_storage is of type TEMPORARY we can get a DownloadLink from the following code (Can also optionally download items here in code with the flag is_download_products)

# If TEMPORARY storage
if not is_private_storage:

    # Set to True to download products at the same level as the notebook file. File name will be in format &quot;output-{workflow}-{order_id}-{product_id}.zip&quot;
    is_download_products = False

    # Get Status of all items of an order in this way
    product_status_response = requests.get(
        f&quot;{hook_service_root_url}BatchOrder({order_id})/Products&quot;,
        headers=api_headers,
    ).json()
    print(json.dumps(product_status_response, indent=4))

    if is_download_products:

        is_all_products_completed = True
        # We only attempt to download products when each of the items is in complete status.
        for i in range(len(product_status_response[&quot;value&quot;])):

            product_id = product_status_response[&quot;value&quot;][i][&quot;Id&quot;]
            product_status = product_status_response[&quot;value&quot;][i][&quot;Status&quot;]

            if product_status != &quot;completed&quot;:
                is_all_products_completed = False

        # Can download if all products completed
        if is_all_products_completed:

            for i in range(len(product_status_response[&quot;value&quot;])):

                product_id = product_status_response[&quot;value&quot;][i][&quot;Id&quot;]
                product_status = product_status_response[&quot;value&quot;][i][&quot;Status&quot;]

                # Infer the url of the product
                url_product = f&quot;{hook_service_root_url}BatchOrder({order_id})/Product({product_id})/$value&quot;
                print(f&quot;url_product: {url_product}&quot;)
                # Download the product
                r = requests.get(
                    url_product, headers=api_headers, allow_redirects=True
                )
                product_file_name = f&quot;output-{workflow}-{order_id}-{product_id}.zip&quot;
                open(product_file_name, &quot;wb&quot;).write(r.content)
                print(f&quot;Download Complete: product_file_name: {product_file_name}&quot;)

        else:
            print(f&quot;Status for order:{order_id} - At least one of the products does not have the status of &#x27;completed&#x27;.&quot;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="F8AP27qktWu8u9dtfZcIu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div></div></main></article><footer class="article footer article-grid bg-white dark:bg-slate-950 mt-10 shadow-2xl shadow py-10"><div class="" style="display:flex;align-items:center"><img id="ZpV8x7Na4U" style="margin:0 auto" src="/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png" alt="DEDL Logo" data-canonical-url="img/logo_bar.png" class=""/></div><div class="" style="text-align:center"><span class="" style="color:#E6E9F0">2025</span> <span class="" style="color:#DFEDFF">¬© All Rights Reserved.</span></div><div class="" style="display:flex;gap:0.75rem;flex-wrap:wrap;justify-content:center"><a target="_blank" rel="noreferrer" href="https://destination-earth.eu/destination-earth/" class="">About us</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/news/" class="">News</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/event/" class="">Events</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/privacy-policy/" class="">Privacy policy</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/terms-of-use/" class="">Terms of use</a></div></footer><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-JSE36H2O.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-C7FW3E47.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-ND43KHSX.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-IB5726YR.js"/><link rel="modulepreload" href="/build/_shared/chunk-NBON2RSI.js"/><link rel="modulepreload" href="/build/routes/$-LXLHKVOR.js"/><script>window.__remixContext = {"url":"/tutorial","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.7","options":{"hide_footer_links":true,"hide_outline":true,"favicon":"/build/EUMETSAT-icon-96ce7e9141ec65f30d9ac6e866ea5ac0.ico","logo":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","style":"/build/custom-e7e6e9609bbc2b97516ccfc28ac7d9d2.css"},"parts":{"footer":{"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"display":"flex","alignItems":"center"},"children":[{"type":"image","style":{"height":"24px","marginRight":"12px"},"url":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","alt":"DEDL Logo","key":"ZpV8x7Na4U","urlSource":"img/logo_bar.png"}],"key":"ReAG2Mt86S"},{"type":"div","style":{"textAlign":"center"},"children":[{"type":"span","style":{"color":"#E6E9F0"},"children":[{"type":"text","value":"2025","key":"B9OcXbuPTX"}],"key":"uvryVE3Hqk"},{"type":"text","value":" ","key":"mTumJzDfHN"},{"type":"span","style":{"color":"#DFEDFF"},"children":[{"type":"text","value":"¬© All Rights Reserved.","key":"cbpDyvRCXp"}],"key":"Uzwa9wMZir"}],"key":"MJ83H8t3ei"},{"type":"div","style":{"display":"flex","gap":"0.75rem","flexWrap":"wrap","justifyContent":"center"},"children":[{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/destination-earth/","children":[{"type":"text","value":"About us","key":"UWv85ff8hL"}],"urlSource":"https://destination-earth.eu/destination-earth/","key":"yK9Tb6ut4j"},{"type":"text","value":" | ","key":"Dd1AkbFmGl"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/news/","children":[{"type":"text","value":"News","key":"h05whl6y7k"}],"urlSource":"https://destination-earth.eu/news/","key":"Tv9kGQxP4r"},{"type":"text","value":" | ","key":"in1sTMyR3M"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/event/","children":[{"type":"text","value":"Events","key":"tYYhS1FflL"}],"urlSource":"https://destination-earth.eu/event/","key":"XHMRNC2HL1"},{"type":"text","value":" | ","key":"d1VD3if8IE"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/privacy-policy/","children":[{"type":"text","value":"Privacy policy","key":"MP4pZtkDJG"}],"urlSource":"https://destination-earth.eu/privacy-policy/","key":"xBHTYDbdsN"},{"type":"text","value":" | ","key":"ctk0KBSeYC"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/terms-of-use/","children":[{"type":"text","value":"Terms of use","key":"Z8VcMtKozy"}],"urlSource":"https://destination-earth.eu/terms-of-use/","key":"fxMClTrj2G"}],"key":"KBGzhrtnOW"}],"key":"iPqLRI0YyR"}],"key":"a87gZYPCAn"},"frontmatter":{"parts":{},"thumbnail":"/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png"}}},"nav":[],"actions":[],"projects":[{"title":"DEDL Notebook Gallery","toc":[{"file":"index.md"},{"file":"contribute.md","title":"contribute"},{"children":[{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.METOP.AVHRRL1.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MSG-1.5.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MTG.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.SENTINEL-3.OL_1_ERR___.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ExtractLocationValues.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-dataAvailability.ipynb","hidden":true},{"file":"production/HDA/CDS_data/DEDL-HDA-EO.ECMWF.DAT.REANALYSIS_ERA5_SINGLE_LEVELS.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-1.L1_GRD.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-2.MSI.L2A.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-Queryables.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-full-version.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-quick-start.ipynb","hidden":true},{"file":"production/HDA/PySTAC/HDA-PyStac-Client.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-full-version.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-quick-start.ipynb","hidden":true}],"file":"galleries/HDA.md","title":"HDA"},{"children":[{"file":"production/HOOK/DEDL-Hook_access.ipynb","hidden":true},{"file":"production/HOOK/DEDL-Hook_data_harvest.ipynb","hidden":true},{"file":"production/HOOK/Tutorial.ipynb","hidden":true}],"file":"galleries/HOOK.md","title":"HOOK"},{"children":[{"file":"production/STACK/DEDL_StackService_Dask.ipynb","hidden":true},{"file":"production/STACK/STACK-Dask-101.ipynb","hidden":true},{"file":"production/STACK/STACK-Python-Client-Dask.ipynb","hidden":true}],"file":"galleries/STACK.md","title":"STACK"},{"file":"galleries_by_tag/tag-access-token.md","hidden":true},{"file":"galleries_by_tag/tag-authentication.md","hidden":true},{"file":"galleries_by_tag/tag-avhrr.md","hidden":true},{"file":"galleries_by_tag/tag-c3s.md","hidden":true},{"file":"galleries_by_tag/tag-cluster.md","hidden":true},{"file":"galleries_by_tag/tag-core-api.md","hidden":true},{"file":"galleries_by_tag/tag-dask.md","hidden":true},{"file":"galleries_by_tag/tag-digital-twin.md","hidden":true},{"file":"galleries_by_tag/tag-earthkit.md","hidden":true},{"file":"galleries_by_tag/tag-ecmwf.md","hidden":true},{"file":"galleries_by_tag/tag-eodag.md","hidden":true},{"file":"galleries_by_tag/tag-gfm.md","hidden":true},{"file":"galleries_by_tag/tag-hda.md","hidden":true},{"file":"galleries_by_tag/tag-hook.md","hidden":true},{"file":"galleries_by_tag/tag-http-requests.md","hidden":true},{"file":"galleries_by_tag/tag-metop.md","hidden":true},{"file":"galleries_by_tag/tag-olci.md","hidden":true},{"file":"galleries_by_tag/tag-pyaviso.md","hidden":true},{"file":"galleries_by_tag/tag-satpy.md","hidden":true},{"file":"galleries_by_tag/tag-sentinel-3.md","hidden":true},{"file":"galleries_by_tag/tag-seviri.md","hidden":true},{"file":"galleries_by_tag/tag-stac.md","hidden":true},{"file":"galleries_by_tag/tag-stack.md","hidden":true},{"file":"galleries_by_tag/tag-storage.md","hidden":true},{"file":"galleries_by_tag/tag-token.md","hidden":true},{"file":"galleries_by_tag/tag-workflow.md","hidden":true}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"contribute","title":"Contribute to the Gallery","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hda","title":"HDA Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hook","title":"HOOK Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stack","title":"STACK Gallery","description":"","date":"","thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":2,"myst":"1.6.7","options":{"hide_footer_links":true,"hide_outline":true,"favicon":"/build/EUMETSAT-icon-96ce7e9141ec65f30d9ac6e866ea5ac0.ico","logo":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","style":"/build/custom-e7e6e9609bbc2b97516ccfc28ac7d9d2.css"},"parts":{"footer":{"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"display":"flex","alignItems":"center"},"children":[{"type":"image","style":{"height":"24px","marginRight":"12px"},"url":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","alt":"DEDL Logo","key":"ZpV8x7Na4U","urlSource":"img/logo_bar.png"}],"key":"ReAG2Mt86S"},{"type":"div","style":{"textAlign":"center"},"children":[{"type":"span","style":{"color":"#E6E9F0"},"children":[{"type":"text","value":"2025","key":"B9OcXbuPTX"}],"key":"uvryVE3Hqk"},{"type":"text","value":" ","key":"mTumJzDfHN"},{"type":"span","style":{"color":"#DFEDFF"},"children":[{"type":"text","value":"¬© All Rights Reserved.","key":"cbpDyvRCXp"}],"key":"Uzwa9wMZir"}],"key":"MJ83H8t3ei"},{"type":"div","style":{"display":"flex","gap":"0.75rem","flexWrap":"wrap","justifyContent":"center"},"children":[{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/destination-earth/","children":[{"type":"text","value":"About us","key":"UWv85ff8hL"}],"urlSource":"https://destination-earth.eu/destination-earth/","key":"yK9Tb6ut4j"},{"type":"text","value":" | ","key":"Dd1AkbFmGl"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/news/","children":[{"type":"text","value":"News","key":"h05whl6y7k"}],"urlSource":"https://destination-earth.eu/news/","key":"Tv9kGQxP4r"},{"type":"text","value":" | ","key":"in1sTMyR3M"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/event/","children":[{"type":"text","value":"Events","key":"tYYhS1FflL"}],"urlSource":"https://destination-earth.eu/event/","key":"XHMRNC2HL1"},{"type":"text","value":" | ","key":"d1VD3if8IE"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/privacy-policy/","children":[{"type":"text","value":"Privacy policy","key":"MP4pZtkDJG"}],"urlSource":"https://destination-earth.eu/privacy-policy/","key":"xBHTYDbdsN"},{"type":"text","value":" | ","key":"ctk0KBSeYC"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/terms-of-use/","children":[{"type":"text","value":"Terms of use","key":"Z8VcMtKozy"}],"urlSource":"https://destination-earth.eu/terms-of-use/","key":"fxMClTrj2G"}],"key":"KBGzhrtnOW"}],"key":"iPqLRI0YyR"}],"key":"a87gZYPCAn"},"frontmatter":{"parts":{},"thumbnail":"/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png"}}},"nav":[],"actions":[],"projects":[{"title":"DEDL Notebook Gallery","toc":[{"file":"index.md"},{"file":"contribute.md","title":"contribute"},{"children":[{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.METOP.AVHRRL1.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MSG-1.5.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MTG.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.SENTINEL-3.OL_1_ERR___.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ExtractLocationValues.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-dataAvailability.ipynb","hidden":true},{"file":"production/HDA/CDS_data/DEDL-HDA-EO.ECMWF.DAT.REANALYSIS_ERA5_SINGLE_LEVELS.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-1.L1_GRD.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-2.MSI.L2A.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-Queryables.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-full-version.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-quick-start.ipynb","hidden":true},{"file":"production/HDA/PySTAC/HDA-PyStac-Client.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-full-version.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-quick-start.ipynb","hidden":true}],"file":"galleries/HDA.md","title":"HDA"},{"children":[{"file":"production/HOOK/DEDL-Hook_access.ipynb","hidden":true},{"file":"production/HOOK/DEDL-Hook_data_harvest.ipynb","hidden":true},{"file":"production/HOOK/Tutorial.ipynb","hidden":true}],"file":"galleries/HOOK.md","title":"HOOK"},{"children":[{"file":"production/STACK/DEDL_StackService_Dask.ipynb","hidden":true},{"file":"production/STACK/STACK-Dask-101.ipynb","hidden":true},{"file":"production/STACK/STACK-Python-Client-Dask.ipynb","hidden":true}],"file":"galleries/STACK.md","title":"STACK"},{"file":"galleries_by_tag/tag-access-token.md","hidden":true},{"file":"galleries_by_tag/tag-authentication.md","hidden":true},{"file":"galleries_by_tag/tag-avhrr.md","hidden":true},{"file":"galleries_by_tag/tag-c3s.md","hidden":true},{"file":"galleries_by_tag/tag-cluster.md","hidden":true},{"file":"galleries_by_tag/tag-core-api.md","hidden":true},{"file":"galleries_by_tag/tag-dask.md","hidden":true},{"file":"galleries_by_tag/tag-digital-twin.md","hidden":true},{"file":"galleries_by_tag/tag-earthkit.md","hidden":true},{"file":"galleries_by_tag/tag-ecmwf.md","hidden":true},{"file":"galleries_by_tag/tag-eodag.md","hidden":true},{"file":"galleries_by_tag/tag-gfm.md","hidden":true},{"file":"galleries_by_tag/tag-hda.md","hidden":true},{"file":"galleries_by_tag/tag-hook.md","hidden":true},{"file":"galleries_by_tag/tag-http-requests.md","hidden":true},{"file":"galleries_by_tag/tag-metop.md","hidden":true},{"file":"galleries_by_tag/tag-olci.md","hidden":true},{"file":"galleries_by_tag/tag-pyaviso.md","hidden":true},{"file":"galleries_by_tag/tag-satpy.md","hidden":true},{"file":"galleries_by_tag/tag-sentinel-3.md","hidden":true},{"file":"galleries_by_tag/tag-seviri.md","hidden":true},{"file":"galleries_by_tag/tag-stac.md","hidden":true},{"file":"galleries_by_tag/tag-stack.md","hidden":true},{"file":"galleries_by_tag/tag-storage.md","hidden":true},{"file":"galleries_by_tag/tag-token.md","hidden":true},{"file":"galleries_by_tag/tag-workflow.md","hidden":true}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"contribute","title":"Contribute to the Gallery","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hda","title":"HDA Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hook","title":"HOOK Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stack","title":"STACK Gallery","description":"","date":"","thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"page":{"version":2,"kind":"Notebook","sha256":"618dd392dbe7ab181c7e5c9aca9b5d4fee40cd824f46c229cfb3d44c3d2e828b","slug":"tutorial","location":"/production/HOOK/Tutorial.ipynb","dependencies":[],"frontmatter":{"title":"Hook Tutorial - Data Harvest","subtitle":"This notebook demonstrates how to use the Hook service.","tags":["Hook","Authentication","Workflow","Storage"],"copyright":"¬© 2024 EUMETSAT","authors":[{"id":"Author: Eumetsat","name":"Author: Eumetsat"}],"license":{"content":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","kernelspec":{"name":"python3","display_name":".venv","language":"python"},"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"Tutorial.ipynb","url":"/build/Tutorial-d413e5870d7199657bb43521dd265501.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"margin":"6px 0"},"children":[{"type":"link","style":{"textDecoration":"none"},"url":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/HOOK/Tutorial.ipynb","children":[{"type":"span","class":"launch","children":[{"type":"text","value":"üöÄ Launch in JupyterHub","key":"QKufiBqIbm"}],"key":"RXPO0DhFWP"}],"urlSource":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/HOOK/Tutorial.ipynb","key":"YcCEuTyFZt"}],"key":"yRETuDsQXR"}],"key":"okjdwwD2K5"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The detailed API and definition of each endpoint and parameters is available in the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uH9BBcHouC"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OnDemand Processing API OData v1","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lknrbTDlTm"}],"key":"UuAnExFfwq"},{"type":"text","value":"  OpenAPI documentation found at:\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LRpzNHi6K5"},{"type":"link","url":"https://odp.data.destination-earth.eu/odata/docs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://‚Äãodp‚Äã.data‚Äã.destination‚Äã-earth‚Äã.eu‚Äã/odata‚Äã/docs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nuf33Fyzxj"}],"urlSource":"https://odp.data.destination-earth.eu/odata/docs","key":"hYCsSZFn9H"}],"key":"bMPlkOuszW"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Further documentation is available at:\n","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"r4so0XqAez"},{"type":"link","url":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-big-data-processing-services/Hook-service/Hook-service.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"https://‚Äãdestine‚Äã-data‚Äã-lake‚Äã-docs‚Äã.data‚Äã.destination‚Äã-earth‚Äã.eu‚Äã/en‚Äã/latest‚Äã/dedl‚Äã-big‚Äã-data‚Äã-processing‚Äã-services‚Äã/Hook‚Äã-service‚Äã/Hook‚Äã-service‚Äã.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QwzlvI2yjl"}],"urlSource":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-big-data-processing-services/Hook-service/Hook-service.html","key":"wnOgocF8nA"}],"key":"eUUbnc05Fy"}],"visibility":"show","key":"XMUvb57TRZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Install python package requirements and import environment variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AkLohiQ3vr"}],"identifier":"install-python-package-requirements-and-import-environment-variables","label":"Install python package requirements and import environment variables","html_id":"install-python-package-requirements-and-import-environment-variables","implicit":true,"key":"L4dzCcJAxa"}],"key":"YBT8PolU2S"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Note: The destinelab python package (which helps with authentication) is available already if you are using Python DEDL kernel\n# Otherwise, the destinelab python package can be installed by uncommenting the following line\n\n# For the importing of environment variables using the load_dotenv(...) command \n%pip install python-dotenv\n# for example code navigating private S3 compatible storage (PRIVATE bucket storage)\n%pip install boto3\n","visibility":"show","key":"ua9sCWN9RL"},{"type":"output","id":"ogtb2Tn50FglbSM_ZgdQ5","data":[],"visibility":"show","key":"O61sML3fXr"}],"visibility":"show","key":"yDxlXZ8Xck"},{"type":"block","kind":"notebook-code","data":{"id":"oyJN4WaVsz2S","tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport json\nimport requests\nfrom dotenv import load_dotenv\nfrom getpass import getpass\nimport destinelab as destinelab\n\n# Load (optional) notebook specific environment variables from .env_tutorial\nload_dotenv(\"./.env_tutorial\", override=True)","identifier":"oyjn4wavsz2s-code","visibility":"show","html_id":"oyjn4wavsz2s-code","key":"H2GET13eIi"},{"type":"output","id":"PBPwt5LCCrCwtG-NLXy3v","data":[],"identifier":"oyjn4wavsz2s-output","visibility":"show","html_id":"oyjn4wavsz2s-output","key":"XLlWHI9RHo"}],"identifier":"oyjn4wavsz2s","label":"oyJN4WaVsz2S","html_id":"oyjn4wavsz2s","visibility":"show","key":"PkY7i0rIAd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Authentification - Get token","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mEiaZCvv7A"}],"identifier":"authentification-get-token","label":"Authentification - Get token","html_id":"authentification-get-token","implicit":true,"key":"RcEsNHJ35s"}],"key":"sGD7VArZG4"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# By default users should use their DESP credentials to get an Access_token\n# This token is added as an Authorisation Header when interacting with the Hook Service API\n\n# Enter DESP credentials.\nDESP_USERNAME = input(\"Please input your DESP username or email: \")\nDESP_PASSWORD = getpass(\"Please input your DESP password: \")\ntoken = destinelab.AuthHandler(DESP_USERNAME, DESP_PASSWORD)\n\naccess_token = token.get_token()\n\n# Check the status of the request\nif access_token is not None:\n    print(\"DEDL/DESP Access Token Obtained Successfully\")\n    # Save API headers\n    api_headers = {\"Authorization\": \"Bearer \" + access_token}\nelse:\n    print(\"Failed to Obtain DEDL/DESP Access Token\")","visibility":"show","key":"q8yDvDVmRz"},{"type":"output","id":"nIYrELcrlaDEN6ql-dCvv","data":[],"visibility":"show","key":"z7VlmknUx4"}],"visibility":"show","key":"vKSy0rgSCm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup static variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PDUqmDF6Dk"}],"identifier":"setup-static-variables","label":"Setup static variables","html_id":"setup-static-variables","implicit":true,"key":"WdXMrPvh68"}],"key":"J4n9IdG6bp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Hook service url (ending with odata/v1/ - e.g. https://odp.data.destination-earth.eu/odata/v1/)\nhook_service_root_url = \"https://odp.data.destination-earth.eu/odata/v1/\"","visibility":"show","key":"xIALaxZt5q"},{"type":"output","id":"KnCJlaOGlQ1sYxRwSvMVw","data":[],"visibility":"show","key":"RkAqAXOCKF"}],"visibility":"show","key":"FyCX6Zu3BC"},{"type":"block","kind":"notebook-content","data":{"id":"OlvgrvV3sz2Y"},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"List available workflows","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vfoeDfPyTL"}],"identifier":"list-available-workflows","label":"List available workflows","html_id":"list-available-workflows","implicit":true,"key":"DZYROM75Mt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Next we can check what possible workflows are available to us by using method","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oZqp909nLy"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oaaDMWhoMk"},{"type":"inlineCode","value":"https://odp.data.destination-earth.eu/odata/v1/Workflows","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nHO0sMet8V"}],"key":"iWLASfvPUy"}],"identifier":"olvgrvv3sz2y","label":"OlvgrvV3sz2Y","html_id":"olvgrvv3sz2y","key":"ZxIdEkKJly"},{"type":"block","kind":"notebook-code","data":{"id":"gSxYUs_0sz2Z","tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Send request and return json object listing all provided workfows, ordered by Id\nresult = requests.get(\n    f\"{hook_service_root_url}Workflows?$orderby=Id asc\", headers=api_headers   \n).json()\n\nprint(\"List of available DEDL provided Hooks\")\nfor i in range(len(result[\"value\"])):\n    print(\n        f\"Name:{str(result['value'][i]['Name']).ljust(20, ' ')}DisplayName:{str(result['value'][i]['DisplayName'])}\"\n    )  # print JSON string","identifier":"gsxyus_0sz2z-code","visibility":"show","html_id":"gsxyus-0sz2z-code","key":"jINU15598p"},{"type":"output","id":"0vS6lufM-uAakvrcWRPF_","data":[],"identifier":"gsxyus_0sz2z-output","visibility":"show","html_id":"gsxyus-0sz2z-output","key":"dNqB3qOQ7K"}],"identifier":"gsxyus_0sz2z","label":"gSxYUs_0sz2Z","html_id":"gsxyus-0sz2z","visibility":"show","key":"Kwlz4RIiqi"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Print result JSON object: containing provided workflow list\nworkflow_details = json.dumps(result, indent=4)\nprint(workflow_details)","visibility":"show","key":"ZLz5UMjsSY"},{"type":"output","id":"yEB1CXIfSJpS3KQ4Erqgv","data":[],"visibility":"show","key":"jFiRT4Amgf"}],"visibility":"show","key":"MxB23Hh2cR"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select a workflow and see parameters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SQDIn8Eztb"}],"identifier":"select-a-workflow-and-see-parameters","label":"Select a workflow and see parameters","html_id":"select-a-workflow-and-see-parameters","implicit":true,"key":"sajS1Oexy2"}],"visibility":"show","key":"RvXhAbdDGC"},{"type":"block","kind":"notebook-content","data":{"id":"jNSqMuRCsz2Z"},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If we want to see the details of a specific workflow, showing us the parameters that can be set for that workflow, we can add a filter to the query as follows:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RsduFFs6oz"}],"key":"E26F4YEJeR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"https://odp.data.destination-earth.eu/odata/v1/Workflows?$expand=WorkflowOptions\u0026$filter=(Name eq data-harvest)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iZakOl3rC9"}],"key":"j8JY5rwFhI"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"\\","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cbGwIk03Mf"},{"type":"inlineMath","value":"expand=WorkflowOptions** shows all parameters accepted by workflow   \n**\\\\","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eW\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmo\u003e‚àó\u003c/mo\u003e\u003cmo\u003e‚àó\u003c/mo\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003eh\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmi\u003eb\u003c/mi\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmo\u003e‚àó\u003c/mo\u003e\u003cmo\u003e‚àó\u003c/mo\u003e\u003cmspace linebreak=\"newline\"\u003e\u003c/mspace\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eexpand=WorkflowOptions** shows all parameters accepted by workflow   \n**\\\\\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ep\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ean\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eW\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eor\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ewOpt\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003en\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003es\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e‚àó\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e‚àó\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003es\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eh\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003es\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ellp\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eam\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eers\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ecce\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ept\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eb\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eor\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e‚àó\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.4653em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e‚àó\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace newline\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"ewxpwoFgVa"},{"type":"text","value":"filter=(Name eq data-harvest)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"x3OGq5wi2P"}],"key":"J6h1qH2pzp"},{"type":"text","value":" narrows the result to workflow called ‚Äúdata-harvest‚Äù","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Z5nCpxl380"}],"key":"J3TJglvxmw"}],"identifier":"jnsqmurcsz2z","label":"jNSqMuRCsz2Z","html_id":"jnsqmurcsz2z","key":"gpGtcDGwkc"},{"type":"block","kind":"notebook-code","data":{"id":"UEvKzPclsz2b","tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select workflow : defaults to data-harvest\nworkflow = os.getenv(\"HOOK_WORKFLOW\", \"data-harvest\")\nprint(f\"workflow: {workflow}\")\n\n# Send request\nresult = requests.get(\n    f\"{hook_service_root_url}Workflows?$expand=WorkflowOptions\u0026$filter=(Name eq '{workflow}')\",\n    headers=api_headers,\n).json()\nworkflow_details = json.dumps(result, indent=4)\nprint(workflow_details)  # print formatted workflow_details, a JSON string","identifier":"uevkzpclsz2b-code","visibility":"show","html_id":"uevkzpclsz2b-code","key":"JoZ8OMM2vx"},{"type":"output","id":"cU51G5aMst_5OChb69upW","data":[],"identifier":"uevkzpclsz2b-output","visibility":"show","html_id":"uevkzpclsz2b-output","key":"IwwdItpaLU"}],"identifier":"uevkzpclsz2b","label":"UEvKzPclsz2b","html_id":"uevkzpclsz2b","visibility":"show","key":"vykV9bdG5d"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Order selected workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OnvBa3IrPx"}],"identifier":"order-selected-workflow","label":"Order selected workflow","html_id":"order-selected-workflow","implicit":true,"key":"CtmgCjkuoc"}],"key":"pZQPtav5yn"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The order selected above will now be configured and executed.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MjXfPvznNL"}],"key":"DdVqfxI2uB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"e.g. workflow = ‚Äúdata-harvest‚Äù.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZYopwWciMh"}],"key":"NxEBhgmCAk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Make an order to ‚Äòharvest data‚Äô using Harmonised Data Access API.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rG4HaO7naX"}],"key":"rYCLSw21at"}],"key":"QPKKomIpcA"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"i.e. data from an input source can be transferred to a Private bucket or a Temporary storage bucket.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"nLl6XxS0X7"}],"key":"kq0LxBMqxV"}],"key":"qQRzTiqFlO"}],"key":"nGRATji9hL"}],"key":"xXqVzfnvI9"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Name your order","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sf7qGOukZS"}],"identifier":"name-your-order","label":"Name your order","html_id":"name-your-order","implicit":true,"key":"V3oLuPMFFe"}],"visibility":"show","key":"yZMujrTJBe"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Here we set the variable order_name, this will allow us to:\n# Easily identify the running process (e.g. when checking the status)\n# order_name is added as a suffix to the order 'Name'\norder_name = os.getenv(\"HOOK_ORDER_NAME\") or input(\"Name your order: \")\nprint(f\"order_name:{order_name}\")","visibility":"show","key":"m8vJ8RPyld"},{"type":"output","id":"SBDQX4hUwb3JSfmW-Pu4t","data":[],"visibility":"show","key":"J5mJeJok0Q"}],"visibility":"show","key":"tPhuGL1dXz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define output storage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gs5RummnaO"}],"identifier":"define-output-storage","label":"Define output storage","html_id":"define-output-storage","implicit":true,"key":"OT6DwMuj6S"}],"key":"KdfqkLjx1W"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In workflow parameters, among others values, storage to retreive the result has to be provided.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sRkZEX2lhQ"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zDYvwsjOdw"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Two possibilites:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ApTHz5pwa8"}],"key":"nXtm6Kbz98"}],"key":"JSeYNzMmkT"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use your user storage","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VcyaORL8V3"}],"key":"Jji7xgqA7X"}],"key":"e9H7SrZGQu"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a temporary storage","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DRiFzqr4Nb"}],"key":"XUaYcYOzlq"}],"key":"opNUpr6blt"}],"key":"rET2ullE3i"}],"key":"bFMsMfa9uM"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. - Your user storage (provided by DEDL ISLET service)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MS7cppANVJ"}],"identifier":"id-1-your-user-storage-provided-by-dedl-islet-service","label":"1. - Your user storage (provided by DEDL ISLET service)","html_id":"id-1-your-user-storage-provided-by-dedl-islet-service","implicit":true,"key":"FKycivA2e6"}],"visibility":"show","key":"mM6VO7adaG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Example using a S3 bucket created with ISLET Storage service  - result will be available in this bucket","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KFrfV85Yb6"}],"key":"VLI3gP9mAy"},{"type":"blockquote","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"workflow parameter: {‚ÄúName‚Äù: ‚Äúoutput_storage‚Äù, ‚ÄúValue‚Äù: ‚ÄúPRIVATE‚Äù}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"X7Gh49ty24"}],"key":"BUY6ZPw3rL"}],"key":"lNTAlLiICz"}],"key":"Z1eShFljpc"}],"key":"MBkFCTU7Bz"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Output storage - Islet service\n\n# Note: If you want the output to go to your own PRIVATE bucket rather than TEMPORARY storage (expires after 2 weeks),\n#       i) This Configuration will need to be updated with your output_bucket, output_storage_access_key, output_secret_key, output_prefix\n#       ii) You will need to change the output_storage in the order to PRIVATE and add the necessary source_ parameters (see workflow options and commented example)\n\n# URL of the S3 endpoint in the Central Site (or lumi etc.)\noutput_storage_url = \"https://s3.central.data.destination-earth.eu\"\n# output_storage_url = \"https://s3.lumi.data.destination-earth.eu\"\n\n# Name of the object storage bucket where the results will be stored.\noutput_bucket = os.getenv(\"HOOK_OUTPUT_BUCKET\", \"your-bucket-name\")\nprint(f\"output_bucket            : {output_bucket}\")\n\n# Islet object storage credentials (openstack ec2 credentials)\noutput_storage_access_key = os.getenv(\"HOOK_OUTPUT_STORAGE_ACCESS_KEY\", \"your-access-key\")\noutput_storage_secret_key = os.getenv(\"HOOK_OUTPUT_STORAGE_SECRET_KEY\", \"your-secret-key\")\nprint(f\"output_storage_access_key: {output_storage_access_key}\")\nprint(f\"output_storage_secret_key: {output_storage_secret_key}\")\n\n\n# This is the name of the folder in your output_bucket where the output of the hook will be stored.\n# Here we concatenate 'dedl' with the 'workflow' and 'order_name'\noutput_prefix = f\"dedl-{workflow}-{order_name}\"\nprint(f\"output_prefix            : {output_prefix}\")","visibility":"show","key":"dkNxR1tJxs"},{"type":"output","id":"ZZA627X3Na-irT0hpJuyj","data":[],"visibility":"show","key":"wxPc73y4r3"}],"visibility":"show","key":"TTuiFOboB8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2 - Use temporary storage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HboSH9KpWV"}],"identifier":"id-2-use-temporary-storage","label":"2 - Use temporary storage","html_id":"id-2-use-temporary-storage","implicit":true,"key":"AFrWDJEu94"}],"key":"z3aQ5kaER9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The result of processing will be stored in shared storage and download link provided in the output product details","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AlWAAuE11p"}],"key":"XOFgmKoDhp"},{"type":"blockquote","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"workflow parameter: {‚ÄúName‚Äù: ‚Äúoutput_storage‚Äù, ‚ÄúValue‚Äù: ‚ÄúTEMPORARY‚Äù}","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mUQExwHIx8"}],"key":"fmGhMI9Cn8"}],"key":"eVwURtSlzR"}],"key":"JiIilx4X3B"}],"key":"FuRdvWWQIL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define parameters and send order","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hWOHqRlJBq"}],"identifier":"define-parameters-and-send-order","label":"Define parameters and send order","html_id":"define-parameters-and-send-order","implicit":true,"key":"gkcgwnJye0"}],"key":"x7R1l9L7qq"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# URL of the STAC server where your collection/item can be downloaded\nstac_hda_api_url = \"https://hda.data.destination-earth.eu/stac\"\n\n# Note: The data (collection_id and data_id) will have been previously discovered and searched for\n\n# Set collection where the item can be found : defaults to example for data-harvest\ncollection_id = os.getenv(\"HOOK_COLLECTION_ID\", \"EO.ESA.DAT.SENTINEL-2.MSI.L1C\")\nprint(f\"STAC collection url: {stac_hda_api_url}/collections/{collection_id}\")\n\n# Set the Item to Retrieve : defaults to example for data-harvest. If Multiple Values, provide comma separated list\ndata_id = os.getenv(\"HOOK_DATA_ID\", \"S2A_MSIL1C_20230910T050701_N0509_R019_T47VLH_20230910T074321.SAFE\")\nprint(f\"data_id: {data_id}\")\nidentifier_list = [data_id_element.strip() for data_id_element in data_id.split(',')]\n\n# Get boolean value from String, default (False)\nis_private_storage = os.getenv(\"HOOK_IS_PRIVATE_STORAGE\", \"False\") == \"True\"\nprint(f\"is_private_storage: {is_private_storage}\")\n\n# we use source_type to add DESP or EXTERNAL specific configuration\nsource_type = os.getenv(\"HOOK_SOURCE_TYPE\", \"DESP\")\nprint(f\"source_type: {source_type}\")\n\nif source_type == \"EXTERNAL\":\n    EXTERNAL_USERNAME = os.getenv(\"HOOK_EXTERNAL_USERNAME\", \"EXTERNAL_USERNAME\")\n    EXTERNAL_PASSWORD = os.getenv(\"HOOK_EXTERNAL_PASSWORD\", \"EXTERNAL_PASSWORD\")\n    EXTERNAL_TOKEN_URL = os.getenv(\"HOOK_EXTERNAL_TOKEN_URL\", \"EXTERNAL_TOKEN_URL\")\n    EXTERNAL_CLIENT_ID = os.getenv(\"HOOK_EXTERNAL_CLIENT_ID\", \"EXTERNAL_CLIENT_ID\")","visibility":"show","key":"gkd6COGZD7"},{"type":"output","id":"xWU32ulZeLNkPOxKmjqd8","data":[],"visibility":"show","key":"n3d8dRBtiU"}],"visibility":"show","key":"AAG2wngXS7"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"########## BUILD ORDER BODY : CHOOSE PRIVATE or TEMPORARY output_storage ##########\n\n# Initialise the order_body\norder_body_custom_bucket = {\n    \"Name\": \"Tutorial \" + workflow + \" - \" + order_name,\n    \"WorkflowName\": workflow,\n    \"IdentifierList\": identifier_list,\n    \"WorkflowOptions\": [],\n}\n\n\n##### Configure PRIVATE OR TEMPORARY STORAGE #####\nif is_private_storage:\n\n    print(\"##### Preparing Order Body for PRIVATE STORAGE #####\")\n    order_body_custom_bucket[\"WorkflowOptions\"].extend(\n        [\n            {\"Name\": \"output_storage\", \"Value\": \"PRIVATE\"},\n            {\"Name\": \"output_s3_access_key\", \"Value\": output_storage_access_key},\n            {\"Name\": \"output_s3_secret_key\", \"Value\": output_storage_secret_key},\n            {\"Name\": \"output_s3_path\", \"Value\": f\"s3://{output_bucket}/{output_prefix}\"},\n            {\"Name\": \"output_s3_endpoint_url\", \"Value\": output_storage_url}\n        ]\n    )\n\nelse:\n\n    print(\"##### Preparing Order Body for TEMPORARY STORAGE #####\")\n    order_body_custom_bucket[\"WorkflowOptions\"].extend(\n        [\n            {\"Name\": \"output_storage\", \"Value\": \"TEMPORARY\"},\n        ]\n    )\n\n##### Configure SOURCE_TYPE and associated parameters #####\nif source_type == \"DESP\":\n\n    # Using DESP credentials is standard way of executing Hooks.\n    print(\"##### Preparing Order Body for access to DEDL HDA using DESP Credentials #####\")\n    order_body_custom_bucket[\"WorkflowOptions\"].extend(\n        [\n            {\"Name\": \"source_type\", \"Value\": \"DESP\"},\n            {\"Name\": \"desp_source_username\", \"Value\": DESP_USERNAME},\n            {\"Name\": \"desp_source_password\", \"Value\": DESP_PASSWORD},\n            {\"Name\": \"desp_source_collection\", \"Value\": collection_id}\n        ]\n    )\n\nelif source_type == \"EXTERNAL\":\n\n    # Build your order body : Example using EXTERNAL source type and source_catalogue_api_type STAC.\n    # This would allow you to access products directly from a configured STAC server\n    # Here we show an example configuration of a STAC server with OIDC security, that could be adapted to your needs (change urls, etc)\n    # This is shown for example purposes only. The standard way of configuring is with DESP source_type seen above.\n    print(\"##### Preparing Order Body for access to EXTERNAL STAC Server using EXTERNAL Credentials #####\")\n    order_body_custom_bucket[\"WorkflowOptions\"].extend(\n        [\n            {\"Name\": \"source_type\", \"Value\": \"EXTERNAL\"},\n            {\"Name\": \"source_catalogue_api_url\", \"Value\": stac_hda_api_url},\n            {\"Name\": \"source_catalogue_api_type\", \"Value\": \"STAC\"},\n            {\"Name\": \"source_token_url\", \"Value\": EXTERNAL_TOKEN_URL},\n            {\"Name\": \"source_grant_type\", \"Value\": \"PASSWORD\"},\n            {\"Name\": \"source_auth_header_name\", \"Value\": \"Authorization\"},\n            {\"Name\": \"source_username\", \"Value\": EXTERNAL_USERNAME},\n            {\"Name\": \"source_password\", \"Value\": EXTERNAL_PASSWORD},\n            {\"Name\": \"source_client_id\", \"Value\": EXTERNAL_CLIENT_ID},\n            {\"Name\": \"source_client_secret\", \"Value\": \"\"},\n            {\"Name\": \"source_catalogue_collection\", \"Value\": collection_id}\n        ]\n    )\n\nelse:\n\n    print(\"source_type not equal to DESP or EXTERNAL\")\n\n\n\n########## ADDITIONAL OPTIONS ##########\n\nadditional_options = []\n\n# Checks environment variables for the form HOOK_ADDITIONAL1=\"NAME=12345;VALUE=abcdef\"\nfor env_key, env_value in os.environ.items():\n    if env_key.startswith('HOOK_ADDITIONAL'):\n        #print(f\"{env_key}: {env_value}\")        \n        parts = env_value.split(';')\n        # Extract the name and value\n        name = parts[0].split('=')[1]\n        value = parts[1].split('=')[1]\n        value_type = parts[2].split('=')[1]\n        additional_options.append({\"Name\": name, \"Value\": value if value_type == 'str' else int(value)})\n\nprint(f\"addditional_options:{additional_options}\")\n\nif additional_options:\n    print(\"Adding additional_options\")\n    order_body_custom_bucket[\"WorkflowOptions\"].extend(additional_options)\n\n########## BUILD ORDER BODY : END ##########\n\n# Uncomment this to see the final order body\n# print(json.dumps(order_body_custom_bucket, indent=4))\n\n\n# Send order\norder_request = requests.post(\n    hook_service_root_url + \"BatchOrder/OData.CSC.Order\",\n    json.dumps(order_body_custom_bucket),\n    headers=api_headers,\n).json()\n\n# If code = 201, the order has been successfully sent\n\n# Print order_request JSON object: containing order_request details\norder_reques_details = json.dumps(order_request, indent=4)\nprint(order_reques_details)\n\norder_id = order_request['value']['Id']\nprint(f\"order 'Id' from order_request: {order_id}\")\n","visibility":"show","key":"wJUAy8Omjd"},{"type":"output","id":"3RZ2YTttYowQ6vqMBt-bG","data":[],"visibility":"show","key":"oYiQdIV5Bg"}],"visibility":"show","key":"ei7VPaNT9J"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"It is possible to order multiple product using endpoint:\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oG3CO1Y93y"},{"type":"inlineCode","value":"https://odp.data.destination-earth.eu/odata/v1/BatchOrder/OData.CSC.Order","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nUQ6giUCgE"}],"key":"gYP3XLuk5K"}],"key":"Oyq0C21euD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check The status of the order","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lh3zUxPsOZ"}],"identifier":"check-the-status-of-the-order","label":"Check The status of the order","html_id":"check-the-status-of-the-order","implicit":true,"key":"uTG0FUn3I9"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Possible status values","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZjCAU1Muy3"}],"key":"ITRdjI8LZb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"queued (i.e. queued for treatment but not started)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"aqMJrO9LGo"}],"key":"THBqi91RKl"}],"key":"gxhYphA8z7"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"in_progress (i.e. order being treated)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"P1eZDKy6rf"}],"key":"S4ipZx2JO8"}],"key":"fGvQs6YI50"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"completed (i.e. order is complete and data ready)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"NLxtoVqtpt"}],"key":"Utw3gPKNVg"}],"key":"jpWfqfFmmn"}],"key":"qhH7zgfZxH"}],"key":"VNOom1HtMC"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"\n# ProductionOrders endpoint gives status of orders (only with one item attached)\n# Otherwise use BatchOrder(XXXX)/Products endpoint to get status of individual items associated with order\nif len(identifier_list) == 1:\n    order_status_url = f\"{hook_service_root_url}ProductionOrders\"\n    params = {\"$filter\": f\"id eq {order_id}\"}\n    order_status_response = requests.get(order_status_url, params=params, headers=api_headers).json()\n    print(json.dumps(order_status_response, indent=4))\n\n# Get Status of all items of an order in this way\norder_status_response = requests.get(\n    f\"{hook_service_root_url}BatchOrder({order_id})/Products\",\n    headers=api_headers,\n).json()\nprint(json.dumps(order_status_response, indent=4))\n","visibility":"show","key":"MPSdftRgL6"},{"type":"output","id":"nre6yODbQZI1yIvDS8m3Z","data":[],"visibility":"show","key":"rqYxzK1siC"}],"visibility":"show","key":"pjlMLEobiS"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Access workflow output","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UPg5hvDjCm"}],"identifier":"access-workflow-output","label":"Access workflow output","html_id":"access-workflow-output","implicit":true,"key":"xLf0qUB3af"}],"visibility":"show","key":"nB0byFhU5Z"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Private storage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TAAOoFj8MB"}],"identifier":"private-storage","label":"Private storage","html_id":"private-storage","implicit":true,"key":"dG8bm28G4m"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let us now check our private storage using this boto3 script.\nYou can also go and check this in the Islet service using the Horizon user interface","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"WyUZLX5569"}],"key":"ev2T2kf38F"}],"key":"v1Fom1ku9M"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# PRIVATE STORAGE: Prints contents of Private Bucket\nimport boto3\n\nif is_private_storage:\n\n    s3 = boto3.client(\n        \"s3\",\n        aws_access_key_id=output_storage_access_key,\n        aws_secret_access_key=output_storage_secret_key,\n        endpoint_url=output_storage_url,\n    )\n\n    paginator = s3.get_paginator(\"list_objects_v2\")\n    pages = paginator.paginate(Bucket=output_bucket, Prefix=output_prefix + \"/\")\n\n    for page in pages:\n        try:\n            for obj in page[\"Contents\"]:\n                print(obj[\"Key\"])\n        except KeyError:\n            print(\"No files exist\")\n            exit(1)","visibility":"show","key":"WdYGjVnbO6"},{"type":"output","id":"kR9O8GjEVeV_phhFh7WVl","data":[],"visibility":"show","key":"jsMi608F4Z"}],"visibility":"show","key":"wlsppmNQrp"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Temporary storage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HcsAUe28lE"}],"identifier":"temporary-storage","label":"Temporary storage","html_id":"temporary-storage","implicit":true,"key":"yzAVGVdeyx"}],"key":"NbzfTvzfJf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# List order items within a production order\n# When the output_storage is of type TEMPORARY we can get a DownloadLink from the following code (Can also optionally download items here in code with the flag is_download_products)\n\n# If TEMPORARY storage\nif not is_private_storage:\n\n    # Set to True to download products at the same level as the notebook file. File name will be in format \"output-{workflow}-{order_id}-{product_id}.zip\"\n    is_download_products = False\n\n    # Get Status of all items of an order in this way\n    product_status_response = requests.get(\n        f\"{hook_service_root_url}BatchOrder({order_id})/Products\",\n        headers=api_headers,\n    ).json()\n    print(json.dumps(product_status_response, indent=4))\n\n    if is_download_products:\n\n        is_all_products_completed = True\n        # We only attempt to download products when each of the items is in complete status.\n        for i in range(len(product_status_response[\"value\"])):\n\n            product_id = product_status_response[\"value\"][i][\"Id\"]\n            product_status = product_status_response[\"value\"][i][\"Status\"]\n\n            if product_status != \"completed\":\n                is_all_products_completed = False\n\n        # Can download if all products completed\n        if is_all_products_completed:\n\n            for i in range(len(product_status_response[\"value\"])):\n\n                product_id = product_status_response[\"value\"][i][\"Id\"]\n                product_status = product_status_response[\"value\"][i][\"Status\"]\n\n                # Infer the url of the product\n                url_product = f\"{hook_service_root_url}BatchOrder({order_id})/Product({product_id})/$value\"\n                print(f\"url_product: {url_product}\")\n                # Download the product\n                r = requests.get(\n                    url_product, headers=api_headers, allow_redirects=True\n                )\n                product_file_name = f\"output-{workflow}-{order_id}-{product_id}.zip\"\n                open(product_file_name, \"wb\").write(r.content)\n                print(f\"Download Complete: product_file_name: {product_file_name}\")\n\n        else:\n            print(f\"Status for order:{order_id} - At least one of the products does not have the status of 'completed'.\")\n","visibility":"show","key":"VxHrJXbRvr"},{"type":"output","id":"F8AP27qktWu8u9dtfZcIu","data":[],"visibility":"show","key":"Y6vRBnfyBh"}],"visibility":"show","key":"VAatbdoXj4"}],"key":"L7Hu1JSWFf"},"references":{"cite":{"order":[],"data":{}}},"footer":{},"domain":"http://localhost:3001"},"project":{"title":"DEDL Notebook Gallery","toc":[{"file":"index.md"},{"file":"contribute.md","title":"contribute"},{"children":[{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.METOP.AVHRRL1.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MSG-1.5.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MTG.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.SENTINEL-3.OL_1_ERR___.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ExtractLocationValues.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-dataAvailability.ipynb","hidden":true},{"file":"production/HDA/CDS_data/DEDL-HDA-EO.ECMWF.DAT.REANALYSIS_ERA5_SINGLE_LEVELS.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-1.L1_GRD.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-2.MSI.L2A.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-Queryables.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-full-version.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-quick-start.ipynb","hidden":true},{"file":"production/HDA/PySTAC/HDA-PyStac-Client.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-full-version.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-quick-start.ipynb","hidden":true}],"file":"galleries/HDA.md","title":"HDA"},{"children":[{"file":"production/HOOK/DEDL-Hook_access.ipynb","hidden":true},{"file":"production/HOOK/DEDL-Hook_data_harvest.ipynb","hidden":true},{"file":"production/HOOK/Tutorial.ipynb","hidden":true}],"file":"galleries/HOOK.md","title":"HOOK"},{"children":[{"file":"production/STACK/DEDL_StackService_Dask.ipynb","hidden":true},{"file":"production/STACK/STACK-Dask-101.ipynb","hidden":true},{"file":"production/STACK/STACK-Python-Client-Dask.ipynb","hidden":true}],"file":"galleries/STACK.md","title":"STACK"},{"file":"galleries_by_tag/tag-access-token.md","hidden":true},{"file":"galleries_by_tag/tag-authentication.md","hidden":true},{"file":"galleries_by_tag/tag-avhrr.md","hidden":true},{"file":"galleries_by_tag/tag-c3s.md","hidden":true},{"file":"galleries_by_tag/tag-cluster.md","hidden":true},{"file":"galleries_by_tag/tag-core-api.md","hidden":true},{"file":"galleries_by_tag/tag-dask.md","hidden":true},{"file":"galleries_by_tag/tag-digital-twin.md","hidden":true},{"file":"galleries_by_tag/tag-earthkit.md","hidden":true},{"file":"galleries_by_tag/tag-ecmwf.md","hidden":true},{"file":"galleries_by_tag/tag-eodag.md","hidden":true},{"file":"galleries_by_tag/tag-gfm.md","hidden":true},{"file":"galleries_by_tag/tag-hda.md","hidden":true},{"file":"galleries_by_tag/tag-hook.md","hidden":true},{"file":"galleries_by_tag/tag-http-requests.md","hidden":true},{"file":"galleries_by_tag/tag-metop.md","hidden":true},{"file":"galleries_by_tag/tag-olci.md","hidden":true},{"file":"galleries_by_tag/tag-pyaviso.md","hidden":true},{"file":"galleries_by_tag/tag-satpy.md","hidden":true},{"file":"galleries_by_tag/tag-sentinel-3.md","hidden":true},{"file":"galleries_by_tag/tag-seviri.md","hidden":true},{"file":"galleries_by_tag/tag-stac.md","hidden":true},{"file":"galleries_by_tag/tag-stack.md","hidden":true},{"file":"galleries_by_tag/tag-storage.md","hidden":true},{"file":"galleries_by_tag/tag-token.md","hidden":true},{"file":"galleries_by_tag/tag-workflow.md","hidden":true}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"contribute","title":"Contribute to the Gallery","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hda","title":"HDA Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hook","title":"HOOK Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stack","title":"STACK Gallery","description":"","date":"","thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-B2B2E6A5.js";
import * as route0 from "/build/root-IB5726YR.js";
import * as route1 from "/build/routes/$-LXLHKVOR.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>