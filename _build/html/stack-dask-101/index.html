<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>STACK service - Dask 101 - DEDL Notebook Gallery</title><meta property="og:title" content="STACK service - Dask 101 - DEDL Notebook Gallery"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/build/dask-55232318e36306007797c96fb8ae0744.png"/><meta property="og:image" content="/build/dask-55232318e36306007797c96fb8ae0744.png"/><link rel="stylesheet" href="/build/_assets/app-5WKS5EPQ.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><div class="p-1 mr-3 dark:bg-white dark:rounded"><img src="/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png" class="h-9" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R74op:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">‚åò</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="DEDL Notebook Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">DEDL Notebook Gallery</a><a title="Contribute to the Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/contribute">Contribute to the Gallery</a><a title="HDA Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/hda">HDA Gallery</a><a title="HOOK Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/hook">HOOK Gallery</a><a title="STACK Gallery" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/stack">STACK Gallery</a></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer" title="Content License: MIT License (MIT)" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="mx-1 inline-block opacity-60 hover:opacity-100 hover:text-[#599F46]"><path d="M13.2 15.6c1.4-.5 2.1-1.6 2.1-3.3S13.8 8.9 12 8.9c-1.9 0-3.3 1.6-3.3 3.3 0 1.8.8 3 2.2 3.4l-2.3 5.9c-3.1-.8-6.3-4.6-6.3-9.3 0-5.5 4.3-10 9.7-10s9.8 4.5 9.8 10c0 4.7-3.1 8.5-6.3 9.3l-2.3-5.9z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8top:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">STACK service - Dask 101</h1><p class="mt-2 mb-0 lead text-zinc-600 dark:text-zinc-400">This notebook introduces Dask&#x27;s core APIs and demonstrates how to use them for scalable, parallel, and distributed data processing, culminating in deploying and interacting with a Dask cluster on the DestinE Data Lake STACK service.</p><header class="mt-4 not-prose"><div><span class="font-semibold text-sm inline-block"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78top:" data-state="closed">Author: Eumetsat</button></span></div></header></div><div id="skip-to-article"></div><div class="" style="margin:6px 0"><a target="_blank" rel="noreferrer" href="https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/STACK/STACK-Dask-101.ipynb" class=""><span class="launch">üöÄ Launch in JupyterHub</span></a></div><div id="klddF1opzF" class="relative group/block"><h2 id="dask-core-library-apis" class="relative group"><span class="heading-text">Dask Core Library (APIs)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-core-library-apis" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2><p>Dask provides several APIs, also called collections, to enable distributed+parallel execution on larger-than-memory datasets.
We can think of Dask‚Äôs APIs at a high and a low level:</p><p><img id="jGBqXapfpC" style="width:65%;margin:0 auto" src="/build/58d59d37a749bf97727f9be46ef12be2.png" alt="High vs Low level clothes analogy" data-canonical-url="https://tutorial.dask.org/_images/high_vs_low_level_coll_analogy.png" class=""/></p><ul><li><p><strong>High-level collections:</strong>  Dask provides high-level <strong>Array, Bag, and DataFrame</strong>
collections that mimic NumPy, lists, and pandas but can operate in parallel on
datasets that don‚Äôt fit into memory.</p></li><li><p><strong>Low-level collections:</strong>  Dask also provides low-level <strong>Tasks (Delayed and Futures)</strong>
collections that give you finer control to build custom parallel and distributed computations.</p></li></ul><p><strong>In this tutorial we will focus on Dask Arrays and Tasks (Delayed and Futures). Please visit the <a target="_blank" rel="noreferrer" href="https://examples.dask.org/index.html" class="">Dask Examples</a> and <a target="_blank" rel="noreferrer" href="https://tutorial.dask.org/" class="">Dask Tutorial</a> for additional information.</strong></p></div><div id="MF2Z5hXZe5" class="relative group/block"><h3 id="dask-array-parallelized-numpy" class="relative group"><span class="heading-text">dask.array - parallelized numpy</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-array-parallelized-numpy" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3><p>Parallel, larger-than-memory, n-dimensional array using blocked algorithms.</p><ul><li><p><strong>Parallel</strong>: Uses all of the cores on your computer</p></li><li><p><strong>Larger-than-memory</strong>:  Lets you work on datasets that are larger than your available memory by breaking up your array into many small pieces, operating on those pieces in an order that minimizes the memory footprint of your computation, and effectively streaming data from disk.</p></li><li><p><strong>Blocked Algorithms</strong>:  Perform large computations by performing many smaller computations.</p></li></ul></div><div id="SDOQlD9LwD" class="relative group/block"><img id="WznVsroNPl" style="width:40%;margin:0 auto" src="/build/037e4310c3913e72533173c453c9e52f.svg" data-canonical-url="https://docs.dask.org/en/stable/_images/dask-array.svg" class=""/><p>In other words, Dask Array implements a subset of the NumPy ndarray interface using blocked algorithms, cutting up the large array into many small arrays. This lets us compute on arrays larger than memory using all of our cores. We coordinate these blocked algorithms using Dask graphs.</p><p>In this notebook, we‚Äôll build some understanding by implementing some blocked algorithms from scratch.
We‚Äôll then use Dask Array to analyze large datasets, in parallel, using a familiar NumPy-like API.</p><p><strong>Related Documentation</strong></p><ul><li><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/latest/array.html" class="">Array documentation</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://youtu.be/9h_61hXCDuI" class="">Array screencast</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/latest/array-api.html" class="">Array API</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://examples.dask.org/array.html" class="">Array examples</a></p></li></ul></div><div id="tYR6ozFnqZ" class="relative group/block"><h4 id="arrays-example" class="relative group"><span class="heading-text">Arrays - Example</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#arrays-example" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h4></div><div id="BUYAQwSMOU" class="relative group/block"><p>A dask array looks and feels a lot like a numpy array. However, a dask array doesn‚Äôt directly hold any data. Instead, it symbolically represents the computations needed to generate the data. Nothing is actually computed until the actual numerical values are needed. This mode of operation is called ‚Äúlazy‚Äù; it allows one to build up complex, large calculations symbolically before turning them over the scheduler for execution.</p></div><div id="cijpG6ywyE" class="relative group/block"><p>If we want to create a numpy array of all ones, we do it like this:</p></div><div id="jo5Ua0qQ3N" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import numpy as np
shape = (1000, 4000)
ones_np = np.ones(shape)
ones_np</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Ga2WRME1N3lUdT9vwsxAU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dulBzWae0s" class="relative group/block"><p>This array contains exactly 32 MB of data:</p></div><div id="FSILskB9sU" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(&#x27;%.1f MB&#x27; % (ones_np.nbytes / 1e6))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="AlesQXc7g1Lo-Xc9Af134" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="HvU5TXE2HT" class="relative group/block"><p>Now let‚Äôs create the same array using dask‚Äôs array interface.</p></div><div id="JQ5ZqYGDWw" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import dask.array as da
ones = da.ones(shape)
ones</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="6_zhEQxkypCt1jYy6tl3v" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="EOIaP8e3tq" class="relative group/block"><p>This works, but we didn‚Äôt tell Dask how to split up the array, so it is not optimized for distributed computation.</p><p>A crucial difference with Dask is that we must specify the chunks argument. ‚ÄúChunks‚Äù describes how the array is split up over many sub-arrays.</p><p>There are several ways to <a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/stable/array-chunks.html" class="">specify chunks</a>.</p></div><div id="W6laoVaDCJ" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">chunk_shape = (1000, 1000)
ones = da.ones(shape, chunks=chunk_shape)
ones</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="y5xPs_x44K4MEZrGeAGrh" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="FKKiyWhw09" class="relative group/block"><p>Notice that we just see a symbolic representation of the array, including its shape, dtype, and chunksize. No data has been generated yet. When we call <strong>.compute()</strong> on a dask array, the computation is trigger and the dask array becomes a numpy array.</p></div><div id="Q2HQ6HsN9E" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ones.compute()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="TB82lAG0se4TWXxwu6nS3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="N80TvuYnRw" class="relative group/block"><p>In order to understand what happened when we called .compute(), we can visualize the <strong>Dask graph</strong>, the symbolic operations, that make up the array.</p></div><div id="iAv9b13kEJ" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ones.visualize(format=&#x27;svg&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fve4n0vSTP9GVtslsNI6Z" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ieotd2KTiG" class="relative group/block"><p>The array has four chunks. To generate it, Dask calls np.ones four times and then concatenates this together into one array.</p><p>Rather than immediately loading a Dask array (which puts all the data into RAM), it is more common to reduce the data somehow. For example:</p></div><div id="c0o2xlYGiz" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sum_of_ones = ones.sum()
sum_of_ones.visualize(format=&#x27;svg&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ZJujJx06EPN7lJCt8tIEf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="LCyyTL54MY" class="relative group/block"><p>Here we see Dask‚Äôs strategy for finding the sum. This simple example illustrates the beauty of Dask: it automatically designs an algorithm appropriate for custom operations with big data.</p><p>If we make our operation more complex, the graph gets more complex.</p></div><div id="C7haZv23dy" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fancy_calculation = (ones * ones[::-1, ::-1]).mean()
fancy_calculation.visualize(format=&#x27;svg&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="X-gJx--NpwHwFuP3sVjfD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="KrAHqUTMDw" class="relative group/block"><h3 id="dask-delayed-parallelize-generic-python-code" class="relative group"><span class="heading-text">dask.delayed - parallelize generic Python code</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-delayed-parallelize-generic-python-code" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3><p>What if you don‚Äôt have an Dask array or Dask dataframe? Instead of having blocks where the function is applied to each block, you can decorate functions with <code>@delayed</code> and <em>have the functions themselves be lazy</em>. Rather than compute its result immediately, it records what needs to be computed as a task into a graph that we‚Äôll run later on parallel hardware.</p><p>This is a simple way to use Dask to parallelize existing codebases or build <a target="_blank" rel="noreferrer" href="https://blog.dask.org/2018/02/09/credit-models-with-dask" class="">complex systems</a>.</p><p><strong>Related Documentation</strong></p><ul><li><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/latest/delayed.html" class="">Delayed documentation</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://www.youtube.com/watch?v=SHqFmynRxVU" class="">Delayed screencast</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/latest/delayed-api.html" class="">Delayed API</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://examples.dask.org/delayed.html" class="">Delayed examples</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/latest/delayed-best-practices.html" class="">Delayed best practices</a></p></li></ul></div><div id="CKUNjsBBts" class="relative group/block"><p>A typical workfow Read-Transform-Write workflow are most often implemented as outlined hereafter.
In general, most workflows containing a for-loop can benefit from dask.delayed.</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import dask
    
@dask.delayed
def process_file(filename):
    data = read_a_file(filename)
    data = do_a_transformation(data)
    destination = f&quot;results/{filename}&quot;
    write_out_data(data, destination)
    return destination

results = []
for filename in filenames:
    results.append(process_file(filename))
    
dask.compute(results)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="wEEjJ8R194" class="relative group/block"><h5 id="dask-delayed-example" class="relative group"><span class="heading-text">dask.delayed - Example</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-delayed-example" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h5><p>For demonstration purposes we will create simple functions to perform simple operations like add two numbers together, but they sleep for a random amount of time to simulate real work.</p></div><div id="cI0eBI67qM" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import time

def inc(x):
    time.sleep(0.1)
    return x + 1

def dec(x):
    time.sleep(0.1)
    return x - 1

def add(x, y):
    time.sleep(0.2)
    return x + y</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="D7hGKvmG2EtCpvSz6sa3B" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tKBqREyHas" class="relative group/block"><p>We can run them like normal Python functions below</p></div><div id="bp4It9p1bp" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%%time
x = inc(1)
y = dec(2)
z = add(x, y)
z</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qCKc78jiQUPPu0Sf-req0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ykIgZermRr" class="relative group/block"><p>These ran one after the other, in sequence. Note though that the first two lines inc(1) and dec(2) don‚Äôt depend on each other, we could have called them in parallel.</p><p>We can call dask.delayed on these funtions to make them lazy. Rather than compute their results immediately, they record what we want to compute as a task into a graph that we‚Äôll run later on parallel hardware.</p></div><div id="JYVXpih4Vt" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import dask
inc = dask.delayed(inc)
dec = dask.delayed(dec)
add = dask.delayed(add)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="JoMnbIQVbDq79iaxuymKW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RpAkHwpsHW" class="relative group/block"><p>Calling these lazy functions is now almost free. We‚Äôre just constructing a graph</p></div><div id="pAvjt62gGx" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%%time
x = inc(1)
y = dec(2)
z = add(x, y)
z</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="o-rPsyLN8MUDBS64UtIP3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="eI3Dzem6je" class="relative group/block"><p>Visualize computation</p></div><div id="Bd4mJqoYMv" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">z.visualize(format=&#x27;svg&#x27;, rankdir=&#x27;LR&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="UDyLJNc9X05WDKjpojXFc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="JH4HHo89CS" class="relative group/block"><p>Run in parallel. Call .compute() when you want your result as a normal Python object</p></div><div id="jAd3DigKRO" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%%time
z.compute()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="DSxeIHZz_1aAhmXaINwZd" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Lm6xMtB8Zk" class="relative group/block"><p><strong>Parallelize Normal Python code</strong></p><p>Now we use dask.delayed in a normal for-loop Python code as given in the example above. This generates graphs instead of doing computations directly, but still looks like the code we had before. Dask is a convenient way to add parallelism to existing workflows.</p></div><div id="tWvMKtCxh9" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%%time
zs = []
for i in range(256):
    x = inc(i)
    y = dec(x)
    z = add(x, y)
    zs.append(z)

zs = dask.persist(*zs)   # trigger computation in the background</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Tm9EbMe8emPZPYvEkePL2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="iTJdxScJ6w" class="relative group/block"><h2 id="dask-cluster-dask-distributed" class="relative group"><span class="heading-text">Dask Cluster (dask.distributed)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-cluster-dask-distributed" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2><p>Dask has the ability to run work on multiple machines using the distributed scheduler. <code>dask.distributed</code> is a lightweight library for distributed computing in Python. It extends both the <code>concurrent.futures</code> and Dask APIs to run on various clusters technologies such as Kubernetes, Yarn, SLURM, PBS, etc. .
Most of the times when you are using Dask, you will be using a distributed scheduler, which exists in the context of a Dask cluster. When we talk about Dask Clusters we can think of those as depicted in the following:</p><p><img id="vTfIa874Dr" style="width:75%;margin:0 auto" src="/build/7445a9f1307deaa4760238b8ed4d85c3.png" alt="Distributed overview" data-canonical-url="https://tutorial.dask.org/_images/distributed-overview.png" class=""/></p></div><div id="A5THJxRIre" class="relative group/block"><h2 id="dask-dedl" class="relative group"><span class="heading-text">Dask @ DEDL</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-dedl" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h2><p>DestinE Data Lake utilises a deployment of <a target="_blank" rel="noreferrer" href="https://gateway.dask.org/" class="">Dask Gateway</a> on each location (bridge) in the data lake. Dask Gateway provides a secure, multi-tenant server for managing Dask clusters. It allows users to launch and use Dask clusters in a shared, centrally managed cluster environment, without requiring users to have direct access to the underlying cluster backend (e.g. Kubernetes, Hadoop/YARN, HPC Job queues, etc‚Ä¶).</p><p>Dask Gateway exposes a REST API to spawn clusters on demand. The overall architecture of Dask Gateway is depicted hereafter.
<img id="BuzhhjCuqg" style="margin:0 auto" src="/build/04cc7514c92f1ae43e3b621d7cc0a124.svg" data-canonical-url="https://gateway.dask.org/_images/architecture.svg" class=""/></p><h3 id="how-to-connect-and-spawn-a-cluster" class="relative group"><span class="heading-text">How to connect and spawn a cluster?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#how-to-connect-and-spawn-a-cluster" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h3><p><strong>Central Site</strong></p><ul><li><p>address: <a target="_blank" rel="noreferrer" href="http://dask.central.data.destination-earth.eu" class="">http://<wbr/>dask<wbr/>.central<wbr/>.data<wbr/>.destination<wbr/>-earth<wbr/>.eu</a></p></li><li><p>proxy_address: tcp://dask.central.data.destination-earth.eu:80</p></li></ul><p><strong>LUMI Bridge</strong></p><ul><li><p>address: <a target="_blank" rel="noreferrer" href="http://dask.lumi.data.destination-earth.eu" class="">http://<wbr/>dask<wbr/>.lumi<wbr/>.data<wbr/>.destination<wbr/>-earth<wbr/>.eu</a></p></li><li><p>proxy_address: tcp://dask.lumi.data.destination-earth.eu:80</p></li></ul></div><div id="TELz0gxN8H" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dask_gateway.auth import GatewayAuth
from getpass import getpass
from destinelab import AuthHandler as DESP_AuthHandler

class DESPAuth(GatewayAuth):
    def __init__(self, username: str):
        self.auth_handler = DESP_AuthHandler(username, getpass(&quot;Please input your DESP password: &quot;))
        self.access_token = self.auth_handler.get_token()
    
    def pre_request(self, _):
        headers = {&quot;Authorization&quot;: &quot;Bearer &quot; + self.access_token}
        return headers, None</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="OF3WFJzy7TAoqj7RdviTe" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="kc2mpr09xZ" class="relative group/block"><p>Only authenticated access is granted to the DEDL STACK service Dask, therefore a helper class to authenticate a user against the DESP identity management system is implemented. The users password is directly handed over to the request object and is not permanently stored.</p><p>In the following, please enter your DESP username and password. Again, the password will only be saved for the duration of this user session and will be remove as soon as the notebook/kernel is closed.</p></div><div id="MhBuQ6KJ5d" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from rich.prompt import Prompt
myAuth = DESPAuth(username=Prompt.ask(prompt=&quot;Username&quot;))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="VyuyhOvQObyjFrRR97ns3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="IC8NnF3dfO" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dask_gateway import Gateway
gateway = Gateway(address=&quot;http://dask.central.data.destination-earth.eu&quot;,
                  proxy_address=&quot;tcp://dask.central.data.destination-earth.eu:80&quot;,
                  auth=myAuth)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jMq7_rEvA_l8Bssu-3fbR" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="KLv3BH5sP0" class="relative group/block"><p>Cluster creation and client instantiation to communicate with the new cluster</p></div><div id="vDr8v9RYmu" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cluster = gateway.new_cluster()
client = cluster.get_client()
cluster</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="UQxqlV4t5Zs2lQTqWsHbD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ptojhGPwGF" class="relative group/block"><p>Up to now the cluster will only consist of the distributed scheduler. If you want to spawn workers directly via Python adaptively, please use the following method call. With the following the cluster will be scaled to 2 workers initially. Depending on the load, Dask will add addtional workers, up to 5, if needed.</p></div><div id="uPxP9TGHB4" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cluster.adapt(minimum=2, maximum=5)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="pUPQ-YW9hLzaiNClAM1Yk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="gRFxfMwBOx" class="relative group/block"><h4 id="dask-futures-non-blocking-distributed-calculations" class="relative group"><span class="heading-text">dask.futures - non-blocking distributed calculations</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-futures-non-blocking-distributed-calculations" title="Link to this Section" aria-label="Link to this Section">¬∂</a></h4><p>We will now make use of the remote Dask Cluster using the Dask low-level collection dask.futures.</p><p>Submit arbitrary functions for computation in a parallelized, eager, and non-blocking way.</p><p>The <code>futures</code> interface (derived from the built-in <code>concurrent.futures</code>) provide fine-grained real-time execution for custom situations. We can submit individual functions for evaluation with one set of inputs, or evaluated over a sequence of inputs with <code>submit()</code> and <code>map()</code>. The call returns immediately, giving one or more <em>futures</em>, whose status begins as ‚Äúpending‚Äù and later becomes ‚Äúfinished‚Äù. There is no blocking of the local Python session.</p><p><strong>Important</strong></p><p>This is the important difference between futures and delayed. Both can be used to support arbitrary task scheduling, but delayed is lazy (it just constructs a graph) whereas futures are eager. With futures, as soon as the inputs are available and there is compute available, the computation starts.</p><p><strong>Related Documentation</strong></p><ul><li><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/latest/futures.html" class="">Futures documentation</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://www.youtube.com/watch?v=07EiCpdhtDE" class="">Futures screencast</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://examples.dask.org/futures.html" class="">Futures examples</a></p></li></ul></div><div id="K3K1hDydZ9" class="relative group/block"><p>This is the same workflow that as given above in the <code>dask.delayed</code> section. It is a for-loop to iterate of certain files to perform a transformation and to write the result.</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def process_file(filename):
    data = read_a_file(filename)
    data = do_a_transformation(data)
    destination = f&quot;results/{filename}&quot;
    write_out_data(data, destination)
    return destination

futures = []
for filename in filenames:
    future = client.submit(process_file, filename)
    futures.append(future)
    
futures</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div><div id="zTKGkMrV3O" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from time import sleep


def inc(x):
    sleep(1)
    return x + 1</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="y_JMwpOpxU75VC1wT4DHj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="EltJhzDqy1" class="relative group/block"><p>We can run these function locally</p></div><div id="xLh0lgP0gl" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">inc(1)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="uZBqz51TEFziIDhQydgHK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="qW1XwtuZou" class="relative group/block"><p>Or we can submit them to run remotely with Dask. This immediately returns a future that points to the ongoing computation, and eventually to the stored result.</p></div><div id="V0kBTpj2W7" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">future = client.submit(inc, 1)  # returns immediately with pending future
future</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="7EwbCDBuc1VM3TaR0wx1I" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="faMkHCJCZ2" class="relative group/block"><p>If you wait a second, and then check on the future again, you‚Äôll see that it has finished.</p></div><div id="t6u1UeI47b" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">future</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="DC3f3o2L1huh_sPc1Lreb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="iXXWqct6Xv" class="relative group/block"><p>You can block on the computation and gather the result with the .result() method.</p></div><div id="AJPIFBTC0q" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">future.result()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="RIcVpurbrVHALC-e8lD_R" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="XBsrqGEy8Z" class="relative group/block"><p><strong>Other ways to wait for a future</strong></p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dask.distributed import wait, progress
progress(future)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>shows a progress bar in the notebook. This progress bar is also asynchronous, and doesn‚Äôt block the execution of other code in the meanwhile.</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">wait(future)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>blocks and forces the notebook to wait until the computation pointed to by <code>future</code> is done. However, note that if the result of <code>inc()</code> is sitting in the cluster, it would take <strong>no time</strong> to execute the computation now, because Dask notices that we are asking for the result of a computation it already knows about. More on this later.</p><p><strong>Other ways to gather results</strong></p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">client.gather(futures)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>gathers results from more than one future.</p></div><div id="K78KrEEy80" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dask.distributed import wait, progress
def inc(x):
    sleep(1)
    return x + 1


future_x = client.submit(inc, 1)
future_y = client.submit(inc, 2)
future_z = client.submit(sum, [future_x, future_y])
progress(future_z)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="OQyZuW1URwX2-EtRcCN8a" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="N0ocpAuA50" class="relative group/block"><div class="alert-warning">Remove your cluster again to free up resources when you are done.</div></div><div id="I9CDeRyy40" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cluster.close(shutdown=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="hcc_H4IMDdBu5egyLq964" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div></div></main></article><footer class="article footer article-grid bg-white dark:bg-slate-950 mt-10 shadow-2xl shadow py-10"><div class="" style="display:flex;align-items:center"><img id="ZpV8x7Na4U" style="margin:0 auto" src="/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png" alt="DEDL Logo" data-canonical-url="img/logo_bar.png" class=""/></div><div class="" style="text-align:center"><span class="" style="color:#E6E9F0">2025</span> <span class="" style="color:#DFEDFF">¬© All Rights Reserved.</span></div><div class="" style="display:flex;gap:0.75rem;flex-wrap:wrap;justify-content:center"><a target="_blank" rel="noreferrer" href="https://destination-earth.eu/destination-earth/" class="">About us</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/news/" class="">News</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/event/" class="">Events</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/privacy-policy/" class="">Privacy policy</a> | <a target="_blank" rel="noreferrer" href="https://destination-earth.eu/terms-of-use/" class="">Terms of use</a></div></footer><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-JSE36H2O.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-C7FW3E47.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-ND43KHSX.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-IB5726YR.js"/><link rel="modulepreload" href="/build/_shared/chunk-NBON2RSI.js"/><link rel="modulepreload" href="/build/routes/$-LXLHKVOR.js"/><script>window.__remixContext = {"url":"/stack-dask-101","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.7","options":{"hide_footer_links":true,"hide_outline":true,"favicon":"/build/EUMETSAT-icon-96ce7e9141ec65f30d9ac6e866ea5ac0.ico","logo":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","style":"/build/custom-e7e6e9609bbc2b97516ccfc28ac7d9d2.css"},"parts":{"footer":{"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"display":"flex","alignItems":"center"},"children":[{"type":"image","style":{"height":"24px","marginRight":"12px"},"url":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","alt":"DEDL Logo","key":"ZpV8x7Na4U","urlSource":"img/logo_bar.png"}],"key":"ReAG2Mt86S"},{"type":"div","style":{"textAlign":"center"},"children":[{"type":"span","style":{"color":"#E6E9F0"},"children":[{"type":"text","value":"2025","key":"B9OcXbuPTX"}],"key":"uvryVE3Hqk"},{"type":"text","value":" ","key":"mTumJzDfHN"},{"type":"span","style":{"color":"#DFEDFF"},"children":[{"type":"text","value":"¬© All Rights Reserved.","key":"cbpDyvRCXp"}],"key":"Uzwa9wMZir"}],"key":"MJ83H8t3ei"},{"type":"div","style":{"display":"flex","gap":"0.75rem","flexWrap":"wrap","justifyContent":"center"},"children":[{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/destination-earth/","children":[{"type":"text","value":"About us","key":"UWv85ff8hL"}],"urlSource":"https://destination-earth.eu/destination-earth/","key":"yK9Tb6ut4j"},{"type":"text","value":" | ","key":"Dd1AkbFmGl"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/news/","children":[{"type":"text","value":"News","key":"h05whl6y7k"}],"urlSource":"https://destination-earth.eu/news/","key":"Tv9kGQxP4r"},{"type":"text","value":" | ","key":"in1sTMyR3M"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/event/","children":[{"type":"text","value":"Events","key":"tYYhS1FflL"}],"urlSource":"https://destination-earth.eu/event/","key":"XHMRNC2HL1"},{"type":"text","value":" | ","key":"d1VD3if8IE"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/privacy-policy/","children":[{"type":"text","value":"Privacy policy","key":"MP4pZtkDJG"}],"urlSource":"https://destination-earth.eu/privacy-policy/","key":"xBHTYDbdsN"},{"type":"text","value":" | ","key":"ctk0KBSeYC"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/terms-of-use/","children":[{"type":"text","value":"Terms of use","key":"Z8VcMtKozy"}],"urlSource":"https://destination-earth.eu/terms-of-use/","key":"fxMClTrj2G"}],"key":"KBGzhrtnOW"}],"key":"iPqLRI0YyR"}],"key":"a87gZYPCAn"},"frontmatter":{"parts":{},"thumbnail":"/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png"}}},"nav":[],"actions":[],"projects":[{"title":"DEDL Notebook Gallery","toc":[{"file":"index.md"},{"file":"contribute.md","title":"contribute"},{"children":[{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.METOP.AVHRRL1.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MSG-1.5.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MTG.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.SENTINEL-3.OL_1_ERR___.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ExtractLocationValues.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-dataAvailability.ipynb","hidden":true},{"file":"production/HDA/CDS_data/DEDL-HDA-EO.ECMWF.DAT.REANALYSIS_ERA5_SINGLE_LEVELS.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-1.L1_GRD.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-2.MSI.L2A.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-Queryables.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-full-version.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-quick-start.ipynb","hidden":true},{"file":"production/HDA/PySTAC/HDA-PyStac-Client.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-full-version.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-quick-start.ipynb","hidden":true}],"file":"galleries/HDA.md","title":"HDA"},{"children":[{"file":"production/HOOK/DEDL-Hook_access.ipynb","hidden":true},{"file":"production/HOOK/DEDL-Hook_data_harvest.ipynb","hidden":true},{"file":"production/HOOK/Tutorial.ipynb","hidden":true}],"file":"galleries/HOOK.md","title":"HOOK"},{"children":[{"file":"production/STACK/DEDL_StackService_Dask.ipynb","hidden":true},{"file":"production/STACK/STACK-Dask-101.ipynb","hidden":true},{"file":"production/STACK/STACK-Python-Client-Dask.ipynb","hidden":true}],"file":"galleries/STACK.md","title":"STACK"},{"file":"galleries_by_tag/tag-access-token.md","hidden":true},{"file":"galleries_by_tag/tag-authentication.md","hidden":true},{"file":"galleries_by_tag/tag-avhrr.md","hidden":true},{"file":"galleries_by_tag/tag-c3s.md","hidden":true},{"file":"galleries_by_tag/tag-cluster.md","hidden":true},{"file":"galleries_by_tag/tag-core-api.md","hidden":true},{"file":"galleries_by_tag/tag-dask.md","hidden":true},{"file":"galleries_by_tag/tag-digital-twin.md","hidden":true},{"file":"galleries_by_tag/tag-earthkit.md","hidden":true},{"file":"galleries_by_tag/tag-ecmwf.md","hidden":true},{"file":"galleries_by_tag/tag-eodag.md","hidden":true},{"file":"galleries_by_tag/tag-gfm.md","hidden":true},{"file":"galleries_by_tag/tag-hda.md","hidden":true},{"file":"galleries_by_tag/tag-hook.md","hidden":true},{"file":"galleries_by_tag/tag-http-requests.md","hidden":true},{"file":"galleries_by_tag/tag-metop.md","hidden":true},{"file":"galleries_by_tag/tag-olci.md","hidden":true},{"file":"galleries_by_tag/tag-pyaviso.md","hidden":true},{"file":"galleries_by_tag/tag-satpy.md","hidden":true},{"file":"galleries_by_tag/tag-sentinel-3.md","hidden":true},{"file":"galleries_by_tag/tag-seviri.md","hidden":true},{"file":"galleries_by_tag/tag-stac.md","hidden":true},{"file":"galleries_by_tag/tag-stack.md","hidden":true},{"file":"galleries_by_tag/tag-storage.md","hidden":true},{"file":"galleries_by_tag/tag-token.md","hidden":true},{"file":"galleries_by_tag/tag-workflow.md","hidden":true}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"contribute","title":"Contribute to the Gallery","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hda","title":"HDA Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hook","title":"HOOK Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stack","title":"STACK Gallery","description":"","date":"","thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":2,"myst":"1.6.7","options":{"hide_footer_links":true,"hide_outline":true,"favicon":"/build/EUMETSAT-icon-96ce7e9141ec65f30d9ac6e866ea5ac0.ico","logo":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","style":"/build/custom-e7e6e9609bbc2b97516ccfc28ac7d9d2.css"},"parts":{"footer":{"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"display":"flex","alignItems":"center"},"children":[{"type":"image","style":{"height":"24px","marginRight":"12px"},"url":"/build/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png","alt":"DEDL Logo","key":"ZpV8x7Na4U","urlSource":"img/logo_bar.png"}],"key":"ReAG2Mt86S"},{"type":"div","style":{"textAlign":"center"},"children":[{"type":"span","style":{"color":"#E6E9F0"},"children":[{"type":"text","value":"2025","key":"B9OcXbuPTX"}],"key":"uvryVE3Hqk"},{"type":"text","value":" ","key":"mTumJzDfHN"},{"type":"span","style":{"color":"#DFEDFF"},"children":[{"type":"text","value":"¬© All Rights Reserved.","key":"cbpDyvRCXp"}],"key":"Uzwa9wMZir"}],"key":"MJ83H8t3ei"},{"type":"div","style":{"display":"flex","gap":"0.75rem","flexWrap":"wrap","justifyContent":"center"},"children":[{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/destination-earth/","children":[{"type":"text","value":"About us","key":"UWv85ff8hL"}],"urlSource":"https://destination-earth.eu/destination-earth/","key":"yK9Tb6ut4j"},{"type":"text","value":" | ","key":"Dd1AkbFmGl"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/news/","children":[{"type":"text","value":"News","key":"h05whl6y7k"}],"urlSource":"https://destination-earth.eu/news/","key":"Tv9kGQxP4r"},{"type":"text","value":" | ","key":"in1sTMyR3M"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/event/","children":[{"type":"text","value":"Events","key":"tYYhS1FflL"}],"urlSource":"https://destination-earth.eu/event/","key":"XHMRNC2HL1"},{"type":"text","value":" | ","key":"d1VD3if8IE"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/privacy-policy/","children":[{"type":"text","value":"Privacy policy","key":"MP4pZtkDJG"}],"urlSource":"https://destination-earth.eu/privacy-policy/","key":"xBHTYDbdsN"},{"type":"text","value":" | ","key":"ctk0KBSeYC"},{"type":"link","style":{"color":"#DFEDFF","textDecoration":"none"},"url":"https://destination-earth.eu/terms-of-use/","children":[{"type":"text","value":"Terms of use","key":"Z8VcMtKozy"}],"urlSource":"https://destination-earth.eu/terms-of-use/","key":"fxMClTrj2G"}],"key":"KBGzhrtnOW"}],"key":"iPqLRI0YyR"}],"key":"a87gZYPCAn"},"frontmatter":{"parts":{},"thumbnail":"/logo_bar-b51d1656abaf8e03dd73e897c7ac3aa7.png"}}},"nav":[],"actions":[],"projects":[{"title":"DEDL Notebook Gallery","toc":[{"file":"index.md"},{"file":"contribute.md","title":"contribute"},{"children":[{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.METOP.AVHRRL1.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MSG-1.5.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MTG.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.SENTINEL-3.OL_1_ERR___.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ExtractLocationValues.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-dataAvailability.ipynb","hidden":true},{"file":"production/HDA/CDS_data/DEDL-HDA-EO.ECMWF.DAT.REANALYSIS_ERA5_SINGLE_LEVELS.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-1.L1_GRD.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-2.MSI.L2A.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-Queryables.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-full-version.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-quick-start.ipynb","hidden":true},{"file":"production/HDA/PySTAC/HDA-PyStac-Client.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-full-version.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-quick-start.ipynb","hidden":true}],"file":"galleries/HDA.md","title":"HDA"},{"children":[{"file":"production/HOOK/DEDL-Hook_access.ipynb","hidden":true},{"file":"production/HOOK/DEDL-Hook_data_harvest.ipynb","hidden":true},{"file":"production/HOOK/Tutorial.ipynb","hidden":true}],"file":"galleries/HOOK.md","title":"HOOK"},{"children":[{"file":"production/STACK/DEDL_StackService_Dask.ipynb","hidden":true},{"file":"production/STACK/STACK-Dask-101.ipynb","hidden":true},{"file":"production/STACK/STACK-Python-Client-Dask.ipynb","hidden":true}],"file":"galleries/STACK.md","title":"STACK"},{"file":"galleries_by_tag/tag-access-token.md","hidden":true},{"file":"galleries_by_tag/tag-authentication.md","hidden":true},{"file":"galleries_by_tag/tag-avhrr.md","hidden":true},{"file":"galleries_by_tag/tag-c3s.md","hidden":true},{"file":"galleries_by_tag/tag-cluster.md","hidden":true},{"file":"galleries_by_tag/tag-core-api.md","hidden":true},{"file":"galleries_by_tag/tag-dask.md","hidden":true},{"file":"galleries_by_tag/tag-digital-twin.md","hidden":true},{"file":"galleries_by_tag/tag-earthkit.md","hidden":true},{"file":"galleries_by_tag/tag-ecmwf.md","hidden":true},{"file":"galleries_by_tag/tag-eodag.md","hidden":true},{"file":"galleries_by_tag/tag-gfm.md","hidden":true},{"file":"galleries_by_tag/tag-hda.md","hidden":true},{"file":"galleries_by_tag/tag-hook.md","hidden":true},{"file":"galleries_by_tag/tag-http-requests.md","hidden":true},{"file":"galleries_by_tag/tag-metop.md","hidden":true},{"file":"galleries_by_tag/tag-olci.md","hidden":true},{"file":"galleries_by_tag/tag-pyaviso.md","hidden":true},{"file":"galleries_by_tag/tag-satpy.md","hidden":true},{"file":"galleries_by_tag/tag-sentinel-3.md","hidden":true},{"file":"galleries_by_tag/tag-seviri.md","hidden":true},{"file":"galleries_by_tag/tag-stac.md","hidden":true},{"file":"galleries_by_tag/tag-stack.md","hidden":true},{"file":"galleries_by_tag/tag-storage.md","hidden":true},{"file":"galleries_by_tag/tag-token.md","hidden":true},{"file":"galleries_by_tag/tag-workflow.md","hidden":true}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"contribute","title":"Contribute to the Gallery","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hda","title":"HDA Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hook","title":"HOOK Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stack","title":"STACK Gallery","description":"","date":"","thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"page":{"version":2,"kind":"Notebook","sha256":"b750795c6862866b864e1034c65f90727e95dfa61a82b0edb20ae023baf1a0fb","slug":"stack-dask-101","location":"/production/STACK/STACK-Dask-101.ipynb","dependencies":[],"frontmatter":{"title":"STACK service - Dask 101","subtitle":"This notebook introduces Dask's core APIs and demonstrates how to use them for scalable, parallel, and distributed data processing, culminating in deploying and interacting with a Dask cluster on the DestinE Data Lake STACK service.","tags":["STACK","Dask","Cluster"],"copyright":"¬© 2024 EUMETSAT","authors":[{"id":"Author: Eumetsat","name":"Author: Eumetsat"}],"license":{"content":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"STACK-Dask-101.ipynb","url":"/build/STACK-Dask-101-d15b1a4f269f3d3622231db4abf792b4.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"margin":"6px 0"},"children":[{"type":"link","style":{"textDecoration":"none"},"url":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/STACK/STACK-Dask-101.ipynb","children":[{"type":"span","class":"launch","children":[{"type":"text","value":"üöÄ Launch in JupyterHub","key":"lHzbrC6tBe"}],"key":"A9giKD4lJQ"}],"urlSource":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/STACK/STACK-Dask-101.ipynb","key":"P3swFIVqxY"}],"key":"UclLGdXQPH"}],"key":"a3E0rKwZl4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask Core Library (APIs)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TWypegPhJv"}],"identifier":"dask-core-library-apis","label":"Dask Core Library (APIs)","html_id":"dask-core-library-apis","implicit":true,"key":"hDrhuaLUtH"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask provides several APIs, also called collections, to enable distributed+parallel execution on larger-than-memory datasets.\nWe can think of Dask‚Äôs APIs at a high and a low level:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"vchsrvQJ9d"}],"key":"P1H65nbNqt"},{"type":"paragraph","children":[{"type":"image","url":"/build/58d59d37a749bf97727f9be46ef12be2.png","alt":"High vs Low level clothes analogy","width":"65%","key":"jGBqXapfpC","urlSource":"https://tutorial.dask.org/_images/high_vs_low_level_coll_analogy.png"}],"key":"Qj1ip0lDyY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"High-level collections:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"E8rsU9xgIV"}],"key":"PnLV3N3ku7"},{"type":"text","value":"  Dask provides high-level ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"wYbwcHpveJ"},{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Array, Bag, and DataFrame","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"FS5uq2uv88"}],"key":"ssCoGrI63o"},{"type":"text","value":"\ncollections that mimic NumPy, lists, and pandas but can operate in parallel on\ndatasets that don‚Äôt fit into memory.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Wmaqqi5ggw"}],"key":"z1u2ZKtFJM"}],"key":"uJeTSPwRoH"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Low-level collections:","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"cTk8EX616l"}],"key":"BLtPy15oqi"},{"type":"text","value":"  Dask also provides low-level ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"YG17ZsWJow"},{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Tasks (Delayed and Futures)","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eMoiRcpIig"}],"key":"fWGDwZ7zjW"},{"type":"text","value":"\ncollections that give you finer control to build custom parallel and distributed computations.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"noBM0ihjqT"}],"key":"GZY4yBb3W6"}],"key":"hUS5yP3m2G"}],"key":"VW5OKT9an8"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"In this tutorial we will focus on Dask Arrays and Tasks (Delayed and Futures). Please visit the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"CdMn22T8ih"},{"type":"link","url":"https://examples.dask.org/index.html","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Dask Examples","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"H9M60Mtlpw"}],"urlSource":"https://examples.dask.org/index.html","key":"LYqULLWX0e"},{"type":"text","value":" and ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"yrEAqTxrMo"},{"type":"link","url":"https://tutorial.dask.org/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Dask Tutorial","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"cQF9Plw6Ux"}],"urlSource":"https://tutorial.dask.org/","key":"Bxqh3Ms4jv"},{"type":"text","value":" for additional information.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"jW2RzBfNJm"}],"key":"chekCmmPPG"}],"key":"NK9Wq4CcsI"}],"key":"klddF1opzF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"dask.array - parallelized numpy","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bRmjn5yoyx"}],"identifier":"dask-array-parallelized-numpy","label":"dask.array - parallelized numpy","html_id":"dask-array-parallelized-numpy","implicit":true,"key":"JlIJKF3nOj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Parallel, larger-than-memory, n-dimensional array using blocked algorithms.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jCC1xCB1ST"}],"key":"K9ChichWTA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Parallel","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Nk5kHycd9t"}],"key":"uGCq10a3Ip"},{"type":"text","value":": Uses all of the cores on your computer","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bF7ARwRZNU"}],"key":"HQPvwAW95a"}],"key":"FoyuxfHbRU"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Larger-than-memory","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"nxKCGBWZqP"}],"key":"c5v6fLiqKA"},{"type":"text","value":":  Lets you work on datasets that are larger than your available memory by breaking up your array into many small pieces, operating on those pieces in an order that minimizes the memory footprint of your computation, and effectively streaming data from disk.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dBL6mrf3Lj"}],"key":"YFWyPcxgp1"}],"key":"RjSGZTj7sJ"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Blocked Algorithms","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jrus7TMs3m"}],"key":"jnhachsGmU"},{"type":"text","value":":  Perform large computations by performing many smaller computations.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JRXiF1UEFd"}],"key":"gLKCISgKuH"}],"key":"XhVeufKiTu"}],"key":"YuLQqoghBJ"}],"key":"MF2Z5hXZe5"},{"type":"block","kind":"notebook-content","children":[{"type":"image","style":{"marginLeft":"10px"},"url":"/build/037e4310c3913e72533173c453c9e52f.svg","width":"40%","key":"WznVsroNPl","urlSource":"https://docs.dask.org/en/stable/_images/dask-array.svg"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"In other words, Dask Array implements a subset of the NumPy ndarray interface using blocked algorithms, cutting up the large array into many small arrays. This lets us compute on arrays larger than memory using all of our cores. We coordinate these blocked algorithms using Dask graphs.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DAI0sHnGBZ"}],"key":"ScY7wG6yPU"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In this notebook, we‚Äôll build some understanding by implementing some blocked algorithms from scratch.\nWe‚Äôll then use Dask Array to analyze large datasets, in parallel, using a familiar NumPy-like API.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"tfWBwDc8XS"}],"key":"QBQPBys9mw"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Related Documentation","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"UAxsy83Zex"}],"key":"aAG2Cxm7mB"}],"key":"izcRt3KtUx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://docs.dask.org/en/latest/array.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Array documentation","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MSpvYgEfSm"}],"urlSource":"https://docs.dask.org/en/latest/array.html","key":"DgeKAUvPh4"}],"key":"OAq6ZCcFA6"}],"key":"Bx0g2t7znR"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://youtu.be/9h_61hXCDuI","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Array screencast","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"HkcFP0ohPc"}],"urlSource":"https://youtu.be/9h_61hXCDuI","key":"Np6tekKrv3"}],"key":"pwQt1pmjHt"}],"key":"SQaeDkhXcK"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://docs.dask.org/en/latest/array-api.html","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Array API","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"k0fN855iKw"}],"urlSource":"https://docs.dask.org/en/latest/array-api.html","key":"H9XE1jhUbf"}],"key":"YOk8f1bCkx"}],"key":"dQoXs8I8ie"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://examples.dask.org/array.html","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Array examples","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"nFiTzYxrrn"}],"urlSource":"https://examples.dask.org/array.html","key":"sTyPaN6Ix0"}],"key":"ig4zBXlkCW"}],"key":"ObkZ0D4dpv"}],"key":"ls51pxRozW"}],"key":"SDOQlD9LwD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Arrays - Example","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JSHIt7bCKj"}],"identifier":"arrays-example","label":"Arrays - Example","html_id":"arrays-example","implicit":true,"key":"bzBSCX1LmI"}],"key":"tYR6ozFnqZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A dask array looks and feels a lot like a numpy array. However, a dask array doesn‚Äôt directly hold any data. Instead, it symbolically represents the computations needed to generate the data. Nothing is actually computed until the actual numerical values are needed. This mode of operation is called ‚Äúlazy‚Äù; it allows one to build up complex, large calculations symbolically before turning them over the scheduler for execution.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oNiMXl5GsR"}],"key":"gTDrnRIkan"}],"key":"BUYAQwSMOU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If we want to create a numpy array of all ones, we do it like this:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pq5B7525AU"}],"key":"rVW3xdiMnI"}],"key":"cijpG6ywyE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import numpy as np\nshape = (1000, 4000)\nones_np = np.ones(shape)\nones_np","key":"j6VuSbhk1L"},{"type":"output","id":"Ga2WRME1N3lUdT9vwsxAU","data":[],"key":"X0s4ovBOjR"}],"key":"jo5Ua0qQ3N"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This array contains exactly 32 MB of data:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"s3EFb3Ow5R"}],"key":"EapNWbskQs"}],"key":"dulBzWae0s"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print('%.1f MB' % (ones_np.nbytes / 1e6))","key":"B4OQDjeXmM"},{"type":"output","id":"AlesQXc7g1Lo-Xc9Af134","data":[],"key":"DUnKnkqWd0"}],"key":"FSILskB9sU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now let‚Äôs create the same array using dask‚Äôs array interface.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jf7A9tFT5y"}],"key":"FGKCNqS87K"}],"key":"HvU5TXE2HT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import dask.array as da\nones = da.ones(shape)\nones","key":"NTKjjEK765"},{"type":"output","id":"6_zhEQxkypCt1jYy6tl3v","data":[],"key":"XywCa5Iyki"}],"key":"JQ5ZqYGDWw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This works, but we didn‚Äôt tell Dask how to split up the array, so it is not optimized for distributed computation.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zEWhztdhFG"}],"key":"SrPoQCAQ7j"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A crucial difference with Dask is that we must specify the chunks argument. ‚ÄúChunks‚Äù describes how the array is split up over many sub-arrays.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VNSWA1yUoz"}],"key":"m4vax0vUyv"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"There are several ways to ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mM9yMwcb5M"},{"type":"link","url":"https://docs.dask.org/en/stable/array-chunks.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"specify chunks","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CJ3bqvMi7y"}],"urlSource":"https://docs.dask.org/en/stable/array-chunks.html","key":"mlSmtzowrD"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cb1BUgJHY3"}],"key":"maRsCpuUmU"}],"key":"EOIaP8e3tq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"chunk_shape = (1000, 1000)\nones = da.ones(shape, chunks=chunk_shape)\nones","key":"j7gMf1JwRn"},{"type":"output","id":"y5xPs_x44K4MEZrGeAGrh","data":[],"key":"og6HBL1JER"}],"key":"W6laoVaDCJ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Notice that we just see a symbolic representation of the array, including its shape, dtype, and chunksize. No data has been generated yet. When we call ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QomFCfLSPF"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":".compute()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oao7HHLyEw"}],"key":"TE50ExzFYp"},{"type":"text","value":" on a dask array, the computation is trigger and the dask array becomes a numpy array.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OQIcStzoWB"}],"key":"PrnSiRCSdV"}],"key":"FKKiyWhw09"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ones.compute()","key":"jQvuGWaU2B"},{"type":"output","id":"TB82lAG0se4TWXxwu6nS3","data":[],"key":"NKYKY0bQL6"}],"key":"Q2HQ6HsN9E"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In order to understand what happened when we called .compute(), we can visualize the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K3XHMCiXtQ"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask graph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gdbawgOSwl"}],"key":"STaM26HUef"},{"type":"text","value":", the symbolic operations, that make up the array.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PYsqhXwP3C"}],"key":"lcoMikodxO"}],"key":"N80TvuYnRw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ones.visualize(format='svg')","key":"B2Mpnwh8G5"},{"type":"output","id":"fve4n0vSTP9GVtslsNI6Z","data":[],"key":"e9BKwCfXT5"}],"key":"iAv9b13kEJ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The array has four chunks. To generate it, Dask calls np.ones four times and then concatenates this together into one array.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K50ibq0Qx4"}],"key":"mAbQYjmG4h"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Rather than immediately loading a Dask array (which puts all the data into RAM), it is more common to reduce the data somehow. For example:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NJ6KwP1Pv9"}],"key":"Baj5NymxOF"}],"key":"ieotd2KTiG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sum_of_ones = ones.sum()\nsum_of_ones.visualize(format='svg')","key":"unMALE6gXI"},{"type":"output","id":"ZJujJx06EPN7lJCt8tIEf","data":[],"key":"oFrcq5BPNf"}],"key":"c0o2xlYGiz"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Here we see Dask‚Äôs strategy for finding the sum. This simple example illustrates the beauty of Dask: it automatically designs an algorithm appropriate for custom operations with big data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vK1meJxLzA"}],"key":"g6QdWIZjnl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"If we make our operation more complex, the graph gets more complex.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"k1hohaD2n5"}],"key":"oKudb5Eksj"}],"key":"LCyyTL54MY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fancy_calculation = (ones * ones[::-1, ::-1]).mean()\nfancy_calculation.visualize(format='svg')","key":"fDBb2R5ISp"},{"type":"output","id":"X-gJx--NpwHwFuP3sVjfD","data":[],"key":"NDsk8RpWSz"}],"key":"C7haZv23dy"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"dask.delayed - parallelize generic Python code","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"z1j6IIrIee"}],"identifier":"dask-delayed-parallelize-generic-python-code","label":"dask.delayed - parallelize generic Python code","html_id":"dask-delayed-parallelize-generic-python-code","implicit":true,"key":"vOmxkkDcix"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"What if you don‚Äôt have an Dask array or Dask dataframe? Instead of having blocks where the function is applied to each block, you can decorate functions with ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MbZXRP747Q"},{"type":"inlineCode","value":"@delayed","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"u3ieQpeeK2"},{"type":"text","value":" and ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"aNPv01P65R"},{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"have the functions themselves be lazy","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"FCy4TmkaTZ"}],"key":"RS7OytO8oX"},{"type":"text","value":". Rather than compute its result immediately, it records what needs to be computed as a task into a graph that we‚Äôll run later on parallel hardware.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sH1vABCO6Y"}],"key":"ZHdBcYdUoJ"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"This is a simple way to use Dask to parallelize existing codebases or build ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"raKsaQ4Np3"},{"type":"link","url":"https://blog.dask.org/2018/02/09/credit-models-with-dask","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"complex systems","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"LqC80RNcKX"}],"urlSource":"https://blog.dask.org/2018/02/09/credit-models-with-dask","key":"tT3YpRQmfd"},{"type":"text","value":".","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BfytRu2d88"}],"key":"gUrxGY1ZSI"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Related Documentation","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TyE2DNs311"}],"key":"jvRcs8I4K9"}],"key":"OAqncTvCx0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://docs.dask.org/en/latest/delayed.html","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Delayed documentation","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"BY8W5MueXi"}],"urlSource":"https://docs.dask.org/en/latest/delayed.html","key":"PAic4BZMMH"}],"key":"Fnq6Cn95tF"}],"key":"bM8bq2nOeb"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://www.youtube.com/watch?v=SHqFmynRxVU","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Delayed screencast","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"tXQdiUU0pI"}],"urlSource":"https://www.youtube.com/watch?v=SHqFmynRxVU","key":"kUyrsjRU8S"}],"key":"WfL6eXDxJZ"}],"key":"qHqqOJvrtG"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://docs.dask.org/en/latest/delayed-api.html","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Delayed API","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"J0FApfBiTa"}],"urlSource":"https://docs.dask.org/en/latest/delayed-api.html","key":"JRItn526ri"}],"key":"QGzhFCGwNv"}],"key":"h3sl3FyjvD"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://examples.dask.org/delayed.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Delayed examples","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"C3H8O8vHIG"}],"urlSource":"https://examples.dask.org/delayed.html","key":"NnASm2vIX4"}],"key":"E9M6cbVokM"}],"key":"eppZSF61kp"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://docs.dask.org/en/latest/delayed-best-practices.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Delayed best practices","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"QLWKhCNtzn"}],"urlSource":"https://docs.dask.org/en/latest/delayed-best-practices.html","key":"sQjPzE9gZI"}],"key":"omf8rDZmuj"}],"key":"pGs3ORy3Q8"}],"key":"dPDehqe5v7"}],"key":"KrAHqUTMDw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"A typical workfow Read-Transform-Write workflow are most often implemented as outlined hereafter.\nIn general, most workflows containing a for-loop can benefit from dask.delayed.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zIMTDVTKou"}],"key":"L1km2YNK2W"},{"type":"code","lang":"python","value":"import dask\n    \n@dask.delayed\ndef process_file(filename):\n    data = read_a_file(filename)\n    data = do_a_transformation(data)\n    destination = f\"results/{filename}\"\n    write_out_data(data, destination)\n    return destination\n\nresults = []\nfor filename in filenames:\n    results.append(process_file(filename))\n    \ndask.compute(results)","position":{"start":{"line":3,"column":1},"end":{"line":19,"column":1}},"key":"xYolQYDmMl"}],"key":"CKUNjsBBts"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"dask.delayed - Example","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TxPd9xT61x"}],"identifier":"dask-delayed-example","label":"dask.delayed - Example","html_id":"dask-delayed-example","implicit":true,"key":"AxKuxNJpe8"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"For demonstration purposes we will create simple functions to perform simple operations like add two numbers together, but they sleep for a random amount of time to simulate real work.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MFa9ZJpMMh"}],"key":"LSGSkWeiw8"}],"key":"wEEjJ8R194"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import time\n\ndef inc(x):\n    time.sleep(0.1)\n    return x + 1\n\ndef dec(x):\n    time.sleep(0.1)\n    return x - 1\n\ndef add(x, y):\n    time.sleep(0.2)\n    return x + y","key":"nnVH5mZI2u"},{"type":"output","id":"D7hGKvmG2EtCpvSz6sa3B","data":[],"key":"cEANVEcr0Z"}],"key":"cI0eBI67qM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can run them like normal Python functions below","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aX4F4rtMLB"}],"key":"vtRWLNmAml"}],"key":"tKBqREyHas"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nx = inc(1)\ny = dec(2)\nz = add(x, y)\nz","key":"xIAoZBk08O"},{"type":"output","id":"qCKc78jiQUPPu0Sf-req0","data":[],"key":"DP4gJqcKoK"}],"key":"bp4It9p1bp"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"These ran one after the other, in sequence. Note though that the first two lines inc(1) and dec(2) don‚Äôt depend on each other, we could have called them in parallel.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kxZrcF6Wry"}],"key":"dimF0F0YLt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We can call dask.delayed on these funtions to make them lazy. Rather than compute their results immediately, they record what we want to compute as a task into a graph that we‚Äôll run later on parallel hardware.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cUQzTeMPn4"}],"key":"PKopLpMzyz"}],"key":"ykIgZermRr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import dask\ninc = dask.delayed(inc)\ndec = dask.delayed(dec)\nadd = dask.delayed(add)","key":"gPNT9eBO1j"},{"type":"output","id":"JoMnbIQVbDq79iaxuymKW","data":[],"key":"tSLiy8xPAl"}],"key":"JYVXpih4Vt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calling these lazy functions is now almost free. We‚Äôre just constructing a graph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dMpoM2i3HO"}],"key":"GA4bcOeqxS"}],"key":"RpAkHwpsHW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nx = inc(1)\ny = dec(2)\nz = add(x, y)\nz","key":"dGiZk8vuIq"},{"type":"output","id":"o-rPsyLN8MUDBS64UtIP3","data":[],"key":"rpf15gYAWO"}],"key":"pAvjt62gGx"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualize computation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hY3rUAjusQ"}],"key":"t51HmtBjFj"}],"key":"eI3Dzem6je"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"z.visualize(format='svg', rankdir='LR')","key":"yW3d0adwP7"},{"type":"output","id":"UDyLJNc9X05WDKjpojXFc","data":[],"key":"oYkL3DJ2XS"}],"key":"Bd4mJqoYMv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Run in parallel. Call .compute() when you want your result as a normal Python object","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jln6VGieWo"}],"key":"nK4qqi6ARa"}],"key":"JH4HHo89CS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nz.compute()","key":"jqEDiHCYqz"},{"type":"output","id":"DSxeIHZz_1aAhmXaINwZd","data":[],"key":"NurdUUx8mL"}],"key":"jAd3DigKRO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Parallelize Normal Python code","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p23B3mdVBE"}],"key":"yVXcLXmwrj"}],"key":"Jx8JJP6Wrc"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we use dask.delayed in a normal for-loop Python code as given in the example above. This generates graphs instead of doing computations directly, but still looks like the code we had before. Dask is a convenient way to add parallelism to existing workflows.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nZ48PFcDIl"}],"key":"q4R2avWI00"}],"key":"Lm6xMtB8Zk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nzs = []\nfor i in range(256):\n    x = inc(i)\n    y = dec(x)\n    z = add(x, y)\n    zs.append(z)\n\nzs = dask.persist(*zs)   # trigger computation in the background","key":"jJUTT1dJTL"},{"type":"output","id":"Tm9EbMe8emPZPYvEkePL2","data":[],"key":"PmGH13TdR6"}],"key":"tWvMKtCxh9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask Cluster (dask.distributed)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Av0vwsZbjp"}],"identifier":"dask-cluster-dask-distributed","label":"Dask Cluster (dask.distributed)","html_id":"dask-cluster-dask-distributed","implicit":true,"key":"D7HiIDz3Ra"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask has the ability to run work on multiple machines using the distributed scheduler. ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YsErAlXv9d"},{"type":"inlineCode","value":"dask.distributed","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CAk77dg4cy"},{"type":"text","value":" is a lightweight library for distributed computing in Python. It extends both the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JsCVol5YPV"},{"type":"inlineCode","value":"concurrent.futures","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PfkgDeje7q"},{"type":"text","value":" and Dask APIs to run on various clusters technologies such as Kubernetes, Yarn, SLURM, PBS, etc. .\nMost of the times when you are using Dask, you will be using a distributed scheduler, which exists in the context of a Dask cluster. When we talk about Dask Clusters we can think of those as depicted in the following:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"npqt8wNeJm"}],"key":"YqKyxPvIOE"},{"type":"paragraph","children":[{"type":"image","url":"/build/7445a9f1307deaa4760238b8ed4d85c3.png","alt":"Distributed overview","width":"75%","key":"vTfIa874Dr","urlSource":"https://tutorial.dask.org/_images/distributed-overview.png"}],"key":"YXBpBhbfSB"}],"key":"iTJdxScJ6w"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask @ DEDL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qs2uBAoV1y"}],"identifier":"dask-dedl","label":"Dask @ DEDL","html_id":"dask-dedl","implicit":true,"key":"qklVCZId77"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"DestinE Data Lake utilises a deployment of ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b4F2lWHrKT"},{"type":"link","url":"https://gateway.dask.org/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Dask Gateway","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"e3JoOHqAEE"}],"urlSource":"https://gateway.dask.org/","key":"qq4JtdxcWg"},{"type":"text","value":" on each location (bridge) in the data lake. Dask Gateway provides a secure, multi-tenant server for managing Dask clusters. It allows users to launch and use Dask clusters in a shared, centrally managed cluster environment, without requiring users to have direct access to the underlying cluster backend (e.g. Kubernetes, Hadoop/YARN, HPC Job queues, etc‚Ä¶).","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"lAJyBsnoik"}],"key":"lfHZ9wepfe"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Dask Gateway exposes a REST API to spawn clusters on demand. The overall architecture of Dask Gateway is depicted hereafter.\n","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VntAWxJNE2"},{"type":"image","url":"/build/04cc7514c92f1ae43e3b621d7cc0a124.svg","key":"BuzhhjCuqg","urlSource":"https://gateway.dask.org/_images/architecture.svg"}],"key":"M66e4Qhlly"},{"type":"heading","depth":3,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"How to connect and spawn a cluster?","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"r27dIFSZGb"}],"identifier":"how-to-connect-and-spawn-a-cluster","label":"How to connect and spawn a cluster?","html_id":"how-to-connect-and-spawn-a-cluster","implicit":true,"key":"bqaxCY3c16"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Central Site","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LjH7PuBlSA"}],"key":"J0OK5Pe0F0"}],"key":"VVKSpIrrkC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"address: ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"YpVtTLMiGU"},{"type":"link","url":"http://dask.central.data.destination-earth.eu","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"http://‚Äãdask‚Äã.central‚Äã.data‚Äã.destination‚Äã-earth‚Äã.eu","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"GvorfTV5O0"}],"urlSource":"http://dask.central.data.destination-earth.eu","key":"GeoBGSUPS6"}],"key":"suOnM6vNBY"}],"key":"sGdZB943Y4"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"proxy_address: tcp://dask.central.data.destination-earth.eu:80","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NO8wuSwk18"}],"key":"dLCyUlaRLi"}],"key":"i5WHqf7xX1"}],"key":"VNLLZRMbEo"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"LUMI Bridge","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"wUxBPxWoFu"}],"key":"Z2Q2ikgnIS"}],"key":"fm2p8setyH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"address: ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"EQu0o1QqW7"},{"type":"link","url":"http://dask.lumi.data.destination-earth.eu","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"http://‚Äãdask‚Äã.lumi‚Äã.data‚Äã.destination‚Äã-earth‚Äã.eu","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"smfkc7G4So"}],"urlSource":"http://dask.lumi.data.destination-earth.eu","key":"m5A7y77Kcx"}],"key":"GcxqK3WDKl"}],"key":"Rdje9AhDxw"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"proxy_address: tcp://dask.lumi.data.destination-earth.eu:80","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"HKSZHdK8TP"}],"key":"ppmfi08Jav"}],"key":"RfJZzvxWxs"}],"key":"SczSGEsBLx"}],"key":"A5THJxRIre"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from dask_gateway.auth import GatewayAuth\nfrom getpass import getpass\nfrom destinelab import AuthHandler as DESP_AuthHandler\n\nclass DESPAuth(GatewayAuth):\n    def __init__(self, username: str):\n        self.auth_handler = DESP_AuthHandler(username, getpass(\"Please input your DESP password: \"))\n        self.access_token = self.auth_handler.get_token()\n    \n    def pre_request(self, _):\n        headers = {\"Authorization\": \"Bearer \" + self.access_token}\n        return headers, None","visibility":"show","key":"mUiSOIrI5u"},{"type":"output","id":"OF3WFJzy7TAoqj7RdviTe","data":[],"visibility":"show","key":"FmtbM21ipX"}],"visibility":"show","key":"TELz0gxN8H"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Only authenticated access is granted to the DEDL STACK service Dask, therefore a helper class to authenticate a user against the DESP identity management system is implemented. The users password is directly handed over to the request object and is not permanently stored.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W2YV2JvVL3"}],"key":"En1wQHsq3H"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following, please enter your DESP username and password. Again, the password will only be saved for the duration of this user session and will be remove as soon as the notebook/kernel is closed.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"s8olgiamue"}],"key":"Objbnehfpx"}],"key":"kc2mpr09xZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from rich.prompt import Prompt\nmyAuth = DESPAuth(username=Prompt.ask(prompt=\"Username\"))","visibility":"show","key":"dQoH09wpt8"},{"type":"output","id":"VyuyhOvQObyjFrRR97ns3","data":[],"visibility":"show","key":"H8wI55nZjG"}],"visibility":"show","key":"MhBuQ6KJ5d"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from dask_gateway import Gateway\ngateway = Gateway(address=\"http://dask.central.data.destination-earth.eu\",\n                  proxy_address=\"tcp://dask.central.data.destination-earth.eu:80\",\n                  auth=myAuth)","visibility":"show","key":"uVzQARVYsV"},{"type":"output","id":"jMq7_rEvA_l8Bssu-3fbR","data":[],"visibility":"show","key":"UjdJUC51Kg"}],"visibility":"show","key":"IC8NnF3dfO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Cluster creation and client instantiation to communicate with the new cluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J5jECGWjSg"}],"key":"fsiiAM1joM"}],"key":"KLv3BH5sP0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cluster = gateway.new_cluster()\nclient = cluster.get_client()\ncluster","visibility":"show","key":"f1ybCE1qwA"},{"type":"output","id":"UQxqlV4t5Zs2lQTqWsHbD","data":[],"visibility":"show","key":"viOKSu2nv6"}],"visibility":"show","key":"vDr8v9RYmu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Up to now the cluster will only consist of the distributed scheduler. If you want to spawn workers directly via Python adaptively, please use the following method call. With the following the cluster will be scaled to 2 workers initially. Depending on the load, Dask will add addtional workers, up to 5, if needed.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"txs2O4gchL"}],"key":"Iu9mJAljQK"}],"key":"ptojhGPwGF"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cluster.adapt(minimum=2, maximum=5)","visibility":"show","key":"VlchN17KnS"},{"type":"output","id":"pUPQ-YW9hLzaiNClAM1Yk","data":[],"visibility":"show","key":"LHsAxmNQUb"}],"visibility":"show","key":"uPxP9TGHB4"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"dask.futures - non-blocking distributed calculations","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PB1dJAH92f"}],"identifier":"dask-futures-non-blocking-distributed-calculations","label":"dask.futures - non-blocking distributed calculations","html_id":"dask-futures-non-blocking-distributed-calculations","implicit":true,"key":"PEexPMouri"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We will now make use of the remote Dask Cluster using the Dask low-level collection dask.futures.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"lAiv3rs2re"}],"key":"tofxJ5c6wT"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Submit arbitrary functions for computation in a parallelized, eager, and non-blocking way.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"PDa1lR4l0n"}],"key":"Ude8Xc5eLX"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"A6HSr1dLPP"},{"type":"inlineCode","value":"futures","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Ej9xNQucGY"},{"type":"text","value":" interface (derived from the built-in ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zpf7mzhHvG"},{"type":"inlineCode","value":"concurrent.futures","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"utEKDwZ4Rr"},{"type":"text","value":") provide fine-grained real-time execution for custom situations. We can submit individual functions for evaluation with one set of inputs, or evaluated over a sequence of inputs with ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"wXUvJ45evL"},{"type":"inlineCode","value":"submit()","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jzxI5YWEPy"},{"type":"text","value":" and ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gWs7cuqVG3"},{"type":"inlineCode","value":"map()","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"x8kyL8vg78"},{"type":"text","value":". The call returns immediately, giving one or more ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"syOUdw03cj"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"futures","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cka86nljFb"}],"key":"mOjet990ih"},{"type":"text","value":", whose status begins as ‚Äúpending‚Äù and later becomes ‚Äúfinished‚Äù. There is no blocking of the local Python session.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fxd2obBRl3"}],"key":"lnvpY3kMAH"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Important","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yBF8twubtg"}],"key":"DwFC4zolH2"}],"key":"Xp3pC0IlQx"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"This is the important difference between futures and delayed. Both can be used to support arbitrary task scheduling, but delayed is lazy (it just constructs a graph) whereas futures are eager. With futures, as soon as the inputs are available and there is compute available, the computation starts.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"UOxoMymfl9"}],"key":"vLPWeFYUyW"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Related Documentation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"EizFTjWVyI"}],"key":"iV8nKDDDTA"}],"key":"IQoi47Z21X"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://docs.dask.org/en/latest/futures.html","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Futures documentation","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"HqWO7onQgB"}],"urlSource":"https://docs.dask.org/en/latest/futures.html","key":"qLhtDsUvtx"}],"key":"GAa3jiALT3"}],"key":"Lu6skmz09p"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://www.youtube.com/watch?v=07EiCpdhtDE","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Futures screencast","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"UIXrwMHRtk"}],"urlSource":"https://www.youtube.com/watch?v=07EiCpdhtDE","key":"EM3MyGq2hN"}],"key":"ddbu0pDe1B"}],"key":"ZQlUEX14Ay"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://examples.dask.org/futures.html","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Futures examples","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"DNjPnguorH"}],"urlSource":"https://examples.dask.org/futures.html","key":"zD4Orl8qQP"}],"key":"DTLT5FdGMI"}],"key":"nyvyGlSUXW"}],"key":"sUabx65d3p"}],"visibility":"show","key":"gRFxfMwBOx"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This is the same workflow that as given above in the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BcH0Tmm8mW"},{"type":"inlineCode","value":"dask.delayed","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YgrufNUrZw"},{"type":"text","value":" section. It is a for-loop to iterate of certain files to perform a transformation and to write the result.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yRUMBgQfE9"}],"key":"OnJewBR4wA"},{"type":"code","lang":"python","value":"def process_file(filename):\n    data = read_a_file(filename)\n    data = do_a_transformation(data)\n    destination = f\"results/{filename}\"\n    write_out_data(data, destination)\n    return destination\n\nfutures = []\nfor filename in filenames:\n    future = client.submit(process_file, filename)\n    futures.append(future)\n    \nfutures","position":{"start":{"line":3,"column":1},"end":{"line":17,"column":1}},"key":"Xix8SOHqfH"}],"key":"K3K1hDydZ9"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from time import sleep\n\n\ndef inc(x):\n    sleep(1)\n    return x + 1","visibility":"show","key":"d1GU94bXKi"},{"type":"output","id":"y_JMwpOpxU75VC1wT4DHj","data":[],"visibility":"show","key":"o7JGjqP3ep"}],"visibility":"show","key":"zTKGkMrV3O"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can run these function locally","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eDs3gvKR5u"}],"key":"W8PDpXH1Yi"}],"key":"EltJhzDqy1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"inc(1)","visibility":"show","key":"sk5sCtYzYA"},{"type":"output","id":"uZBqz51TEFziIDhQydgHK","data":[],"visibility":"show","key":"ERvuA5Z6FG"}],"visibility":"show","key":"xLh0lgP0gl"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Or we can submit them to run remotely with Dask. This immediately returns a future that points to the ongoing computation, and eventually to the stored result.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"flXU3GhfTw"}],"key":"OOWEY7Tsrl"}],"key":"qW1XwtuZou"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"future = client.submit(inc, 1)  # returns immediately with pending future\nfuture","visibility":"show","key":"zmi4isQ1W5"},{"type":"output","id":"7EwbCDBuc1VM3TaR0wx1I","data":[],"visibility":"show","key":"Dke8jWjxz1"}],"visibility":"show","key":"V0kBTpj2W7"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you wait a second, and then check on the future again, you‚Äôll see that it has finished.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KmQm3zvFH3"}],"key":"ujwKc1RNKy"}],"key":"faMkHCJCZ2"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"future","visibility":"show","key":"cSXzMAy46n"},{"type":"output","id":"DC3f3o2L1huh_sPc1Lreb","data":[],"visibility":"show","key":"wbID704UUD"}],"visibility":"show","key":"t6u1UeI47b"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"You can block on the computation and gather the result with the .result() method.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UogJPTXCBz"}],"key":"O5UfVLjRTC"}],"key":"iXXWqct6Xv"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"future.result()","visibility":"show","key":"qt1WtaHUQF"},{"type":"output","id":"RIcVpurbrVHALC-e8lD_R","data":[],"visibility":"show","key":"fhER7V6vH0"}],"visibility":"show","key":"AJPIFBTC0q"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other ways to wait for a future","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yTgtABjbfN"}],"key":"pYQ3YtGqT2"}],"key":"MpgwpiUOwQ"},{"type":"code","lang":"python","value":"from dask.distributed import wait, progress\nprogress(future)","position":{"start":{"line":2,"column":1},"end":{"line":5,"column":1}},"key":"jYxu5e4ToK"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"shows a progress bar in the notebook. This progress bar is also asynchronous, and doesn‚Äôt block the execution of other code in the meanwhile.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"mVpMvQ2XJR"}],"key":"Mybaa2R8F0"},{"type":"code","lang":"python","value":"wait(future)","position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"key":"E3j3Ryof6L"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"blocks and forces the notebook to wait until the computation pointed to by ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"aro5tuXEtH"},{"type":"inlineCode","value":"future","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"HrDQfLkePI"},{"type":"text","value":" is done. However, note that if the result of ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"rKCHXnHYV1"},{"type":"inlineCode","value":"inc()","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"bxDaVaOVac"},{"type":"text","value":" is sitting in the cluster, it would take ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"daBLs4YJUZ"},{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"no time","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GeYdHNYBKG"}],"key":"nTYF4HzkGU"},{"type":"text","value":" to execute the computation now, because Dask notices that we are asking for the result of a computation it already knows about. More on this later.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Z8IXm7y8kP"}],"key":"VwO6GgMrCd"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Other ways to gather results","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"mLYKQkziEd"}],"key":"tvTSir2XZr"}],"key":"fhM8vbKlXN"},{"type":"code","lang":"python","value":"client.gather(futures)","position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"key":"Y4oKGNUwwT"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"gathers results from more than one future.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"jtSuI3ZjGX"}],"key":"lxytOCXjHt"}],"key":"XBsrqGEy8Z"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from dask.distributed import wait, progress\ndef inc(x):\n    sleep(1)\n    return x + 1\n\n\nfuture_x = client.submit(inc, 1)\nfuture_y = client.submit(inc, 2)\nfuture_z = client.submit(sum, [future_x, future_y])\nprogress(future_z)","visibility":"show","key":"eaHz5pXysC"},{"type":"output","id":"OQyZuW1URwX2-EtRcCN8a","data":[],"visibility":"show","key":"X4CUzTKweQ"}],"visibility":"show","key":"K78KrEEy80"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert-warning","children":[{"type":"text","value":"Remove your cluster again to free up resources when you are done.","key":"DA7QIUoqNi"}],"key":"wgVL2frMRl"}],"key":"N0ocpAuA50"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cluster.close(shutdown=True)","visibility":"show","key":"Cloi5HDUQO"},{"type":"output","id":"hcc_H4IMDdBu5egyLq964","data":[],"visibility":"show","key":"akHzEZq1E2"}],"visibility":"show","key":"I9CDeRyy40"}],"key":"kxhHD2LOu4"},"references":{"cite":{"order":[],"data":{}}},"footer":{},"domain":"http://localhost:3001"},"project":{"title":"DEDL Notebook Gallery","toc":[{"file":"index.md"},{"file":"contribute.md","title":"contribute"},{"children":[{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.METOP.AVHRRL1.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MSG-1.5.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.MTG.ipynb","hidden":true},{"file":"production/HDA/EUM_data/DEDL-HDA-EO.EUM.DAT.SENTINEL-3.OL_1_ERR___.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ExtractLocationValues.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ClimateDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES-Series.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-ParameterPlotter.ipynb","hidden":true},{"file":"production/HDA/DestinE_Digital_Twins/ExtremeDT-dataAvailability.ipynb","hidden":true},{"file":"production/HDA/CDS_data/DEDL-HDA-EO.ECMWF.DAT.REANALYSIS_ERA5_SINGLE_LEVELS.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-1.L1_GRD.ipynb","hidden":true},{"file":"production/HDA/REST/DEDL-HDA-EO.ESA.DAT.SENTINEL-2.MSI.L2A.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-Queryables.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-full-version.ipynb","hidden":true},{"file":"production/HDA/REST/HDA-REST-quick-start.ipynb","hidden":true},{"file":"production/HDA/PySTAC/HDA-PyStac-Client.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-full-version.ipynb","hidden":true},{"file":"production/HDA/EODAG/HDA-EODAG-quick-start.ipynb","hidden":true}],"file":"galleries/HDA.md","title":"HDA"},{"children":[{"file":"production/HOOK/DEDL-Hook_access.ipynb","hidden":true},{"file":"production/HOOK/DEDL-Hook_data_harvest.ipynb","hidden":true},{"file":"production/HOOK/Tutorial.ipynb","hidden":true}],"file":"galleries/HOOK.md","title":"HOOK"},{"children":[{"file":"production/STACK/DEDL_StackService_Dask.ipynb","hidden":true},{"file":"production/STACK/STACK-Dask-101.ipynb","hidden":true},{"file":"production/STACK/STACK-Python-Client-Dask.ipynb","hidden":true}],"file":"galleries/STACK.md","title":"STACK"},{"file":"galleries_by_tag/tag-access-token.md","hidden":true},{"file":"galleries_by_tag/tag-authentication.md","hidden":true},{"file":"galleries_by_tag/tag-avhrr.md","hidden":true},{"file":"galleries_by_tag/tag-c3s.md","hidden":true},{"file":"galleries_by_tag/tag-cluster.md","hidden":true},{"file":"galleries_by_tag/tag-core-api.md","hidden":true},{"file":"galleries_by_tag/tag-dask.md","hidden":true},{"file":"galleries_by_tag/tag-digital-twin.md","hidden":true},{"file":"galleries_by_tag/tag-earthkit.md","hidden":true},{"file":"galleries_by_tag/tag-ecmwf.md","hidden":true},{"file":"galleries_by_tag/tag-eodag.md","hidden":true},{"file":"galleries_by_tag/tag-gfm.md","hidden":true},{"file":"galleries_by_tag/tag-hda.md","hidden":true},{"file":"galleries_by_tag/tag-hook.md","hidden":true},{"file":"galleries_by_tag/tag-http-requests.md","hidden":true},{"file":"galleries_by_tag/tag-metop.md","hidden":true},{"file":"galleries_by_tag/tag-olci.md","hidden":true},{"file":"galleries_by_tag/tag-pyaviso.md","hidden":true},{"file":"galleries_by_tag/tag-satpy.md","hidden":true},{"file":"galleries_by_tag/tag-sentinel-3.md","hidden":true},{"file":"galleries_by_tag/tag-seviri.md","hidden":true},{"file":"galleries_by_tag/tag-stac.md","hidden":true},{"file":"galleries_by_tag/tag-stack.md","hidden":true},{"file":"galleries_by_tag/tag-storage.md","hidden":true},{"file":"galleries_by_tag/tag-token.md","hidden":true},{"file":"galleries_by_tag/tag-workflow.md","hidden":true}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"contribute","title":"Contribute to the Gallery","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hda","title":"HDA Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"hook","title":"HOOK Gallery","description":"","date":"","thumbnail":"/build/EUMETSAT-icon-5622ee4581d60335c28e91839e666bbf.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stack","title":"STACK Gallery","description":"","date":"","thumbnail":"/build/dask-55232318e36306007797c96fb8ae0744.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-B2B2E6A5.js";
import * as route0 from "/build/root-IB5726YR.js";
import * as route1 from "/build/routes/$-LXLHKVOR.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>