{"version":2,"kind":"Notebook","sha256":"ab2ddccab1311cc4fa3d3756a3afe26372429c640922b29d951cd41f26b2633b","slug":"dedl-hda-eo-ecmwf-dat-dt-extremes","location":"/production/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","dependencies":[],"frontmatter":{"title":"Weather-Induced Extremes - Data Access using DEDL HDA","subtitle":"This notebook demonstrates how to access and download sea ice coverage data from the Weather-Induced Extremes Digital Twin using the DestinE Data Lake Harmonised Data Access (DEDL HDA) API, including authentication, filtering, polling, and visualizing the result on a map.","tags":["HDA","ECMWF","earthkit","Digital Twin"],"copyright":"Â© 2025 EUMETSAT","authors":[{"id":"Micheal Schick (EUMETSAT), Serena Avolio (EUMETSAT/Starion)","name":"Micheal Schick (EUMETSAT), Serena Avolio (EUMETSAT/Starion)"}],"license":{"content":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"thumbnail":"/myst_assets_folder../../img/ECMWF.png","kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","url":"/build/DEDL-HDA-EO.ECMWF.DA-212edbcf630094b871e6e4daef69913e.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"margin":"6px 0"},"children":[{"type":"link","style":{"textDecoration":"none"},"url":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/HDA/DestinE%20Digital%20Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","children":[{"type":"span","class":"launch","children":[{"type":"text","value":"ðŸš€ Launch in JupyterHub","key":"CsN5ZrXzfw"}],"key":"u85Lx2dDXq"}],"urlSource":"https://jupyter.central.data.destination-earth.eu/user-redirect/lab/tree/DestinE-DataLake-Lab/HDA/DestinE%20Digital%20Twins/DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb","key":"T1cMoftJ4D"}],"key":"yOP2gwDeTK"}],"key":"wnYu5wlJH7"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-block alert-warning","children":[{"type":"strong","children":[{"type":"text","value":"Prerequisites:","key":"EmK3UQsmIb"}],"key":"lff13XvFlT"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To search and access DEDL data a ","key":"dgg6pywWdZ"},{"type":"link","url":"https://platform.destine.eu/","children":[{"type":"text","value":"DestinE user account","key":"SRf5yh0ZPQ"}],"urlSource":"https://platform.destine.eu/","key":"XIjJRgyQur"},{"type":"text","value":" is needed","key":"ee6bd0pA7L"}],"key":"VF1Bd2vgPK"}],"key":"l5LqJ5fmgL"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To search and access DT data an ","key":"zFv3CrPAwf"},{"type":"link","url":"https://platform.destine.eu/support-pages/access-policy/","children":[{"type":"text","value":"upgraded access","key":"aiPKwvifbY"}],"urlSource":"https://platform.destine.eu/support-pages/access-policy/","key":"G27tHOUZjb"},{"type":"text","value":" is needed.","key":"QZqJaCRpay"}],"key":"Rod4DSr2CP"}],"key":"w9Dlwowqpd"}],"key":"k6yacMLMP1"},{"type":"strong","children":[{"type":"text","value":"References:","key":"sViLWkiAG4"}],"key":"a7pnatKpiO"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","url":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-discovery-and-data-access/Use-of-Harmonized-Data-Access/Use-of-Harmonized-Data-Access.html","children":[{"type":"text","value":"DestinE Data Lake (DEDL) Harmonized Data Access (HDA) documentation","key":"xKjVSp5OLH"}],"urlSource":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-discovery-and-data-access/Use-of-Harmonized-Data-Access/Use-of-Harmonized-Data-Access.html","key":"Y1kxl1v7BQ"}],"key":"vV4pe4LX3X"}],"key":"Vj2ypZ4XpE"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","url":"https://destine.ecmwf.int/weather-induced-extremes-digital-twin-1/","children":[{"type":"text","value":"Weather-Induced Extremes Digital Twin (Extremes DT)","key":"Llm1mXrthK"}],"urlSource":"https://destine.ecmwf.int/weather-induced-extremes-digital-twin-1/","key":"gAQ5Uik0Mn"}],"key":"B6J8S5m1QG"}],"key":"Ak5WcZ6gwf"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","url":"https://confluence.ecmwf.int/display/DDCZ/Extremes+DT+data+catalogue","children":[{"type":"text","value":"Extreme DT data catalogue","key":"GNHUF6TfZZ"}],"urlSource":"https://confluence.ecmwf.int/display/DDCZ/Extremes+DT+data+catalogue","key":"yUkOodlR2B"}],"key":"GGTqo6KMtk"}],"key":"etQg9ipPDR"}],"key":"gwJlsadEMl"},{"type":"strong","children":[{"type":"text","value":"Credit:","key":"mSLkrhYF1S"}],"key":"YM6czYzkgR"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Earthkit and HDA Polytope used in this context are both packages provided by the European Centre for Medium-Range Weather Forecasts (ECMWF).","key":"lm2dmqukF3"}],"key":"QQwGLY1cJl"}],"key":"rzgLxXTqzt"}],"key":"XKd1ZcCrzr"}],"key":"YMARhEqa7b"}],"key":"zd74eInMMM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook demonstrates how to use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"asUqalnDTS"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HDA (Harmonized Data Access)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"V6YyRHg6cL"}],"key":"ByKmBKgeou"},{"type":"text","value":" API to query and access Extremes DT data to plot a parameter.\nBelow the main steps covered by this tutorial.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pW9dTKmW7N"}],"key":"vBrTlH8YCU"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Setup","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"kgv8styug1"}],"identifier":"dedl-hda-eo.ecmwf.dat.dt_extremes.ipynb-setup","label":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb-Setup","kind":"heading","template":"{name}","resolved":true,"html_id":"dedl-hda-eo-ecmwf-dat-dt-extremes-ipynb-setup","key":"JsGCjA1Fdz"},{"type":"text","value":": Import the required libraries.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"o0MWBrjyh9"}],"key":"TRuYseDzvP"}],"key":"riGaOt3mDO"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Order and Download","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EKc0IWcS3A"}],"identifier":"dedl-hda-eo.ecmwf.dat.dt_extremes.ipynb-order-and-download","label":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb-Order-and-Download","kind":"heading","template":"{name}","resolved":true,"html_id":"dedl-hda-eo-ecmwf-dat-dt-extremes-ipynb-order-and-download","key":"RHbk9wjfGN"},{"type":"text","value":": How to filter and download Extremes DT data.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Io36xGXDeI"}],"key":"NQjlfO1A8v"}],"key":"UNUBA7SJyO"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Plot","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"nUTs3QusT3"}],"identifier":"dedl-hda-eo.ecmwf.dat.dt_extremes.ipynb-render-the-sea-ice-coverage-on-a-map","label":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb-Render-the-sea-ice-coverage-on-a-map","kind":"heading","template":"{name}","resolved":true,"html_id":"dedl-hda-eo-ecmwf-dat-dt-extremes-ipynb-render-the-sea-ice-coverage-on-a-map","key":"mOrRdGbhsW"},{"type":"text","value":": How to visualize sea ice coverage on a map.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"IoMLBa9btV"}],"key":"LB3bwz45oh"}],"key":"LsQr3bbcBd"}],"key":"BrGZ2ueo4A"}],"key":"ceTdzXtRsY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Setup","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kUPnRbhdJD"}],"label":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb-Setup","identifier":"dedl-hda-eo.ecmwf.dat.dt_extremes.ipynb-setup","html_id":"dedl-hda-eo-ecmwf-dat-dt-extremes-ipynb-setup","key":"CzZjbstayu"}],"key":"ewFJEbdoMo"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Import all the required packages.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"D4tnmUDcwU"}],"key":"lGe4lSagId"}],"visibility":"show","key":"dcqvKZ001n"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import destinelab as deauth\nimport json\nimport datetime\nimport importlib.metadata\n\nimport requests\nfrom requests.adapters import HTTPAdapter\nfrom urllib3.util.retry import Retry\nimport os\nfrom getpass import getpass\nfrom tqdm import tqdm\nimport time\nfrom datetime import datetime\nfrom urllib.parse import unquote\nfrom time import sleep\nfrom IPython.display import JSON\nimport ipywidgets as widgets","visibility":"show","key":"tJHETDfeVw"},{"type":"output","id":"0IYHUeG-HwPIFJpUEozkt","data":[],"visibility":"show","key":"qlQgShBlGh"}],"visibility":"show","key":"wI9ObklPbG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Order and Download","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"iMyvp9obsw"}],"label":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb-Order-and-Download","identifier":"dedl-hda-eo.ecmwf.dat.dt_extremes.ipynb-order-and-download","html_id":"dedl-hda-eo-ecmwf-dat-dt-extremes-ipynb-order-and-download","key":"eRadkI3Jfg"}],"key":"V6s3tb4lVd"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Obtain Authentication Token","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RPoc0Adx1X"}],"identifier":"obtain-authentication-token","label":"Obtain Authentication Token","html_id":"obtain-authentication-token","implicit":true,"key":"uesqV5rTZu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To access data we need to be authenticated.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XspYbxHX02"}],"key":"dWbvkofmKB"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Below how to request of an authentication token using the destinelab package.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VvdrxBsGcj"}],"key":"dbyJY2UMTP"}],"visibility":"show","key":"gk9O5MZC08"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"DESP_USERNAME = input(\"Please input your DESP username or email: \")\nDESP_PASSWORD = getpass(\"Please input your DESP password: \")\n\nauth = deauth.AuthHandler(DESP_USERNAME, DESP_PASSWORD)\naccess_token = auth.get_token()\nif access_token is not None:\n    print(\"DEDL/DESP Access Token Obtained Successfully\")\nelse:\n    print(\"Failed to Obtain DEDL/DESP Access Token\")\n\nauth_headers = {\"Authorization\": f\"Bearer {access_token}\"}","visibility":"show","key":"JCSjL6ZFSg"},{"type":"output","id":"LFTDhIIrI8673zTJUtUsF","data":[{"name":"stdout","output_type":"stream","text":"Please input your DESP username or email:  eum-dedl-user\nPlease input your DESP password:  Â·Â·Â·Â·Â·Â·Â·Â·\n"},{"name":"stdout","output_type":"stream","text":"Response code: 200\nDEDL/DESP Access Token Obtained Successfully\n"}],"visibility":"show","key":"mwoGKYJHZC"}],"visibility":"show","key":"FmacmIi0bB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check if DT access is granted","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RIEF6Z5jsm"}],"identifier":"check-if-dt-access-is-granted","label":"Check if DT access is granted","html_id":"check-if-dt-access-is-granted","implicit":true,"key":"rkPPT5M8rR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"If DT access is not granted, you will not be able to execute the rest of the notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"k0ahM981hj"}],"key":"UCoqmBh0R4"}],"key":"wQ0YyjPTmC"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"installed_version = importlib.metadata.version(\"destinelab\")\nversion_number = installed_version.split('.')[1]\nif((int(version_number) >= 8 and float(installed_version) < 1) or float(installed_version) >= 1):\n    auth.is_DTaccess_allowed(access_token)","visibility":"show","key":"emoeLQxqK3"},{"type":"output","id":"fyjZFbd2ClfgMmaU0BOV7","data":[{"name":"stdout","output_type":"stream","text":"DT Output access allowed\n"}],"visibility":"show","key":"YYfbMNvg4X"}],"visibility":"show","key":"Oo0skFA5f3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HDA Endpoint","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r2Mmin5tO9"}],"identifier":"hda-endpoint","label":"HDA Endpoint","html_id":"hda-endpoint","implicit":true,"key":"mdj60HGtxC"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"HDA API is based on the Spatio Temporal Asset Catalog specification (STAC), it is convenient define a costant with its endpoint.\nAnd another one with the ID of the Cliamte DT collection.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"q5FHZ5trlZ"}],"key":"cFeCqkbM79"}],"key":"BrkPSiFoJ1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDA_STAC_ENDPOINT=\"https://hda.data.destination-earth.eu/stac/v2\"\nCOLLECTION_ID=\"EO.ECMWF.DAT.DT_EXTREMES\"","visibility":"show","key":"WukZ0L5z7N"},{"type":"output","id":"lZiI_-mVok53YKmKRTFPy","data":[],"visibility":"show","key":"suBVHIIHfU"}],"visibility":"show","key":"t2BL1XQr96"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Order and download data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ww6J4vFG30"}],"identifier":"order-and-download-data","label":"Order and download data","html_id":"order-and-download-data","implicit":true,"key":"qYv2OpxT9a"}],"key":"HP1O91x7aW"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Weather-Induced Extremes Digital Twin collection, as well as all the ECMWF datasets, in the DestinE Data Lake requires an ordering workflow.\nThe ordering workflow consists of the following steps:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Bm8na1heFl"}],"key":"X5D01gBm5p"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"submit an order with parameters directly to the collection,","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FYuk1eAgMV"}],"key":"XRfP1FgXAp"}],"key":"DJe9ZTHDML"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"monitor the returned STAC item status,","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"cxdArEWJao"}],"key":"nP8j39dGii"}],"key":"hjsj1IRnQh"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"download the asset when ready.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Wd0mj5NBA0"}],"key":"ci5JvrUIvl"}],"key":"cj7jr7R6TI"}],"key":"UskcNnffYh"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Note:\nECMWF data follows this process, the STAC item in this case will always contain one asset with the requested data.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"GYSamc829K"}],"key":"C8wIEsVVMF"}],"key":"rqv3tEyqrn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extreme DT data availability","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yqrOJFnr1i"}],"identifier":"extreme-dt-data-availability","label":"Extreme DT data availability","html_id":"extreme-dt-data-availability","implicit":true,"key":"eR0Ga9iY5z"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Extreme DT data is available for specific time ranges (last 14 days) around the current date.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EWLmZw0Nhy"}],"key":"qV76nCAxt5"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"It is possible to use the ECMWF Aviso package to check data availability in the last 14 days (see ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"loy2NG4R1F"},{"type":"link","url":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/HDA/DestinE%20Digital%20Twins/ExtremeDT-dataAvailability.ipynb","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/HDA/DestinE Digital Twins/ExtremeDT-dataAvailability.ipynb","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Eqx3XwwzRO"}],"urlSource":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/HDA/DestinE%20Digital%20Twins/ExtremeDT-dataAvailability.ipynb","data":{"kind":"file","org":"destination-earth","repo":"DestinE-DataLake-Lab","reference":"main","file":"HDA/DestinE%20Digital%20Twins/ExtremeDT-dataAvailability.ipynb","raw":"https://raw.githubusercontent.com/destination-earth/DestinE-DataLake-Lab/main/HDA/DestinE%20Digital%20Twins/ExtremeDT-dataAvailability.ipynb"},"internal":false,"protocol":"github","key":"TOPdyUm2CL"},{"type":"text","value":" or ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"oANnZGjpFC"},{"type":"link","url":"https://github.com/destination-earth-digital-twins/aviso-examples/blob/main/aviso-extremes-dt.py","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"avisoâ€‹-extremesâ€‹-dtâ€‹.py","key":"MOsenYRm6n"}],"urlSource":"https://github.com/destination-earth-digital-twins/aviso-examples/blob/main/aviso-extremes-dt.py","data":{"kind":"file","org":"destination-earth-digital-twins","repo":"aviso-examples","reference":"main","file":"aviso-extremes-dt.py","raw":"https://raw.githubusercontent.com/destination-earth-digital-twins/aviso-examples/main/aviso-extremes-dt.py"},"internal":false,"protocol":"github","key":"Kz9PbsI8SU"},{"type":"text","value":") and request data accordingly.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gBw3C60KEu"}],"key":"YR5SLKZPWr"}],"key":"jlZSF077mU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from datetime import datetime, timedelta\n\n# Get the current date and time in UTC\ncurrent_date = datetime.utcnow()\n\n# Calculate the date 14 days before the current date\ndate_14_days_ago = current_date - timedelta(days=14)\n\n# Format the date as YYYYMMDD and set the time to 0000 UTC\nformatted_date = date_14_days_ago.strftime('%Y%m%d') + '0000'\n# Convert the formatted date back to a datetime object\ndate_from = datetime.strptime(formatted_date, '%Y%m%d%H%M%S').date()\n\n# Format the date as YYYYMMDD and set the time to 0000 UTC\nformatted_date = current_date.strftime('%Y%m%d') + '0000'\n# Convert the formatted date back to a datetime object\ndate_to = datetime.strptime(formatted_date, '%Y%m%d%H%M%S').date()\n\n","visibility":"show","key":"LfWaTFne11"},{"type":"output","id":"lvb1e3_wLQ2h-7-vIz-rE","data":[],"visibility":"show","key":"P6Vb4Ppvhe"}],"visibility":"show","key":"oX7kF6DayN"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"start_date_picker = widgets.DatePicker(description='Start Date:', disabled=False)\n\n# Set initial values directly\nstart_date_picker.min = date_from\nstart_date_picker.max = date_to\nstart_date_picker.value = date_from\n\ndef get_selected_values():\n    selected_start_date = start_date_picker.value\n    return selected_start_date\n\n# Display widgets\ndisplay(start_date_picker)","visibility":"show","key":"Re4hTW3kDY"},{"type":"output","id":"fAaV-G6IZT4pBsNFfUiAg","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"ebf33f73f5654e5fa242932e7a3d46fc\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"DatePicker(value=datetime.date(2025, 10, 7), description='Start Date:', max=datetime.date(2025, 10, 21), min=dâ€¦","content_type":"text/plain"}}}],"visibility":"show","key":"PlUKZIGMg3"}],"visibility":"show","key":"cEN5ECikEb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Submit an Order","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"unzZX4zlI6"}],"identifier":"submit-an-order","label":"Submit an Order","html_id":"submit-an-order","implicit":true,"key":"x0wfzcfKUm"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To submit an order we need to select our parameters of interest.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"D8tf0nq1QE"}],"key":"bSPCb0GqR5"}],"key":"nxCRNIGEIf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"datechoice =  get_selected_values().strftime(\"%Y%m%d\")\nfilter_params = {\n        \"ecmwf:class\": \"d1\",             # fixed (rd or d1)\n        \"ecmwf:dataset\": \"extremes-dt\",  # fixed extreme dt \n        \"ecmwf:expver\": \"0001\",          # fixed experiment version \n        \"ecmwf:stream\": \"oper\",          # fixed oper\n        \"ecmwf:step\": \"0\",               # Forcast step hourly (1..96)\n        \"ecmwf:type\": \"fc\",              # fixed forecasted fields\n        \"ecmwf:levtype\": \"sfc\",          # Surface fields (levtype=sfc), Height level fields (levtype=hl), Pressure level fields (levtype=pl), Model Level (Levtype=ml)\n        \"ecmwf:param\": \"31\" ,            # Sea ice area fraction\n        \"ecmwf:date\":datechoice+\"/to/\"+datechoice\n}","visibility":"show","key":"C5PlrN29Cc"},{"type":"output","id":"gwnIqrqsqCHrnadsYCuE6","data":[],"visibility":"show","key":"PdFvsRs7g8"}],"visibility":"show","key":"pjV3IPkw90"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#timeout and step for polling (sec)\nTIMEOUT = 300\nSTEP = 1\nONLINE_STATUS = \"online\"\n\nresponse = requests.post(f\"{HDA_STAC_ENDPOINT}/collections/{COLLECTION_ID}/order\", json=filter_params, headers=auth_headers)\n\nif response.status_code != 200:\n    print(response.content)\nresponse.raise_for_status()\n\nordered_item = response.json()\n\nproduct_id = ordered_item[\"id\"]\nstorage_tier = ordered_item[\"properties\"].get(\"storage:tier\", \"online\")\norder_status = ordered_item[\"properties\"].get(\"order:status\", \"unknown\")\nfederation_backend = ordered_item[\"properties\"].get(\"federation:backends\", [None])[0]\n\nprint(f\"Product ordered: {product_id}\")\nprint(f\"Provider: {federation_backend}\")\nprint(f\"Storage tier: {storage_tier} (product must have storage tier \\\"online\\\" to be downloadable)\")\nprint(f\"Order status: {order_status}\")      \n\nself_url = f\"{HDA_STAC_ENDPOINT}/collections/{COLLECTION_ID}/items/{product_id}\"\nitem = {}","visibility":"show","key":"fi6UYUHEec"},{"type":"output","id":"TuU0qZsV0XGfyN3-vlSuJ","data":[{"name":"stdout","output_type":"stream","text":"Product ordered: 7d5d0a94-fbf4-4aa7-b4ef-e813ac4d7e14\nProvider: dedt_lumi\nStorage tier: offline (product must have storage tier \"online\" to be downloadable)\nOrder status: shipping\n"}],"visibility":"show","key":"cyxfEr3SkB"}],"visibility":"show","key":"uzFdUgK83K"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Monitor the status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ajt826CAiv"}],"identifier":"monitor-the-status","label":"Monitor the status","html_id":"monitor-the-status","implicit":true,"key":"TetU09FQpT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The status of an order can be:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"o9gWFj5NSg"}],"key":"VK4jDNHQWa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"shipping, that means that the order is in progress;","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"cFsQPng7CS"}],"key":"govN4LKQKY"}],"key":"s6NZvUnsp6"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"succeeded, that means that the order is completed;","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PcHe27YEpo"}],"key":"MfPiGgVLGs"}],"key":"koks8HWX4T"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"failed, that means that the order is in error.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sBqnM80HHg"}],"key":"hTNVWLpVAT"}],"key":"pColV4e7or"}],"key":"L5Kk0tJHLa"}],"key":"JMvyHNGx0l"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for i in range(0, TIMEOUT, STEP):\n    print(f\"Polling {i + 1}/{TIMEOUT // STEP}\")\n\n    response = requests.get(self_url, headers=auth_headers)\n    if response.status_code != 200:\n        print(response.content)\n    response.raise_for_status()\n    item = response.json()\n\n    storage_tier = item[\"properties\"].get(\"storage:tier\", ONLINE_STATUS)\n\n    if storage_tier == ONLINE_STATUS:\n        download_url = item[\"assets\"][\"downloadLink\"][\"href\"]\n        print(\"Product is ready to be downloaded.\")\n        print(f\"Asset URL: {download_url}\")\n        break\n    sleep(STEP)\nelse:\n    order_status = item[\"properties\"].get(\"order:status\", \"unknown\")\n    print(f\"We could not download the product after {TIMEOUT // STEP} tries. Current order status is {order_status}\")\n    \nresponse = requests.get(download_url, stream=True, headers=auth_headers)\nresponse.raise_for_status()\n","visibility":"show","key":"KqjSOCFxUb"},{"type":"output","id":"oJ1ZhDgOaW9jihmeNAIAC","data":[{"name":"stdout","output_type":"stream","text":"Polling 1/300\nPolling 2/300\nProduct is ready to be downloaded.\nAsset URL: https://hda-download.central.data.destination-earth.eu/data/dedt_lumi/EO.ECMWF.DAT.DT_EXTREMES/7d5d0a94-fbf4-4aa7-b4ef-e813ac4d7e14/downloadLink\n"}],"visibility":"show","key":"uYNwSse5qM"}],"visibility":"show","key":"XlqPundDbL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Download","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DdfpG6a0U4"}],"identifier":"download","label":"Download","html_id":"download","implicit":true,"key":"AoOkMdbHeO"}],"key":"a1YwJ3UADS"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"\ncontent_disposition = response.headers.get('Content-Disposition')\ntotal_size = int(response.headers.get(\"content-length\", 0))\nif content_disposition:\n    filename = content_disposition.split('filename=')[1].strip('\"')\n    filename = unquote(filename)\nelse:\n    filename = os.path.basename(url)\n\n# Open a local file in binary write mode and write the content\nprint(f\"downloading {filename}\")\n\nwith tqdm(total=total_size, unit=\"B\", unit_scale=True) as progress_bar:\n    with open(filename, 'wb') as f:\n        for data in response.iter_content(1024):\n            progress_bar.update(len(data))\n            f.write(data)","visibility":"show","key":"U9eKmWHSWZ"},{"type":"output","id":"uKqR7cuPtpr11nhFnfpsM","data":[{"name":"stdout","output_type":"stream","text":"downloading 7d5d0a94-fbf4-4aa7-b4ef-e813ac4d7e14.grib\n"},{"name":"stderr","output_type":"stream","text":"2.95MB [00:00, 74.4MB/s]\n"}],"visibility":"show","key":"ZCQjRba9f9"}],"visibility":"show","key":"wmbTv0KmnV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Render the sea ice coverage on a map","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"APRkgReKSa"}],"label":"DEDL-HDA-EO.ECMWF.DAT.DT_EXTREMES.ipynb-Render-the-sea-ice-coverage-on-a-map","identifier":"dedl-hda-eo.ecmwf.dat.dt_extremes.ipynb-render-the-sea-ice-coverage-on-a-map","html_id":"dedl-hda-eo-ecmwf-dat-dt-extremes-ipynb-render-the-sea-ice-coverage-on-a-map","key":"SLhlcODh3H"}],"key":"C9CnvHnmRz"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport cfgrib\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nds = xr.load_dataset(filename, engine=\"cfgrib\",decode_timedelta=False)\n\nds","visibility":"show","key":"A0axS5gf15"},{"type":"output","id":"aNqdkqmG1jmTH9nFOKTHX","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"â–º\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"â–¼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 526MB\nDimensions:     (values: 26306560)\nCoordinates:\n    time        datetime64[ns] 8B 2025-10-21\n    step        float64 8B 0.0\n    surface     float64 8B 0.0\n    latitude    (values) float64 210MB 89.97 89.97 89.97 ... -89.97 -89.97\n    longitude   (values) float64 210MB 0.0 18.0 36.0 54.0 ... 306.0 324.0 342.0\n    valid_time  datetime64[ns] 8B 2025-10-21\nDimensions without coordinates: values\nData variables:\n    siconc      (values) float32 105MB 0.9028 0.9026 0.9026 ... 0.0 0.0 0.0\nAttributes:\n    GRIB_edition:            2\n    GRIB_centre:             ecmf\n    GRIB_centreDescription:  European Centre for Medium-Range Weather Forecasts\n    GRIB_subCentre:          0\n    Conventions:             CF-1.7\n    institution:             European Centre for Medium-Range Weather Forecasts\n    history:                 2025-10-21T11:20 GRIB to CDM+CF via cfgrib-0.9.1...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-e89f9152-f15e-45ad-8598-d996c2bbc67e' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-e89f9152-f15e-45ad-8598-d996c2bbc67e' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>values</span>: 26306560</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-f53e743c-e6ee-48d9-a7b6-02d4f68b8688' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f53e743c-e6ee-48d9-a7b6-02d4f68b8688' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2025-10-21</div><input id='attrs-9313cc41-d501-463b-959f-f0b8994a40d5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9313cc41-d501-463b-959f-f0b8994a40d5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fb9bb612-0f1d-49a9-b57e-655c90e8d7d9' class='xr-var-data-in' type='checkbox'><label for='data-fb9bb612-0f1d-49a9-b57e-655c90e8d7d9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>initial time of forecast</dd><dt><span>standard_name :</span></dt><dd>forecast_reference_time</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;2025-10-21T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>step</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-10de3f23-59e2-44da-aab9-b1d926690a50' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-10de3f23-59e2-44da-aab9-b1d926690a50' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dadc43e8-f474-4b86-8bdc-ded29c3b86b9' class='xr-var-data-in' type='checkbox'><label for='data-dadc43e8-f474-4b86-8bdc-ded29c3b86b9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time since forecast_reference_time</dd><dt><span>units :</span></dt><dd>hours</dd><dt><span>standard_name :</span></dt><dd>forecast_period</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>surface</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-0fd2d7ff-0314-48b8-9722-cc2853edec7a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0fd2d7ff-0314-48b8-9722-cc2853edec7a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8956dbc-04e6-4b13-81f9-6a709e1ddd0e' class='xr-var-data-in' type='checkbox'><label for='data-d8956dbc-04e6-4b13-81f9-6a709e1ddd0e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>original GRIB coordinate for key: level(surface)</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>latitude</span></div><div class='xr-var-dims'>(values)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>89.97 89.97 89.97 ... -89.97 -89.97</div><input id='attrs-3e7baa72-9af5-4864-b70d-2ed328c0ab4e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3e7baa72-9af5-4864-b70d-2ed328c0ab4e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4103b380-71f9-4e4b-afa3-4462fde07f24' class='xr-var-data-in' type='checkbox'><label for='data-4103b380-71f9-4e4b-afa3-4462fde07f24' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd></dl></div><div class='xr-var-data'><pre>array([ 89.97309123,  89.97309123,  89.97309123, ..., -89.97309123,\n       -89.97309123, -89.97309123])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>longitude</span></div><div class='xr-var-dims'>(values)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 18.0 36.0 ... 306.0 324.0 342.0</div><input id='attrs-36b58cbe-1607-4f25-8d31-5b6b1bcb2b96' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-36b58cbe-1607-4f25-8d31-5b6b1bcb2b96' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-954cecdb-7293-42c7-b2fb-9c99d29af9ee' class='xr-var-data-in' type='checkbox'><label for='data-954cecdb-7293-42c7-b2fb-9c99d29af9ee' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>longitude</dd></dl></div><div class='xr-var-data'><pre>array([  0.,  18.,  36., ..., 306., 324., 342.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>valid_time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2025-10-21</div><input id='attrs-5a22fa11-63c4-48fc-af9d-d06a5d26badb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5a22fa11-63c4-48fc-af9d-d06a5d26badb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d28d01af-f439-44f6-9d2e-4562ac3bc3aa' class='xr-var-data-in' type='checkbox'><label for='data-d28d01af-f439-44f6-9d2e-4562ac3bc3aa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;2025-10-21T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1744fdef-1cda-4c42-890b-52fc4e83eb72' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1744fdef-1cda-4c42-890b-52fc4e83eb72' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>siconc</span></div><div class='xr-var-dims'>(values)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.9028 0.9026 0.9026 ... 0.0 0.0</div><input id='attrs-c7223ddd-7018-462e-a4ed-5f109956c867' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c7223ddd-7018-462e-a4ed-5f109956c867' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c28a3838-fe8f-4cd9-b806-32e5c2139ea4' class='xr-var-data-in' type='checkbox'><label for='data-c28a3838-fe8f-4cd9-b806-32e5c2139ea4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>31</dd><dt><span>GRIB_dataType :</span></dt><dd>fc</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>26306560</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>reduced_gg</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_N :</span></dt><dd>2560</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_cfName :</span></dt><dd>sea_ice_area_fraction</dd><dt><span>GRIB_cfVarName :</span></dt><dd>siconc</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Gaussian latitude/longitude</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>Sea ice area fraction</dd><dt><span>GRIB_pl :</span></dt><dd>[20 24 28 ... 28 24 20]</dd><dt><span>GRIB_shortName :</span></dt><dd>ci</dd><dt><span>GRIB_units :</span></dt><dd>(0 - 1)</dd><dt><span>long_name :</span></dt><dd>Sea ice area fraction</dd><dt><span>units :</span></dt><dd>(0 - 1)</dd><dt><span>standard_name :</span></dt><dd>sea_ice_area_fraction</dd></dl></div><div class='xr-var-data'><pre>array([0.9028092 , 0.90259314, 0.9026459 , ..., 0.        , 0.        ,\n       0.        ], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-7b1c8c09-019e-4c2f-b2d9-5207ade527e0' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-7b1c8c09-019e-4c2f-b2d9-5207ade527e0' class='xr-section-summary'  title='Expand/collapse section'>Indexes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'></ul></div></li><li class='xr-section-item'><input id='section-7e362cfd-1e7d-40a7-a533-3248c053daab' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7e362cfd-1e7d-40a7-a533-3248c053daab' class='xr-section-summary' >Attributes: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>GRIB_edition :</span></dt><dd>2</dd><dt><span>GRIB_centre :</span></dt><dd>ecmf</dd><dt><span>GRIB_centreDescription :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd><dt><span>GRIB_subCentre :</span></dt><dd>0</dd><dt><span>Conventions :</span></dt><dd>CF-1.7</dd><dt><span>institution :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd><dt><span>history :</span></dt><dd>2025-10-21T11:20 GRIB to CDM+CF via cfgrib-0.9.15.0/ecCodes-2.35.0 with {&quot;source&quot;: &quot;7d5d0a94-fbf4-4aa7-b4ef-e813ac4d7e14.grib&quot;, &quot;filter_by_keys&quot;: {}, &quot;encode_cf&quot;: [&quot;parameter&quot;, &quot;time&quot;, &quot;geography&quot;, &quot;vertical&quot;]}</dd></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.Dataset> Size: 526MB\nDimensions:     (values: 26306560)\nCoordinates:\n    time        datetime64[ns] 8B 2025-10-21\n    step        float64 8B 0.0\n    surface     float64 8B 0.0\n    latitude    (values) float64 210MB 89.97 89.97 89.97 ... -89.97 -89.97\n    longitude   (values) float64 210MB 0.0 18.0 36.0 54.0 ... 306.0 324.0 342.0\n    valid_time  datetime64[ns] 8B 2025-10-21\nDimensions without coordinates: values\nData variables:\n    siconc      (values) float32 105MB 0.9028 0.9026 0.9026 ... 0.0 0.0 0.0\nAttributes:\n    GRIB_edition:            2\n    GRIB_centre:             ecmf\n    GRIB_centreDescription:  European Centre for Medium-Range Weather Forecasts\n    GRIB_subCentre:          0\n    Conventions:             CF-1.7\n    institution:             European Centre for Medium-Range Weather Forecasts\n    history:                 2025-10-21T11:20 GRIB to CDM+CF via cfgrib-0.9.1...","content_type":"text/plain"}}}],"visibility":"show","key":"GY4zDS2F89"}],"visibility":"show","key":"DNT8klnRlC"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import cartopy.crs as crs\nimport cartopy.feature as cfeature\n\nfig = plt.figure(figsize=[10, 10])\n\n#ax = fig.add_subplot(1,1,1, projection=crs.Robinson())\ncrs_epsg=crs.NorthPolarStereo(central_longitude=0)\nax = fig.add_subplot(1,1,1, projection=crs_epsg)\n\nax.set_extent([-3850000.0, 3750000.0, -5350000, 5850000.0],crs_epsg)\n\nax.add_feature(cfeature.COASTLINE)\nax.gridlines()\n\ncs = plt.scatter(x=ds.longitude[::10], y=ds.latitude.data[::10], c=ds.siconc[::10], cmap=\"Blues\",\n            s=1,\n            transform=crs.PlateCarree())\n\nfig.colorbar(cs, ax=ax, location='right', shrink =0.8)\nplt.show()","visibility":"show","key":"qZFks5GSnu"},{"type":"output","id":"regNpeRNM2RM6EFdBweOz","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"7a081cc57be99e330f0690b9d650e6d4","path":"/build/7a081cc57be99e330f0690b9d650e6d4.png"},"text/plain":{"content":"<Figure size 1000x1000 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Q63MqOTv5g"}],"visibility":"show","key":"bnAr2jHlBW"}],"key":"R2Icv8yDir"},"references":{"cite":{"order":[],"data":{}}},"footer":{},"domain":"http://localhost:3001"}